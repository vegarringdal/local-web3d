var Rr=Object.defineProperty;var un=xe=>{throw TypeError(xe)};var Nr=(xe,ke,Fe)=>ke in xe?Rr(xe,ke,{enumerable:!0,configurable:!0,writable:!0,value:Fe}):xe[ke]=Fe;var Be=(xe,ke,Fe)=>Nr(xe,typeof ke!="symbol"?ke+"":ke,Fe),Rt=(xe,ke,Fe)=>ke.has(xe)||un("Cannot "+Fe);var te=(xe,ke,Fe)=>(Rt(xe,ke,"read from private field"),Fe?Fe.call(xe):ke.get(xe)),Me=(xe,ke,Fe)=>ke.has(xe)?un("Cannot add the same private member more than once"):ke instanceof WeakSet?ke.add(xe):ke.set(xe,Fe),Qe=(xe,ke,Fe,it)=>(Rt(xe,ke,"write to private field"),it?it.call(xe,Fe):ke.set(xe,Fe),Fe),vt=(xe,ke,Fe)=>(Rt(xe,ke,"access private method"),Fe);(function(){"use strict";/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xe=Symbol("Comlink.proxy"),ke=Symbol("Comlink.endpoint"),Fe=Symbol("Comlink.releaseProxy"),it=Symbol("Comlink.finalizer"),_t=Symbol("Comlink.thrown"),Nt=N=>typeof N=="object"&&N!==null||typeof N=="function",_n={canHandle:N=>Nt(N)&&N[xe],serialize(N){const{port1:D,port2:Y}=new MessageChannel;return xt(N,D),[Y,[Y]]},deserialize(N){return N.start(),mn(N)}},fn={canHandle:N=>Nt(N)&&_t in N,serialize({value:N}){let D;return N instanceof Error?D={isError:!0,value:{message:N.message,name:N.name,stack:N.stack}}:D={isError:!1,value:N},[D,[]]},deserialize(N){throw N.isError?Object.assign(new Error(N.value.message),N.value):N.value}},Mt=new Map([["proxy",_n],["throw",fn]]);function dn(N,D){for(const Y of N)if(D===Y||Y==="*"||Y instanceof RegExp&&Y.test(D))return!0;return!1}function xt(N,D=globalThis,Y=["*"]){D.addEventListener("message",function e($){if(!$||!$.data)return;if(!dn(Y,$.origin)){console.warn(`Invalid origin '${$.origin}' for comlink proxy`);return}const{id:oe,type:ce,path:le}=Object.assign({path:[]},$.data),Se=($.data.argumentList||[]).map(Ze);let be;try{const Ae=le.slice(0,-1).reduce((_e,Le)=>_e[Le],N),ne=le.reduce((_e,Le)=>_e[Le],N);switch(ce){case"GET":be=ne;break;case"SET":Ae[le.slice(-1)[0]]=Ze($.data.value),be=!0;break;case"APPLY":be=ne.apply(Ae,Se);break;case"CONSTRUCT":{const _e=new ne(...Se);be=qn(_e)}break;case"ENDPOINT":{const{port1:_e,port2:Le}=new MessageChannel;xt(N,Le),be=bn(_e,[_e])}break;case"RELEASE":be=void 0;break;default:return}}catch(Ae){be={value:Ae,[_t]:0}}Promise.resolve(be).catch(Ae=>({value:Ae,[_t]:0})).then(Ae=>{const[ne,_e]=mt(Ae);D.postMessage(Object.assign(Object.assign({},ne),{id:oe}),_e),ce==="RELEASE"&&(D.removeEventListener("message",e),jt(D),it in N&&typeof N[it]=="function"&&N[it]())}).catch(Ae=>{const[ne,_e]=mt({value:new TypeError("Unserializable return value"),[_t]:0});D.postMessage(Object.assign(Object.assign({},ne),{id:oe}),_e)})}),D.start&&D.start()}function pn(N){return N.constructor.name==="MessagePort"}function jt(N){pn(N)&&N.close()}function mn(N,D){return At(N,[],D)}function ft(N){if(N)throw new Error("Proxy has been released and is not useable")}function Bt(N){return ot(N,{type:"RELEASE"}).then(()=>{jt(N)})}const dt=new WeakMap,pt="FinalizationRegistry"in globalThis&&new FinalizationRegistry(N=>{const D=(dt.get(N)||0)-1;dt.set(N,D),D===0&&Bt(N)});function hn(N,D){const Y=(dt.get(D)||0)+1;dt.set(D,Y),pt&&pt.register(N,D,N)}function gn(N){pt&&pt.unregister(N)}function At(N,D=[],Y=function(){}){let e=!1;const $=new Proxy(Y,{get(oe,ce){if(ft(e),ce===Fe)return()=>{gn($),Bt(N),e=!0};if(ce==="then"){if(D.length===0)return{then:()=>$};const le=ot(N,{type:"GET",path:D.map(Se=>Se.toString())}).then(Ze);return le.then.bind(le)}return At(N,[...D,ce])},set(oe,ce,le){ft(e);const[Se,be]=mt(le);return ot(N,{type:"SET",path:[...D,ce].map(Ae=>Ae.toString()),value:Se},be).then(Ze)},apply(oe,ce,le){ft(e);const Se=D[D.length-1];if(Se===ke)return ot(N,{type:"ENDPOINT"}).then(Ze);if(Se==="bind")return At(N,D.slice(0,-1));const[be,Ae]=Ut(le);return ot(N,{type:"APPLY",path:D.map(ne=>ne.toString()),argumentList:be},Ae).then(Ze)},construct(oe,ce){ft(e);const[le,Se]=Ut(ce);return ot(N,{type:"CONSTRUCT",path:D.map(be=>be.toString()),argumentList:le},Se).then(Ze)}});return hn($,N),$}function yn(N){return Array.prototype.concat.apply([],N)}function Ut(N){const D=N.map(mt);return[D.map(Y=>Y[0]),yn(D.map(Y=>Y[1]))]}const zt=new WeakMap;function bn(N,D){return zt.set(N,D),N}function qn(N){return Object.assign(N,{[xe]:!0})}function mt(N){for(const[D,Y]of Mt)if(Y.canHandle(N)){const[e,$]=Y.serialize(N);return[{type:"HANDLER",name:D,value:e},$]}return[{type:"RAW",value:N},zt.get(N)||[]]}function Ze(N){switch(N.type){case"HANDLER":return Mt.get(N.name).deserialize(N.value);case"RAW":return N.value}}function ot(N,D,Y){return new Promise(e=>{const $=wn();N.addEventListener("message",function oe(ce){!ce.data||!ce.data.id||ce.data.id!==$||(N.removeEventListener("message",oe),e(ce.data))}),N.start&&N.start(),N.postMessage(Object.assign({id:$},D),Y)})}function wn(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}class En{constructor(D,Y=1,e="DATA"){Be(this,"__name");Be(this,"__version");Be(this,"__storeName");Be(this,"__logEnabled");Be(this,"__db");this.__name=D,this.__version=Y,this.__storeName=e,this.__logEnabled=!1}enableLog(){this.__logEnabled=!0}__logStart(D){this.__logEnabled&&console.time(`ModelStoreLog_${this.__name}_${this.__storeName}_${D}`)}__logEnd(D){this.__logEnabled&&console.timeEnd(`ModelStoreLog_${this.__name}_${this.__storeName}_${D}`)}close(){return new Promise(D=>{this.__db&&(this.__db.close(),D(!0))})}__open(){return new Promise((D,Y)=>{if(this.__db)D(this.__db);else{const e=indexedDB.open(this.__name,this.__version);e.onupgradeneeded=()=>{const $=e.result;$.objectStoreNames.contains(this.__name)||$.createObjectStore(this.__storeName)},e.onblocked=$=>{this.__logEnd("getKey"),Y({type:"onblocked",event:$})},e.onerror=$=>{this.__logEnd("getKey"),Y({type:"onblocked",event:$})},e.onsuccess=()=>{this.__db=e.result,D(e.result)}}})}getUUID(){return crypto.randomUUID()}getJsonKey(D){return new Promise(async(Y,e)=>{this.__logStart("getKey");try{const oe=(await this.__open()).transaction(this.__storeName);oe.onerror=Se=>{this.__logEnd("getKey"),e({type:"store tx error",event:Se})};const le=oe.objectStore(this.__storeName).get(D);le.onsuccess=()=>{this.__logEnd("getKey"),Y(le.result)}}catch($){this.__logEnd("getKey"),e($)}})}getBufferKey(D){return new Promise(async(Y,e)=>{this.__logStart("getKey");try{const oe=(await this.__open()).transaction(this.__storeName);oe.onerror=Se=>{this.__logEnd("getKey"),e({type:"store tx error",event:Se})};const le=oe.objectStore(this.__storeName).get(D);le.onsuccess=()=>{this.__logEnd("getKey"),Y(le.result)}}catch($){this.__logEnd("getKey"),e($)}})}setJsonKey(D,Y){return new Promise(async(e,$)=>{var oe;this.__logStart("setKey");try{const le=(await this.__open()).transaction(this.__storeName,"readwrite");le.onerror=Ae=>{this.__logEnd("setKey"),$({type:"store tx error",event:Ae})};const be=le.objectStore(this.__storeName).put(Y,D);be.onsuccess=()=>{this.__logEnd("setKey"),e(be.result)},(oe=be.transaction)==null||oe.commit()}catch(ce){this.__logEnd("setKey"),$(ce)}})}setBufferKey(D,Y){return new Promise(async(e,$)=>{var oe;this.__logStart("setKey");try{const le=(await this.__open()).transaction(this.__storeName,"readwrite");le.onerror=Ae=>{this.__logEnd("setKey"),$({type:"store tx error",event:Ae})};const be=le.objectStore(this.__storeName).put(Y,D);be.onsuccess=()=>{this.__logEnd("setKey"),e(be.result)},(oe=be.transaction)==null||oe.commit()}catch(ce){this.__logEnd("setKey"),$(ce)}})}deleteKey(D){return new Promise(async(Y,e)=>{this.__logStart("deleteKey");try{const oe=(await this.__open()).transaction(this.__storeName,"readwrite");oe.onerror=Se=>{this.__logEnd("deleteKey"),e({type:"store tx error",event:Se})};const le=oe.objectStore(this.__storeName).delete(D);le.onsuccess=()=>{this.__logEnd("deleteKey"),Y(le.result)}}catch($){this.__logEnd("deleteKey"),e($)}})}deleteDB(){return new Promise((D,Y)=>{this.__logStart("deleteDB");const e=indexedDB.deleteDatabase(this.__name);e.onsuccess=()=>{this.__logEnd("deleteDB"),D(!0)},e.onerror=$=>{this.__logEnd("deleteDB"),Y({type:"onblocked",event:$})}})}}const It="APP_CONFIG";async function vn(N=!1){const D=new En(It);if(N){window||console.error("update storage can only be used on main tread"),window.__APP_DEV_ENV&&(window.__APP_ENV=window.__APP_DEV_ENV);const Y=window.__APP_ENV||{};return await D.setJsonKey(It,Y),Y}return await D.getJsonKey(It)}async function Wt(N,D,Y,e=!1){const $=await vn();return await fetch(`${$.ENV__AZURE_STORAGE_URL}/${D}/${Y}?${N}`,{headers:{"cache-control":"no-cache"},method:e?"HEAD":"GET"})}var kt=(()=>{var N=self.location.href;return function(D){var Y=D||{},e=typeof Y<"u"?Y:{},$,oe;e.ready=new Promise(function(n,t){$=n,oe=t});const ce=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState,ce.debugModule("globalThis.location =",globalThis.location);const le="emscripten-bug-17951";e[le]=function n(t,s){t.env.foo=function(){};const r=e.locateFile(n.uri,typeof _e>"u"?"":_e);ce.debugModule("instantiateWasm() uri =",r);const i=()=>fetch(r,{credentials:"same-origin"});return(WebAssembly.instantiateStreaming?async()=>WebAssembly.instantiateStreaming(i(),t).then(d=>s(d.instance,d.module)):async()=>i().then(d=>d.arrayBuffer()).then(d=>WebAssembly.instantiate(d,t)).then(d=>s(d.instance,d.module)))(),{}},e[le].uri="sqlite3.wasm";var Se=Object.assign({},e),be="./this.program",Ae=typeof window=="object",ne=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var _e="";function Le(n){return e.locateFile?e.locateFile(n,_e):_e+n}var Ue,et,Ke;(Ae||ne)&&(ne?_e=self.location.href:typeof document<"u"&&document.currentScript&&(_e=document.currentScript.src),N&&(_e=N),_e.indexOf("blob:")!==0?_e=_e.substr(0,_e.replace(/[?#].*/,"").lastIndexOf("/")+1):_e="",Ue=n=>{var t=new XMLHttpRequest;return t.open("GET",n,!1),t.send(null),t.responseText},ne&&(Ke=n=>{var t=new XMLHttpRequest;return t.open("GET",n,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),et=(n,t,s)=>{var r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType="arraybuffer",r.onload=()=>{if(r.status==200||r.status==0&&r.response){t(r.response);return}s()},r.onerror=s,r.send(null)});var tt=e.print||console.log.bind(console),Re=e.printErr||console.warn.bind(console);Object.assign(e,Se),Se=null,e.arguments&&e.arguments,e.thisProgram&&(be=e.thisProgram),e.quit&&e.quit;var Xe;e.wasmBinary&&(Xe=e.wasmBinary),e.noExitRuntime,typeof WebAssembly!="object"&&at("no native wasm support detected");var He,ht=!1;function gt(n,t){n||at(t)}var lt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Ye(n,t,s){for(var r=t+s,i=t;n[i]&&!(i>=r);)++i;if(i-t>16&&n.buffer&&lt)return lt.decode(n.subarray(t,i));for(var a="";t<i;){var d=n[t++];if(!(d&128)){a+=String.fromCharCode(d);continue}var g=n[t++]&63;if((d&224)==192){a+=String.fromCharCode((d&31)<<6|g);continue}var P=n[t++]&63;if((d&240)==224?d=(d&15)<<12|g<<6|P:d=(d&7)<<18|g<<12|P<<6|n[t++]&63,d<65536)a+=String.fromCharCode(d);else{var L=d-65536;a+=String.fromCharCode(55296|L>>10,56320|L&1023)}}return a}function Tt(n,t){return n?Ye(We,n,t):""}function Ce(n,t,s,r){if(!(r>0))return 0;for(var i=s,a=s+r-1,d=0;d<n.length;++d){var g=n.charCodeAt(d);if(g>=55296&&g<=57343){var P=n.charCodeAt(++d);g=65536+((g&1023)<<10)|P&1023}if(g<=127){if(s>=a)break;t[s++]=g}else if(g<=2047){if(s+1>=a)break;t[s++]=192|g>>6,t[s++]=128|g&63}else if(g<=65535){if(s+2>=a)break;t[s++]=224|g>>12,t[s++]=128|g>>6&63,t[s++]=128|g&63}else{if(s+3>=a)break;t[s++]=240|g>>18,t[s++]=128|g>>12&63,t[s++]=128|g>>6&63,t[s++]=128|g&63}}return t[s]=0,s-i}function yt(n,t,s){return Ce(n,We,t,s)}function Ve(n){for(var t=0,s=0;s<n.length;++s){var r=n.charCodeAt(s);r<=127?t++:r<=2047?t+=2:r>=55296&&r<=57343?(t+=4,++s):t+=3}return t}var Oe,We,nt,he,Te;function Ht(){var n=He.buffer;e.HEAP8=Oe=new Int8Array(n),e.HEAP16=nt=new Int16Array(n),e.HEAP32=he=new Int32Array(n),e.HEAPU8=We=new Uint8Array(n),e.HEAPU16=new Uint16Array(n),e.HEAPU32=Te=new Uint32Array(n),e.HEAPF32=new Float32Array(n),e.HEAPF64=new Float64Array(n),e.HEAP64=new BigInt64Array(n),e.HEAPU64=new BigUint64Array(n)}var Vt=e.INITIAL_MEMORY||16777216;e.wasmMemory?He=e.wasmMemory:He=new WebAssembly.Memory({initial:Vt/65536,maximum:2147483648/65536}),Ht(),Vt=He.buffer.byteLength;var Gt=[],Kt=[],$t=[];function In(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)Fn(e.preRun.shift());Ot(Gt)}function kn(){!e.noFSInit&&!o.init.initialized&&o.init(),o.ignorePermissions=!1,Ot(Kt)}function Tn(){if(e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)Pn(e.postRun.shift());Ot($t)}function Fn(n){Gt.unshift(n)}function On(n){Kt.unshift(n)}function Pn(n){$t.unshift(n)}var rt=0,ct=null;function jr(n){return n}function Ft(n){rt++,e.monitorRunDependencies&&e.monitorRunDependencies(rt)}function bt(n){if(rt--,e.monitorRunDependencies&&e.monitorRunDependencies(rt),rt==0&&ct){var t=ct;ct=null,t()}}function at(n){e.onAbort&&e.onAbort(n),n="Aborted("+n+")",Re(n),ht=!0,n+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(n);throw oe(t),t}var Ln="data:application/octet-stream;base64,";function Jt(n){return n.startsWith(Ln)}var ze;e.locateFile?(ze="sqlite3.wasm",Jt(ze)||(ze=Le(ze))):ze=new URL(""+new URL("sqlite3-BVdqaZCJ.wasm",self.location.href).href,self.location.href).href;function Xt(n){try{if(n==ze&&Xe)return new Uint8Array(Xe);if(Ke)return Ke(n);throw"both async and sync fetching of the wasm failed"}catch(t){at(t)}}function Dn(){return!Xe&&(Ae||ne)&&typeof fetch=="function"?fetch(ze,{credentials:"same-origin"}).then(function(n){if(!n.ok)throw"failed to load wasm binary file at '"+ze+"'";return n.arrayBuffer()}).catch(function(){return Xt(ze)}):Promise.resolve().then(function(){return Xt(ze)})}function Cn(){var n={env:rn,wasi_snapshot_preview1:rn};function t(d,g){var P=d.exports;e.asm=P,e.asm.__indirect_function_table,On(e.asm.__wasm_call_ctors),bt()}Ft();function s(d){t(d.instance)}function r(d){return Dn().then(function(g){return WebAssembly.instantiate(g,n)}).then(function(g){return g}).then(d,function(g){Re("failed to asynchronously prepare wasm: "+g),at(g)})}function i(){return!Xe&&typeof WebAssembly.instantiateStreaming=="function"&&!Jt(ze)&&typeof fetch=="function"?fetch(ze,{credentials:"same-origin"}).then(function(d){var g=WebAssembly.instantiateStreaming(d,n);return g.then(s,function(P){return Re("wasm streaming compile failed: "+P),Re("falling back to ArrayBuffer instantiation"),r(s)})}):r(s)}if(e.instantiateWasm)try{var a=e.instantiateWasm(n,t);return a}catch(d){Re("Module.instantiateWasm callback failed with error: "+d),oe(d)}return i().catch(oe),{}}var ye,Pe;function Ot(n){for(;n.length>0;)n.shift()(e)}var we={isAbs:n=>n.charAt(0)==="/",splitPath:n=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return t.exec(n).slice(1)},normalizeArray:(n,t)=>{for(var s=0,r=n.length-1;r>=0;r--){var i=n[r];i==="."?n.splice(r,1):i===".."?(n.splice(r,1),s++):s&&(n.splice(r,1),s--)}if(t)for(;s;s--)n.unshift("..");return n},normalize:n=>{var t=we.isAbs(n),s=n.substr(-1)==="/";return n=we.normalizeArray(n.split("/").filter(r=>!!r),!t).join("/"),!n&&!t&&(n="."),n&&s&&(n+="/"),(t?"/":"")+n},dirname:n=>{var t=we.splitPath(n),s=t[0],r=t[1];return!s&&!r?".":(r&&(r=r.substr(0,r.length-1)),s+r)},basename:n=>{if(n==="/")return"/";n=we.normalize(n),n=n.replace(/\/$/,"");var t=n.lastIndexOf("/");return t===-1?n:n.substr(t+1)},join:function(){var n=Array.prototype.slice.call(arguments);return we.normalize(n.join("/"))},join2:(n,t)=>we.normalize(n+"/"+t)};function Rn(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var n=new Uint8Array(1);return()=>(crypto.getRandomValues(n),n[0])}else return()=>at("randomDevice")}var $e={resolve:function(){for(var n="",t=!1,s=arguments.length-1;s>=-1&&!t;s--){var r=s>=0?arguments[s]:o.cwd();if(typeof r!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";n=r+"/"+n,t=we.isAbs(r)}return n=we.normalizeArray(n.split("/").filter(i=>!!i),!t).join("/"),(t?"/":"")+n||"."},relative:(n,t)=>{n=$e.resolve(n).substr(1),t=$e.resolve(t).substr(1);function s(L){for(var z=0;z<L.length&&L[z]==="";z++);for(var G=L.length-1;G>=0&&L[G]==="";G--);return z>G?[]:L.slice(z,G-z+1)}for(var r=s(n.split("/")),i=s(t.split("/")),a=Math.min(r.length,i.length),d=a,g=0;g<a;g++)if(r[g]!==i[g]){d=g;break}for(var P=[],g=d;g<r.length;g++)P.push("..");return P=P.concat(i.slice(d)),P.join("/")}};function Pt(n,t,s){var r=s>0?s:Ve(n)+1,i=new Array(r),a=Ce(n,i,0,i.length);return t&&(i.length=a),i}var st={ttys:[],init:function(){},shutdown:function(){},register:function(n,t){st.ttys[n]={input:[],output:[],ops:t},o.registerDevice(n,st.stream_ops)},stream_ops:{open:function(n){var t=st.ttys[n.node.rdev];if(!t)throw new o.ErrnoError(43);n.tty=t,n.seekable=!1},close:function(n){n.tty.ops.fsync(n.tty)},fsync:function(n){n.tty.ops.fsync(n.tty)},read:function(n,t,s,r,i){if(!n.tty||!n.tty.ops.get_char)throw new o.ErrnoError(60);for(var a=0,d=0;d<r;d++){var g;try{g=n.tty.ops.get_char(n.tty)}catch{throw new o.ErrnoError(29)}if(g===void 0&&a===0)throw new o.ErrnoError(6);if(g==null)break;a++,t[s+d]=g}return a&&(n.node.timestamp=Date.now()),a},write:function(n,t,s,r,i){if(!n.tty||!n.tty.ops.put_char)throw new o.ErrnoError(60);try{for(var a=0;a<r;a++)n.tty.ops.put_char(n.tty,t[s+a])}catch{throw new o.ErrnoError(29)}return r&&(n.node.timestamp=Date.now()),a}},default_tty_ops:{get_char:function(n){if(!n.input.length){var t=null;if(typeof window<"u"&&typeof window.prompt=="function"?(t=window.prompt("Input: "),t!==null&&(t+=`
`)):typeof readline=="function"&&(t=readline(),t!==null&&(t+=`
`)),!t)return null;n.input=Pt(t,!0)}return n.input.shift()},put_char:function(n,t){t===null||t===10?(tt(Ye(n.output,0)),n.output=[]):t!=0&&n.output.push(t)},fsync:function(n){n.output&&n.output.length>0&&(tt(Ye(n.output,0)),n.output=[])}},default_tty1_ops:{put_char:function(n,t){t===null||t===10?(Re(Ye(n.output,0)),n.output=[]):t!=0&&n.output.push(t)},fsync:function(n){n.output&&n.output.length>0&&(Re(Ye(n.output,0)),n.output=[])}}};function Nn(n,t){return We.fill(0,n,n+t),n}function Mn(n,t){return Math.ceil(n/t)*t}function Yt(n){n=Mn(n,65536);var t=an(65536,n);return t?Nn(t,n):0}var pe={ops_table:null,mount:function(n){return pe.createNode(null,"/",16895,0)},createNode:function(n,t,s,r){if(o.isBlkdev(s)||o.isFIFO(s))throw new o.ErrnoError(63);pe.ops_table||(pe.ops_table={dir:{node:{getattr:pe.node_ops.getattr,setattr:pe.node_ops.setattr,lookup:pe.node_ops.lookup,mknod:pe.node_ops.mknod,rename:pe.node_ops.rename,unlink:pe.node_ops.unlink,rmdir:pe.node_ops.rmdir,readdir:pe.node_ops.readdir,symlink:pe.node_ops.symlink},stream:{llseek:pe.stream_ops.llseek}},file:{node:{getattr:pe.node_ops.getattr,setattr:pe.node_ops.setattr},stream:{llseek:pe.stream_ops.llseek,read:pe.stream_ops.read,write:pe.stream_ops.write,allocate:pe.stream_ops.allocate,mmap:pe.stream_ops.mmap,msync:pe.stream_ops.msync}},link:{node:{getattr:pe.node_ops.getattr,setattr:pe.node_ops.setattr,readlink:pe.node_ops.readlink},stream:{}},chrdev:{node:{getattr:pe.node_ops.getattr,setattr:pe.node_ops.setattr},stream:o.chrdev_stream_ops}});var i=o.createNode(n,t,s,r);return o.isDir(i.mode)?(i.node_ops=pe.ops_table.dir.node,i.stream_ops=pe.ops_table.dir.stream,i.contents={}):o.isFile(i.mode)?(i.node_ops=pe.ops_table.file.node,i.stream_ops=pe.ops_table.file.stream,i.usedBytes=0,i.contents=null):o.isLink(i.mode)?(i.node_ops=pe.ops_table.link.node,i.stream_ops=pe.ops_table.link.stream):o.isChrdev(i.mode)&&(i.node_ops=pe.ops_table.chrdev.node,i.stream_ops=pe.ops_table.chrdev.stream),i.timestamp=Date.now(),n&&(n.contents[t]=i,n.timestamp=i.timestamp),i},getFileDataAsTypedArray:function(n){return n.contents?n.contents.subarray?n.contents.subarray(0,n.usedBytes):new Uint8Array(n.contents):new Uint8Array(0)},expandFileStorage:function(n,t){var s=n.contents?n.contents.length:0;if(!(s>=t)){var r=1024*1024;t=Math.max(t,s*(s<r?2:1.125)>>>0),s!=0&&(t=Math.max(t,256));var i=n.contents;n.contents=new Uint8Array(t),n.usedBytes>0&&n.contents.set(i.subarray(0,n.usedBytes),0)}},resizeFileStorage:function(n,t){if(n.usedBytes!=t)if(t==0)n.contents=null,n.usedBytes=0;else{var s=n.contents;n.contents=new Uint8Array(t),s&&n.contents.set(s.subarray(0,Math.min(t,n.usedBytes))),n.usedBytes=t}},node_ops:{getattr:function(n){var t={};return t.dev=o.isChrdev(n.mode)?n.id:1,t.ino=n.id,t.mode=n.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=n.rdev,o.isDir(n.mode)?t.size=4096:o.isFile(n.mode)?t.size=n.usedBytes:o.isLink(n.mode)?t.size=n.link.length:t.size=0,t.atime=new Date(n.timestamp),t.mtime=new Date(n.timestamp),t.ctime=new Date(n.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(n,t){t.mode!==void 0&&(n.mode=t.mode),t.timestamp!==void 0&&(n.timestamp=t.timestamp),t.size!==void 0&&pe.resizeFileStorage(n,t.size)},lookup:function(n,t){throw o.genericErrors[44]},mknod:function(n,t,s,r){return pe.createNode(n,t,s,r)},rename:function(n,t,s){if(o.isDir(n.mode)){var r;try{r=o.lookupNode(t,s)}catch{}if(r)for(var i in r.contents)throw new o.ErrnoError(55)}delete n.parent.contents[n.name],n.parent.timestamp=Date.now(),n.name=s,t.contents[s]=n,t.timestamp=n.parent.timestamp,n.parent=t},unlink:function(n,t){delete n.contents[t],n.timestamp=Date.now()},rmdir:function(n,t){var s=o.lookupNode(n,t);for(var r in s.contents)throw new o.ErrnoError(55);delete n.contents[t],n.timestamp=Date.now()},readdir:function(n){var t=[".",".."];for(var s in n.contents)n.contents.hasOwnProperty(s)&&t.push(s);return t},symlink:function(n,t,s){var r=pe.createNode(n,t,41471,0);return r.link=s,r},readlink:function(n){if(!o.isLink(n.mode))throw new o.ErrnoError(28);return n.link}},stream_ops:{read:function(n,t,s,r,i){var a=n.node.contents;if(i>=n.node.usedBytes)return 0;var d=Math.min(n.node.usedBytes-i,r);if(d>8&&a.subarray)t.set(a.subarray(i,i+d),s);else for(var g=0;g<d;g++)t[s+g]=a[i+g];return d},write:function(n,t,s,r,i,a){if(t.buffer===Oe.buffer&&(a=!1),!r)return 0;var d=n.node;if(d.timestamp=Date.now(),t.subarray&&(!d.contents||d.contents.subarray)){if(a)return d.contents=t.subarray(s,s+r),d.usedBytes=r,r;if(d.usedBytes===0&&i===0)return d.contents=t.slice(s,s+r),d.usedBytes=r,r;if(i+r<=d.usedBytes)return d.contents.set(t.subarray(s,s+r),i),r}if(pe.expandFileStorage(d,i+r),d.contents.subarray&&t.subarray)d.contents.set(t.subarray(s,s+r),i);else for(var g=0;g<r;g++)d.contents[i+g]=t[s+g];return d.usedBytes=Math.max(d.usedBytes,i+r),r},llseek:function(n,t,s){var r=t;if(s===1?r+=n.position:s===2&&o.isFile(n.node.mode)&&(r+=n.node.usedBytes),r<0)throw new o.ErrnoError(28);return r},allocate:function(n,t,s){pe.expandFileStorage(n.node,t+s),n.node.usedBytes=Math.max(n.node.usedBytes,t+s)},mmap:function(n,t,s,r,i){if(!o.isFile(n.node.mode))throw new o.ErrnoError(43);var a,d,g=n.node.contents;if(!(i&2)&&g.buffer===Oe.buffer)d=!1,a=g.byteOffset;else{if((s>0||s+t<g.length)&&(g.subarray?g=g.subarray(s,s+t):g=Array.prototype.slice.call(g,s,s+t)),d=!0,a=Yt(t),!a)throw new o.ErrnoError(48);Oe.set(g,a)}return{ptr:a,allocated:d}},msync:function(n,t,s,r,i){return pe.stream_ops.write(n,t,0,r,s,!1),0}}};function jn(n,t,s,r){var i=r?"":"al "+n;et(n,a=>{gt(a,'Loading data file "'+n+'" failed (no arrayBuffer).'),t(new Uint8Array(a)),i&&bt()},a=>{if(s)s();else throw'Loading data file "'+n+'" failed.'}),i&&Ft()}var o={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(n,t={})=>{if(n=$e.resolve(n),!n)return{path:"",node:null};var s={follow_mount:!0,recurse_count:0};if(t=Object.assign(s,t),t.recurse_count>8)throw new o.ErrnoError(32);for(var r=n.split("/").filter(G=>!!G),i=o.root,a="/",d=0;d<r.length;d++){var g=d===r.length-1;if(g&&t.parent)break;if(i=o.lookupNode(i,r[d]),a=we.join2(a,r[d]),o.isMountpoint(i)&&(!g||g&&t.follow_mount)&&(i=i.mounted.root),!g||t.follow)for(var P=0;o.isLink(i.mode);){var L=o.readlink(a);a=$e.resolve(we.dirname(a),L);var z=o.lookupPath(a,{recurse_count:t.recurse_count+1});if(i=z.node,P++>40)throw new o.ErrnoError(32)}}return{path:a,node:i}},getPath:n=>{for(var t;;){if(o.isRoot(n)){var s=n.mount.mountpoint;return t?s[s.length-1]!=="/"?s+"/"+t:s+t:s}t=t?n.name+"/"+t:n.name,n=n.parent}},hashName:(n,t)=>{for(var s=0,r=0;r<t.length;r++)s=(s<<5)-s+t.charCodeAt(r)|0;return(n+s>>>0)%o.nameTable.length},hashAddNode:n=>{var t=o.hashName(n.parent.id,n.name);n.name_next=o.nameTable[t],o.nameTable[t]=n},hashRemoveNode:n=>{var t=o.hashName(n.parent.id,n.name);if(o.nameTable[t]===n)o.nameTable[t]=n.name_next;else for(var s=o.nameTable[t];s;){if(s.name_next===n){s.name_next=n.name_next;break}s=s.name_next}},lookupNode:(n,t)=>{var s=o.mayLookup(n);if(s)throw new o.ErrnoError(s,n);for(var r=o.hashName(n.id,t),i=o.nameTable[r];i;i=i.name_next){var a=i.name;if(i.parent.id===n.id&&a===t)return i}return o.lookup(n,t)},createNode:(n,t,s,r)=>{var i=new o.FSNode(n,t,s,r);return o.hashAddNode(i),i},destroyNode:n=>{o.hashRemoveNode(n)},isRoot:n=>n===n.parent,isMountpoint:n=>!!n.mounted,isFile:n=>(n&61440)===32768,isDir:n=>(n&61440)===16384,isLink:n=>(n&61440)===40960,isChrdev:n=>(n&61440)===8192,isBlkdev:n=>(n&61440)===24576,isFIFO:n=>(n&61440)===4096,isSocket:n=>(n&49152)===49152,flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:n=>{var t=o.flagModes[n];if(typeof t>"u")throw new Error("Unknown file open mode: "+n);return t},flagsToPermissionString:n=>{var t=["r","w","rw"][n&3];return n&512&&(t+="w"),t},nodePermissions:(n,t)=>o.ignorePermissions?0:t.includes("r")&&!(n.mode&292)||t.includes("w")&&!(n.mode&146)||t.includes("x")&&!(n.mode&73)?2:0,mayLookup:n=>{var t=o.nodePermissions(n,"x");return t||(n.node_ops.lookup?0:2)},mayCreate:(n,t)=>{try{var s=o.lookupNode(n,t);return 20}catch{}return o.nodePermissions(n,"wx")},mayDelete:(n,t,s)=>{var r;try{r=o.lookupNode(n,t)}catch(a){return a.errno}var i=o.nodePermissions(n,"wx");if(i)return i;if(s){if(!o.isDir(r.mode))return 54;if(o.isRoot(r)||o.getPath(r)===o.cwd())return 10}else if(o.isDir(r.mode))return 31;return 0},mayOpen:(n,t)=>n?o.isLink(n.mode)?32:o.isDir(n.mode)&&(o.flagsToPermissionString(t)!=="r"||t&512)?31:o.nodePermissions(n,o.flagsToPermissionString(t)):44,MAX_OPEN_FDS:4096,nextfd:(n=0,t=o.MAX_OPEN_FDS)=>{for(var s=n;s<=t;s++)if(!o.streams[s])return s;throw new o.ErrnoError(33)},getStream:n=>o.streams[n],createStream:(n,t,s)=>{o.FSStream||(o.FSStream=function(){this.shared={}},o.FSStream.prototype={},Object.defineProperties(o.FSStream.prototype,{object:{get:function(){return this.node},set:function(i){this.node=i}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}},flags:{get:function(){return this.shared.flags},set:function(i){this.shared.flags=i}},position:{get:function(){return this.shared.position},set:function(i){this.shared.position=i}}})),n=Object.assign(new o.FSStream,n);var r=o.nextfd(t,s);return n.fd=r,o.streams[r]=n,n},closeStream:n=>{o.streams[n]=null},chrdev_stream_ops:{open:n=>{var t=o.getDevice(n.node.rdev);n.stream_ops=t.stream_ops,n.stream_ops.open&&n.stream_ops.open(n)},llseek:()=>{throw new o.ErrnoError(70)}},major:n=>n>>8,minor:n=>n&255,makedev:(n,t)=>n<<8|t,registerDevice:(n,t)=>{o.devices[n]={stream_ops:t}},getDevice:n=>o.devices[n],getMounts:n=>{for(var t=[],s=[n];s.length;){var r=s.pop();t.push(r),s.push.apply(s,r.mounts)}return t},syncfs:(n,t)=>{typeof n=="function"&&(t=n,n=!1),o.syncFSRequests++,o.syncFSRequests>1&&Re("warning: "+o.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var s=o.getMounts(o.root.mount),r=0;function i(d){return o.syncFSRequests--,t(d)}function a(d){if(d)return a.errored?void 0:(a.errored=!0,i(d));++r>=s.length&&i(null)}s.forEach(d=>{if(!d.type.syncfs)return a(null);d.type.syncfs(d,n,a)})},mount:(n,t,s)=>{var r=s==="/",i=!s,a;if(r&&o.root)throw new o.ErrnoError(10);if(!r&&!i){var d=o.lookupPath(s,{follow_mount:!1});if(s=d.path,a=d.node,o.isMountpoint(a))throw new o.ErrnoError(10);if(!o.isDir(a.mode))throw new o.ErrnoError(54)}var g={type:n,opts:t,mountpoint:s,mounts:[]},P=n.mount(g);return P.mount=g,g.root=P,r?o.root=P:a&&(a.mounted=g,a.mount&&a.mount.mounts.push(g)),P},unmount:n=>{var t=o.lookupPath(n,{follow_mount:!1});if(!o.isMountpoint(t.node))throw new o.ErrnoError(28);var s=t.node,r=s.mounted,i=o.getMounts(r);Object.keys(o.nameTable).forEach(d=>{for(var g=o.nameTable[d];g;){var P=g.name_next;i.includes(g.mount)&&o.destroyNode(g),g=P}}),s.mounted=null;var a=s.mount.mounts.indexOf(r);s.mount.mounts.splice(a,1)},lookup:(n,t)=>n.node_ops.lookup(n,t),mknod:(n,t,s)=>{var r=o.lookupPath(n,{parent:!0}),i=r.node,a=we.basename(n);if(!a||a==="."||a==="..")throw new o.ErrnoError(28);var d=o.mayCreate(i,a);if(d)throw new o.ErrnoError(d);if(!i.node_ops.mknod)throw new o.ErrnoError(63);return i.node_ops.mknod(i,a,t,s)},create:(n,t)=>(t=t!==void 0?t:438,t&=4095,t|=32768,o.mknod(n,t,0)),mkdir:(n,t)=>(t=t!==void 0?t:511,t&=1023,t|=16384,o.mknod(n,t,0)),mkdirTree:(n,t)=>{for(var s=n.split("/"),r="",i=0;i<s.length;++i)if(s[i]){r+="/"+s[i];try{o.mkdir(r,t)}catch(a){if(a.errno!=20)throw a}}},mkdev:(n,t,s)=>(typeof s>"u"&&(s=t,t=438),t|=8192,o.mknod(n,t,s)),symlink:(n,t)=>{if(!$e.resolve(n))throw new o.ErrnoError(44);var s=o.lookupPath(t,{parent:!0}),r=s.node;if(!r)throw new o.ErrnoError(44);var i=we.basename(t),a=o.mayCreate(r,i);if(a)throw new o.ErrnoError(a);if(!r.node_ops.symlink)throw new o.ErrnoError(63);return r.node_ops.symlink(r,i,n)},rename:(n,t)=>{var s=we.dirname(n),r=we.dirname(t),i=we.basename(n),a=we.basename(t),d,g,P;if(d=o.lookupPath(n,{parent:!0}),g=d.node,d=o.lookupPath(t,{parent:!0}),P=d.node,!g||!P)throw new o.ErrnoError(44);if(g.mount!==P.mount)throw new o.ErrnoError(75);var L=o.lookupNode(g,i),z=$e.relative(n,r);if(z.charAt(0)!==".")throw new o.ErrnoError(28);if(z=$e.relative(t,s),z.charAt(0)!==".")throw new o.ErrnoError(55);var G;try{G=o.lookupNode(P,a)}catch{}if(L!==G){var I=o.isDir(L.mode),A=o.mayDelete(g,i,I);if(A)throw new o.ErrnoError(A);if(A=G?o.mayDelete(P,a,I):o.mayCreate(P,a),A)throw new o.ErrnoError(A);if(!g.node_ops.rename)throw new o.ErrnoError(63);if(o.isMountpoint(L)||G&&o.isMountpoint(G))throw new o.ErrnoError(10);if(P!==g&&(A=o.nodePermissions(g,"w"),A))throw new o.ErrnoError(A);o.hashRemoveNode(L);try{g.node_ops.rename(L,P,a)}catch(M){throw M}finally{o.hashAddNode(L)}}},rmdir:n=>{var t=o.lookupPath(n,{parent:!0}),s=t.node,r=we.basename(n),i=o.lookupNode(s,r),a=o.mayDelete(s,r,!0);if(a)throw new o.ErrnoError(a);if(!s.node_ops.rmdir)throw new o.ErrnoError(63);if(o.isMountpoint(i))throw new o.ErrnoError(10);s.node_ops.rmdir(s,r),o.destroyNode(i)},readdir:n=>{var t=o.lookupPath(n,{follow:!0}),s=t.node;if(!s.node_ops.readdir)throw new o.ErrnoError(54);return s.node_ops.readdir(s)},unlink:n=>{var t=o.lookupPath(n,{parent:!0}),s=t.node;if(!s)throw new o.ErrnoError(44);var r=we.basename(n),i=o.lookupNode(s,r),a=o.mayDelete(s,r,!1);if(a)throw new o.ErrnoError(a);if(!s.node_ops.unlink)throw new o.ErrnoError(63);if(o.isMountpoint(i))throw new o.ErrnoError(10);s.node_ops.unlink(s,r),o.destroyNode(i)},readlink:n=>{var t=o.lookupPath(n),s=t.node;if(!s)throw new o.ErrnoError(44);if(!s.node_ops.readlink)throw new o.ErrnoError(28);return $e.resolve(o.getPath(s.parent),s.node_ops.readlink(s))},stat:(n,t)=>{var s=o.lookupPath(n,{follow:!t}),r=s.node;if(!r)throw new o.ErrnoError(44);if(!r.node_ops.getattr)throw new o.ErrnoError(63);return r.node_ops.getattr(r)},lstat:n=>o.stat(n,!0),chmod:(n,t,s)=>{var r;if(typeof n=="string"){var i=o.lookupPath(n,{follow:!s});r=i.node}else r=n;if(!r.node_ops.setattr)throw new o.ErrnoError(63);r.node_ops.setattr(r,{mode:t&4095|r.mode&-4096,timestamp:Date.now()})},lchmod:(n,t)=>{o.chmod(n,t,!0)},fchmod:(n,t)=>{var s=o.getStream(n);if(!s)throw new o.ErrnoError(8);o.chmod(s.node,t)},chown:(n,t,s,r)=>{var i;if(typeof n=="string"){var a=o.lookupPath(n,{follow:!r});i=a.node}else i=n;if(!i.node_ops.setattr)throw new o.ErrnoError(63);i.node_ops.setattr(i,{timestamp:Date.now()})},lchown:(n,t,s)=>{o.chown(n,t,s,!0)},fchown:(n,t,s)=>{var r=o.getStream(n);if(!r)throw new o.ErrnoError(8);o.chown(r.node,t,s)},truncate:(n,t)=>{if(t<0)throw new o.ErrnoError(28);var s;if(typeof n=="string"){var r=o.lookupPath(n,{follow:!0});s=r.node}else s=n;if(!s.node_ops.setattr)throw new o.ErrnoError(63);if(o.isDir(s.mode))throw new o.ErrnoError(31);if(!o.isFile(s.mode))throw new o.ErrnoError(28);var i=o.nodePermissions(s,"w");if(i)throw new o.ErrnoError(i);s.node_ops.setattr(s,{size:t,timestamp:Date.now()})},ftruncate:(n,t)=>{var s=o.getStream(n);if(!s)throw new o.ErrnoError(8);if(!(s.flags&2097155))throw new o.ErrnoError(28);o.truncate(s.node,t)},utime:(n,t,s)=>{var r=o.lookupPath(n,{follow:!0}),i=r.node;i.node_ops.setattr(i,{timestamp:Math.max(t,s)})},open:(n,t,s)=>{if(n==="")throw new o.ErrnoError(44);t=typeof t=="string"?o.modeStringToFlags(t):t,s=typeof s>"u"?438:s,t&64?s=s&4095|32768:s=0;var r;if(typeof n=="object")r=n;else{n=we.normalize(n);try{var i=o.lookupPath(n,{follow:!(t&131072)});r=i.node}catch{}}var a=!1;if(t&64)if(r){if(t&128)throw new o.ErrnoError(20)}else r=o.mknod(n,s,0),a=!0;if(!r)throw new o.ErrnoError(44);if(o.isChrdev(r.mode)&&(t&=-513),t&65536&&!o.isDir(r.mode))throw new o.ErrnoError(54);if(!a){var d=o.mayOpen(r,t);if(d)throw new o.ErrnoError(d)}t&512&&!a&&o.truncate(r,0),t&=-131713;var g=o.createStream({node:r,path:o.getPath(r),flags:t,seekable:!0,position:0,stream_ops:r.stream_ops,ungotten:[],error:!1});return g.stream_ops.open&&g.stream_ops.open(g),e.logReadFiles&&!(t&1)&&(o.readFiles||(o.readFiles={}),n in o.readFiles||(o.readFiles[n]=1)),g},close:n=>{if(o.isClosed(n))throw new o.ErrnoError(8);n.getdents&&(n.getdents=null);try{n.stream_ops.close&&n.stream_ops.close(n)}catch(t){throw t}finally{o.closeStream(n.fd)}n.fd=null},isClosed:n=>n.fd===null,llseek:(n,t,s)=>{if(o.isClosed(n))throw new o.ErrnoError(8);if(!n.seekable||!n.stream_ops.llseek)throw new o.ErrnoError(70);if(s!=0&&s!=1&&s!=2)throw new o.ErrnoError(28);return n.position=n.stream_ops.llseek(n,t,s),n.ungotten=[],n.position},read:(n,t,s,r,i)=>{if(r<0||i<0)throw new o.ErrnoError(28);if(o.isClosed(n))throw new o.ErrnoError(8);if((n.flags&2097155)===1)throw new o.ErrnoError(8);if(o.isDir(n.node.mode))throw new o.ErrnoError(31);if(!n.stream_ops.read)throw new o.ErrnoError(28);var a=typeof i<"u";if(!a)i=n.position;else if(!n.seekable)throw new o.ErrnoError(70);var d=n.stream_ops.read(n,t,s,r,i);return a||(n.position+=d),d},write:(n,t,s,r,i,a)=>{if(r<0||i<0)throw new o.ErrnoError(28);if(o.isClosed(n))throw new o.ErrnoError(8);if(!(n.flags&2097155))throw new o.ErrnoError(8);if(o.isDir(n.node.mode))throw new o.ErrnoError(31);if(!n.stream_ops.write)throw new o.ErrnoError(28);n.seekable&&n.flags&1024&&o.llseek(n,0,2);var d=typeof i<"u";if(!d)i=n.position;else if(!n.seekable)throw new o.ErrnoError(70);var g=n.stream_ops.write(n,t,s,r,i,a);return d||(n.position+=g),g},allocate:(n,t,s)=>{if(o.isClosed(n))throw new o.ErrnoError(8);if(t<0||s<=0)throw new o.ErrnoError(28);if(!(n.flags&2097155))throw new o.ErrnoError(8);if(!o.isFile(n.node.mode)&&!o.isDir(n.node.mode))throw new o.ErrnoError(43);if(!n.stream_ops.allocate)throw new o.ErrnoError(138);n.stream_ops.allocate(n,t,s)},mmap:(n,t,s,r,i)=>{if(r&2&&!(i&2)&&(n.flags&2097155)!==2)throw new o.ErrnoError(2);if((n.flags&2097155)===1)throw new o.ErrnoError(2);if(!n.stream_ops.mmap)throw new o.ErrnoError(43);return n.stream_ops.mmap(n,t,s,r,i)},msync:(n,t,s,r,i)=>n.stream_ops.msync?n.stream_ops.msync(n,t,s,r,i):0,munmap:n=>0,ioctl:(n,t,s)=>{if(!n.stream_ops.ioctl)throw new o.ErrnoError(59);return n.stream_ops.ioctl(n,t,s)},readFile:(n,t={})=>{if(t.flags=t.flags||0,t.encoding=t.encoding||"binary",t.encoding!=="utf8"&&t.encoding!=="binary")throw new Error('Invalid encoding type "'+t.encoding+'"');var s,r=o.open(n,t.flags),i=o.stat(n),a=i.size,d=new Uint8Array(a);return o.read(r,d,0,a,0),t.encoding==="utf8"?s=Ye(d,0):t.encoding==="binary"&&(s=d),o.close(r),s},writeFile:(n,t,s={})=>{s.flags=s.flags||577;var r=o.open(n,s.flags,s.mode);if(typeof t=="string"){var i=new Uint8Array(Ve(t)+1),a=Ce(t,i,0,i.length);o.write(r,i,0,a,void 0,s.canOwn)}else if(ArrayBuffer.isView(t))o.write(r,t,0,t.byteLength,void 0,s.canOwn);else throw new Error("Unsupported data type");o.close(r)},cwd:()=>o.currentPath,chdir:n=>{var t=o.lookupPath(n,{follow:!0});if(t.node===null)throw new o.ErrnoError(44);if(!o.isDir(t.node.mode))throw new o.ErrnoError(54);var s=o.nodePermissions(t.node,"x");if(s)throw new o.ErrnoError(s);o.currentPath=t.path},createDefaultDirectories:()=>{o.mkdir("/tmp"),o.mkdir("/home"),o.mkdir("/home/web_user")},createDefaultDevices:()=>{o.mkdir("/dev"),o.registerDevice(o.makedev(1,3),{read:()=>0,write:(t,s,r,i,a)=>i}),o.mkdev("/dev/null",o.makedev(1,3)),st.register(o.makedev(5,0),st.default_tty_ops),st.register(o.makedev(6,0),st.default_tty1_ops),o.mkdev("/dev/tty",o.makedev(5,0)),o.mkdev("/dev/tty1",o.makedev(6,0));var n=Rn();o.createDevice("/dev","random",n),o.createDevice("/dev","urandom",n),o.mkdir("/dev/shm"),o.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{o.mkdir("/proc");var n=o.mkdir("/proc/self");o.mkdir("/proc/self/fd"),o.mount({mount:()=>{var t=o.createNode(n,"fd",16895,73);return t.node_ops={lookup:(s,r)=>{var i=+r,a=o.getStream(i);if(!a)throw new o.ErrnoError(8);var d={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>a.path}};return d.parent=d,d}},t}},{},"/proc/self/fd")},createStandardStreams:()=>{e.stdin?o.createDevice("/dev","stdin",e.stdin):o.symlink("/dev/tty","/dev/stdin"),e.stdout?o.createDevice("/dev","stdout",null,e.stdout):o.symlink("/dev/tty","/dev/stdout"),e.stderr?o.createDevice("/dev","stderr",null,e.stderr):o.symlink("/dev/tty1","/dev/stderr"),o.open("/dev/stdin",0),o.open("/dev/stdout",1),o.open("/dev/stderr",1)},ensureErrnoError:()=>{o.ErrnoError||(o.ErrnoError=function(t,s){this.node=s,this.setErrno=function(r){this.errno=r},this.setErrno(t),this.message="FS error"},o.ErrnoError.prototype=new Error,o.ErrnoError.prototype.constructor=o.ErrnoError,[44].forEach(n=>{o.genericErrors[n]=new o.ErrnoError(n),o.genericErrors[n].stack="<generic error, no stack>"}))},staticInit:()=>{o.ensureErrnoError(),o.nameTable=new Array(4096),o.mount(pe,{},"/"),o.createDefaultDirectories(),o.createDefaultDevices(),o.createSpecialDirectories(),o.filesystems={MEMFS:pe}},init:(n,t,s)=>{o.init.initialized=!0,o.ensureErrnoError(),e.stdin=n||e.stdin,e.stdout=t||e.stdout,e.stderr=s||e.stderr,o.createStandardStreams()},quit:()=>{o.init.initialized=!1;for(var n=0;n<o.streams.length;n++){var t=o.streams[n];t&&o.close(t)}},getMode:(n,t)=>{var s=0;return n&&(s|=365),t&&(s|=146),s},findObject:(n,t)=>{var s=o.analyzePath(n,t);return s.exists?s.object:null},analyzePath:(n,t)=>{try{var s=o.lookupPath(n,{follow:!t});n=s.path}catch{}var r={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var s=o.lookupPath(n,{parent:!0});r.parentExists=!0,r.parentPath=s.path,r.parentObject=s.node,r.name=we.basename(n),s=o.lookupPath(n,{follow:!t}),r.exists=!0,r.path=s.path,r.object=s.node,r.name=s.node.name,r.isRoot=s.path==="/"}catch(i){r.error=i.errno}return r},createPath:(n,t,s,r)=>{n=typeof n=="string"?n:o.getPath(n);for(var i=t.split("/").reverse();i.length;){var a=i.pop();if(a){var d=we.join2(n,a);try{o.mkdir(d)}catch{}n=d}}return d},createFile:(n,t,s,r,i)=>{var a=we.join2(typeof n=="string"?n:o.getPath(n),t),d=o.getMode(r,i);return o.create(a,d)},createDataFile:(n,t,s,r,i,a)=>{var d=t;n&&(n=typeof n=="string"?n:o.getPath(n),d=t?we.join2(n,t):n);var g=o.getMode(r,i),P=o.create(d,g);if(s){if(typeof s=="string"){for(var L=new Array(s.length),z=0,G=s.length;z<G;++z)L[z]=s.charCodeAt(z);s=L}o.chmod(P,g|146);var I=o.open(P,577);o.write(I,s,0,s.length,0,a),o.close(I),o.chmod(P,g)}return P},createDevice:(n,t,s,r)=>{var i=we.join2(typeof n=="string"?n:o.getPath(n),t),a=o.getMode(!!s,!!r);o.createDevice.major||(o.createDevice.major=64);var d=o.makedev(o.createDevice.major++,0);return o.registerDevice(d,{open:g=>{g.seekable=!1},close:g=>{r&&r.buffer&&r.buffer.length&&r(10)},read:(g,P,L,z,G)=>{for(var I=0,A=0;A<z;A++){var M;try{M=s()}catch{throw new o.ErrnoError(29)}if(M===void 0&&I===0)throw new o.ErrnoError(6);if(M==null)break;I++,P[L+A]=M}return I&&(g.node.timestamp=Date.now()),I},write:(g,P,L,z,G)=>{for(var I=0;I<z;I++)try{r(P[L+I])}catch{throw new o.ErrnoError(29)}return z&&(g.node.timestamp=Date.now()),I}}),o.mkdev(i,a,d)},forceLoadFile:n=>{if(n.isDevice||n.isFolder||n.link||n.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(Ue)try{n.contents=Pt(Ue(n.url),!0),n.usedBytes=n.contents.length}catch{throw new o.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile:(n,t,s,r,i)=>{function a(){this.lengthKnown=!1,this.chunks=[]}if(a.prototype.get=function(A){if(!(A>this.length-1||A<0)){var M=A%this.chunkSize,q=A/this.chunkSize|0;return this.getter(q)[M]}},a.prototype.setDataGetter=function(A){this.getter=A},a.prototype.cacheLength=function(){var A=new XMLHttpRequest;if(A.open("HEAD",s,!1),A.send(null),!(A.status>=200&&A.status<300||A.status===304))throw new Error("Couldn't load "+s+". Status: "+A.status);var M=Number(A.getResponseHeader("Content-length")),q,E=(q=A.getResponseHeader("Accept-Ranges"))&&q==="bytes",T=(q=A.getResponseHeader("Content-Encoding"))&&q==="gzip",O=1024*1024;E||(O=M);var R=(j,V)=>{if(j>V)throw new Error("invalid range ("+j+", "+V+") or no bytes requested!");if(V>M-1)throw new Error("only "+M+" bytes available! programmer error!");var c=new XMLHttpRequest;if(c.open("GET",s,!1),M!==O&&c.setRequestHeader("Range","bytes="+j+"-"+V),c.responseType="arraybuffer",c.overrideMimeType&&c.overrideMimeType("text/plain; charset=x-user-defined"),c.send(null),!(c.status>=200&&c.status<300||c.status===304))throw new Error("Couldn't load "+s+". Status: "+c.status);return c.response!==void 0?new Uint8Array(c.response||[]):Pt(c.responseText||"",!0)},x=this;x.setDataGetter(j=>{var V=j*O,c=(j+1)*O-1;if(c=Math.min(c,M-1),typeof x.chunks[j]>"u"&&(x.chunks[j]=R(V,c)),typeof x.chunks[j]>"u")throw new Error("doXHR failed!");return x.chunks[j]}),(T||!M)&&(O=M=1,M=this.getter(0).length,O=M,tt("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=M,this._chunkSize=O,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){if(!ne)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var d=new a;Object.defineProperties(d,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var g={isDevice:!1,contents:d}}else var g={isDevice:!1,url:s};var P=o.createFile(n,t,g,r,i);g.contents?P.contents=g.contents:g.url&&(P.contents=null,P.url=g.url),Object.defineProperties(P,{usedBytes:{get:function(){return this.contents.length}}});var L={},z=Object.keys(P.stream_ops);z.forEach(I=>{var A=P.stream_ops[I];L[I]=function(){return o.forceLoadFile(P),A.apply(null,arguments)}});function G(I,A,M,q,E){var T=I.node.contents;if(E>=T.length)return 0;var O=Math.min(T.length-E,q);if(T.slice)for(var R=0;R<O;R++)A[M+R]=T[E+R];else for(var R=0;R<O;R++)A[M+R]=T.get(E+R);return O}return L.read=(I,A,M,q,E)=>(o.forceLoadFile(P),G(I,A,M,q,E)),L.mmap=(I,A,M,q,E)=>{o.forceLoadFile(P);var T=Yt(A);if(!T)throw new o.ErrnoError(48);return G(I,Oe,T,A,M),{ptr:T,allocated:!0}},P.stream_ops=L,P},createPreloadedFile:(n,t,s,r,i,a,d,g,P,L)=>{var z=t?$e.resolve(we.join2(n,t)):n;function G(I){function A(M){L&&L(),g||o.createDataFile(n,t,M,r,i,P),a&&a(),bt()}Browser.handledByPreloadPlugin(I,z,A,()=>{d&&d(),bt()})||A(I)}Ft(),typeof s=="string"?jn(s,I=>G(I),d):G(s)},indexedDB:()=>window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,DB_NAME:()=>"EM_FS_"+window.location.pathname,DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:(n,t,s)=>{t=t||(()=>{}),s=s||(()=>{});var r=o.indexedDB();try{var i=r.open(o.DB_NAME(),o.DB_VERSION)}catch(a){return s(a)}i.onupgradeneeded=()=>{tt("creating db");var a=i.result;a.createObjectStore(o.DB_STORE_NAME)},i.onsuccess=()=>{var a=i.result,d=a.transaction([o.DB_STORE_NAME],"readwrite"),g=d.objectStore(o.DB_STORE_NAME),P=0,L=0,z=n.length;function G(){L==0?t():s()}n.forEach(I=>{var A=g.put(o.analyzePath(I).object.contents,I);A.onsuccess=()=>{P++,P+L==z&&G()},A.onerror=()=>{L++,P+L==z&&G()}}),d.onerror=s},i.onerror=s},loadFilesFromDB:(n,t,s)=>{t=t||(()=>{}),s=s||(()=>{});var r=o.indexedDB();try{var i=r.open(o.DB_NAME(),o.DB_VERSION)}catch(a){return s(a)}i.onupgradeneeded=s,i.onsuccess=()=>{var a=i.result;try{var d=a.transaction([o.DB_STORE_NAME],"readonly")}catch(I){s(I);return}var g=d.objectStore(o.DB_STORE_NAME),P=0,L=0,z=n.length;function G(){L==0?t():s()}n.forEach(I=>{var A=g.get(I);A.onsuccess=()=>{o.analyzePath(I).exists&&o.unlink(I),o.createDataFile(we.dirname(I),we.basename(I),A.result,!0,!0,!0),P++,P+L==z&&G()},A.onerror=()=>{L++,P+L==z&&G()}}),d.onerror=s},i.onerror=s}},ue={DEFAULT_POLLMASK:5,calculateAt:function(n,t,s){if(we.isAbs(t))return t;var r;if(n===-100)r=o.cwd();else{var i=ue.getStreamFromFD(n);r=i.path}if(t.length==0){if(!s)throw new o.ErrnoError(44);return r}return we.join2(r,t)},doStat:function(n,t,s){try{var r=n(t)}catch(g){if(g&&g.node&&we.normalize(t)!==we.normalize(o.getPath(g.node)))return-54;throw g}he[s>>2]=r.dev,he[s+8>>2]=r.ino,he[s+12>>2]=r.mode,Te[s+16>>2]=r.nlink,he[s+20>>2]=r.uid,he[s+24>>2]=r.gid,he[s+28>>2]=r.rdev,Pe=[r.size>>>0,(ye=r.size,+Math.abs(ye)>=1?ye>0?(Math.min(+Math.floor(ye/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ye-+(~~ye>>>0))/4294967296)>>>0:0)],he[s+40>>2]=Pe[0],he[s+44>>2]=Pe[1],he[s+48>>2]=4096,he[s+52>>2]=r.blocks;var i=r.atime.getTime(),a=r.mtime.getTime(),d=r.ctime.getTime();return Pe=[Math.floor(i/1e3)>>>0,(ye=Math.floor(i/1e3),+Math.abs(ye)>=1?ye>0?(Math.min(+Math.floor(ye/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ye-+(~~ye>>>0))/4294967296)>>>0:0)],he[s+56>>2]=Pe[0],he[s+60>>2]=Pe[1],Te[s+64>>2]=i%1e3*1e3,Pe=[Math.floor(a/1e3)>>>0,(ye=Math.floor(a/1e3),+Math.abs(ye)>=1?ye>0?(Math.min(+Math.floor(ye/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ye-+(~~ye>>>0))/4294967296)>>>0:0)],he[s+72>>2]=Pe[0],he[s+76>>2]=Pe[1],Te[s+80>>2]=a%1e3*1e3,Pe=[Math.floor(d/1e3)>>>0,(ye=Math.floor(d/1e3),+Math.abs(ye)>=1?ye>0?(Math.min(+Math.floor(ye/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ye-+(~~ye>>>0))/4294967296)>>>0:0)],he[s+88>>2]=Pe[0],he[s+92>>2]=Pe[1],Te[s+96>>2]=d%1e3*1e3,Pe=[r.ino>>>0,(ye=r.ino,+Math.abs(ye)>=1?ye>0?(Math.min(+Math.floor(ye/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ye-+(~~ye>>>0))/4294967296)>>>0:0)],he[s+104>>2]=Pe[0],he[s+108>>2]=Pe[1],0},doMsync:function(n,t,s,r,i){if(!o.isFile(t.node.mode))throw new o.ErrnoError(43);if(r&2)return 0;var a=We.slice(n,n+s);o.msync(t,a,i,s,r)},varargs:void 0,get:function(){ue.varargs+=4;var n=he[ue.varargs-4>>2];return n},getStr:function(n){var t=Tt(n);return t},getStreamFromFD:function(n){var t=o.getStream(n);if(!t)throw new o.ErrnoError(8);return t}};function Bn(n,t){try{return n=ue.getStr(n),o.chmod(n,t),0}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return-s.errno}}function Un(n,t,s,r){try{if(t=ue.getStr(t),t=ue.calculateAt(n,t),s&-8)return-28;var i=o.lookupPath(t,{follow:!0}),a=i.node;if(!a)return-44;var d="";return s&4&&(d+="r"),s&2&&(d+="w"),s&1&&(d+="x"),d&&o.nodePermissions(a,d)?-2:0}catch(g){if(typeof o>"u"||!(g instanceof o.ErrnoError))throw g;return-g.errno}}function zn(n,t){try{return o.fchmod(n,t),0}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return-s.errno}}function Wn(n,t,s){try{return o.fchown(n,t,s),0}catch(r){if(typeof o>"u"||!(r instanceof o.ErrnoError))throw r;return-r.errno}}function Qn(n){return he[sn()>>2]=n,n}function Hn(n,t,s){ue.varargs=s;try{var r=ue.getStreamFromFD(n);switch(t){case 0:{var i=ue.get();if(i<0)return-28;var a;return a=o.createStream(r,i),a.fd}case 1:case 2:return 0;case 3:return r.flags;case 4:{var i=ue.get();return r.flags|=i,0}case 5:{var i=ue.get(),d=0;return nt[i+d>>1]=2,0}case 6:case 7:return 0;case 16:case 8:return-28;case 9:return Qn(28),-1;default:return-28}}catch(g){if(typeof o>"u"||!(g instanceof o.ErrnoError))throw g;return-g.errno}}function Vn(n,t){try{var s=ue.getStreamFromFD(n);return ue.doStat(o.stat,s.path,t)}catch(r){if(typeof o>"u"||!(r instanceof o.ErrnoError))throw r;return-r.errno}}var Gn=9007199254740992,Kn=-9007199254740992;function Zt(n){return n<Kn||n>Gn?NaN:Number(n)}function $n(n,t){try{return t=Zt(t),isNaN(t)?-61:(o.ftruncate(n,t),0)}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return-s.errno}}function Jn(n,t){try{if(t===0)return-28;var s=o.cwd(),r=Ve(s)+1;return t<r?-68:(yt(s,n,t),r)}catch(i){if(typeof o>"u"||!(i instanceof o.ErrnoError))throw i;return-i.errno}}function Xn(n,t,s){ue.varargs=s;try{var r=ue.getStreamFromFD(n);switch(t){case 21509:case 21505:return r.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return r.tty?0:-59;case 21519:{if(!r.tty)return-59;var i=ue.get();return he[i>>2]=0,0}case 21520:return r.tty?-28:-59;case 21531:{var i=ue.get();return o.ioctl(r,t,i)}case 21523:return r.tty?0:-59;case 21524:return r.tty?0:-59;default:return-28}}catch(a){if(typeof o>"u"||!(a instanceof o.ErrnoError))throw a;return-a.errno}}function Yn(n,t){try{return n=ue.getStr(n),ue.doStat(o.lstat,n,t)}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return-s.errno}}function Zn(n,t,s){try{return t=ue.getStr(t),t=ue.calculateAt(n,t),t=we.normalize(t),t[t.length-1]==="/"&&(t=t.substr(0,t.length-1)),o.mkdir(t,s,0),0}catch(r){if(typeof o>"u"||!(r instanceof o.ErrnoError))throw r;return-r.errno}}function er(n,t,s,r){try{t=ue.getStr(t);var i=r&256,a=r&4096;return r=r&-6401,t=ue.calculateAt(n,t,a),ue.doStat(i?o.lstat:o.stat,t,s)}catch(d){if(typeof o>"u"||!(d instanceof o.ErrnoError))throw d;return-d.errno}}function tr(n,t,s,r){ue.varargs=r;try{t=ue.getStr(t),t=ue.calculateAt(n,t);var i=r?ue.get():0;return o.open(t,s,i).fd}catch(a){if(typeof o>"u"||!(a instanceof o.ErrnoError))throw a;return-a.errno}}function nr(n,t,s,r){try{if(t=ue.getStr(t),t=ue.calculateAt(n,t),r<=0)return-28;var i=o.readlink(t),a=Math.min(r,Ve(i)),d=Oe[s+a];return yt(i,s,r+1),Oe[s+a]=d,a}catch(g){if(typeof o>"u"||!(g instanceof o.ErrnoError))throw g;return-g.errno}}function rr(n){try{return n=ue.getStr(n),o.rmdir(n),0}catch(t){if(typeof o>"u"||!(t instanceof o.ErrnoError))throw t;return-t.errno}}function sr(n,t){try{return n=ue.getStr(n),ue.doStat(o.stat,n,t)}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return-s.errno}}function ir(n,t,s){try{return t=ue.getStr(t),t=ue.calculateAt(n,t),s===0?o.unlink(t):s===512?o.rmdir(t):at("Invalid flags passed to unlinkat"),0}catch(r){if(typeof o>"u"||!(r instanceof o.ErrnoError))throw r;return-r.errno}}function Lt(n){return Te[n>>2]+he[n+4>>2]*4294967296}function or(n,t,s,r){try{if(t=ue.getStr(t),t=ue.calculateAt(n,t,!0),s){var d=Lt(s),g=he[s+8>>2];i=d*1e3+g/(1e3*1e3),s+=16,d=Lt(s),g=he[s+8>>2],a=d*1e3+g/(1e3*1e3)}else var i=Date.now(),a=i;return o.utime(t,i,a),0}catch(P){if(typeof o>"u"||!(P instanceof o.ErrnoError))throw P;return-P.errno}}var ar=!0;function lr(){return ar}function cr(n){return n%4===0&&(n%100!==0||n%400===0)}var ur=[0,31,60,91,121,152,182,213,244,274,305,335],_r=[0,31,59,90,120,151,181,212,243,273,304,334];function fr(n){var t=cr(n.getFullYear()),s=t?ur:_r,r=s[n.getMonth()]+n.getDate()-1;return r}function dr(n,t){var s=new Date(Lt(n)*1e3);he[t>>2]=s.getSeconds(),he[t+4>>2]=s.getMinutes(),he[t+8>>2]=s.getHours(),he[t+12>>2]=s.getDate(),he[t+16>>2]=s.getMonth(),he[t+20>>2]=s.getFullYear()-1900,he[t+24>>2]=s.getDay();var r=fr(s)|0;he[t+28>>2]=r,he[t+36>>2]=-(s.getTimezoneOffset()*60);var i=new Date(s.getFullYear(),0,1),a=new Date(s.getFullYear(),6,1).getTimezoneOffset(),d=i.getTimezoneOffset(),g=(a!=d&&s.getTimezoneOffset()==Math.min(d,a))|0;he[t+32>>2]=g}function pr(n,t,s,r,i,a,d){try{var g=ue.getStreamFromFD(r),P=o.mmap(g,n,i,t,s),L=P.ptr;return he[a>>2]=P.allocated,Te[d>>2]=L,0}catch(z){if(typeof o>"u"||!(z instanceof o.ErrnoError))throw z;return-z.errno}}function mr(n,t,s,r,i,a){try{var d=ue.getStreamFromFD(i);s&2&&ue.doMsync(n,d,t,r,a),o.munmap(d)}catch(g){if(typeof o>"u"||!(g instanceof o.ErrnoError))throw g;return-g.errno}}function en(n){var t=Ve(n)+1,s=on(t);return s&&Ce(n,Oe,s,t),s}function hr(n,t,s){var r=new Date().getFullYear(),i=new Date(r,0,1),a=new Date(r,6,1),d=i.getTimezoneOffset(),g=a.getTimezoneOffset(),P=Math.max(d,g);Te[n>>2]=P*60,he[t>>2]=+(d!=g);function L(M){var q=M.toTimeString().match(/\(([A-Za-z ]+)\)$/);return q?q[1]:"GMT"}var z=L(i),G=L(a),I=en(z),A=en(G);g<d?(Te[s>>2]=I,Te[s+4>>2]=A):(Te[s>>2]=A,Te[s+4>>2]=I)}function gr(){return Date.now()}var tn;tn=()=>performance.now();function yr(){return 2147483648}function br(n){var t=He.buffer;try{return He.grow(n-t.byteLength+65535>>>16),Ht(),1}catch{}}function qr(n){var t=We.length;n=n>>>0;var s=yr();if(n>s)return!1;let r=(P,L)=>P+(L-P%L)%L;for(var i=1;i<=4;i*=2){var a=t*(1+.2/i);a=Math.min(a,n+100663296);var d=Math.min(s,r(Math.max(n,a),65536)),g=br(d);if(g)return!0}return!1}var Dt={};function wr(){return be||"./this.program"}function ut(){if(!ut.strings){var n=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:n,_:wr()};for(var s in Dt)Dt[s]===void 0?delete t[s]:t[s]=Dt[s];var r=[];for(var s in t)r.push(s+"="+t[s]);ut.strings=r}return ut.strings}function Er(n,t,s){for(var r=0;r<n.length;++r)Oe[t++>>0]=n.charCodeAt(r);s||(Oe[t>>0]=0)}function vr(n,t){var s=0;return ut().forEach(function(r,i){var a=t+s;Te[n+i*4>>2]=a,Er(r,a),s+=r.length+1}),0}function Sr(n,t){var s=ut();Te[n>>2]=s.length;var r=0;return s.forEach(function(i){r+=i.length+1}),Te[t>>2]=r,0}function xr(n){try{var t=ue.getStreamFromFD(n);return o.close(t),0}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return s.errno}}function Ar(n,t){try{var s=ue.getStreamFromFD(n),r=s.tty?2:o.isDir(s.mode)?3:o.isLink(s.mode)?7:4;return Oe[t>>0]=r,0}catch(i){if(typeof o>"u"||!(i instanceof o.ErrnoError))throw i;return i.errno}}function Ir(n,t,s,r){for(var i=0,a=0;a<s;a++){var d=Te[t>>2],g=Te[t+4>>2];t+=8;var P=o.read(n,Oe,d,g,r);if(P<0)return-1;if(i+=P,P<g)break;typeof r<"u"&&(r+=P)}return i}function kr(n,t,s,r){try{var i=ue.getStreamFromFD(n),a=Ir(i,t,s);return Te[r>>2]=a,0}catch(d){if(typeof o>"u"||!(d instanceof o.ErrnoError))throw d;return d.errno}}function Tr(n,t,s,r){try{if(t=Zt(t),isNaN(t))return 61;var i=ue.getStreamFromFD(n);return o.llseek(i,t,s),Pe=[i.position>>>0,(ye=i.position,+Math.abs(ye)>=1?ye>0?(Math.min(+Math.floor(ye/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ye-+(~~ye>>>0))/4294967296)>>>0:0)],he[r>>2]=Pe[0],he[r+4>>2]=Pe[1],i.getdents&&t===0&&s===0&&(i.getdents=null),0}catch(a){if(typeof o>"u"||!(a instanceof o.ErrnoError))throw a;return a.errno}}function Fr(n){try{var t=ue.getStreamFromFD(n);return t.stream_ops&&t.stream_ops.fsync?t.stream_ops.fsync(t):0}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return s.errno}}function Or(n,t,s,r){for(var i=0,a=0;a<s;a++){var d=Te[t>>2],g=Te[t+4>>2];t+=8;var P=o.write(n,Oe,d,g,r);if(P<0)return-1;i+=P,typeof r<"u"&&(r+=P)}return i}function Pr(n,t,s,r){try{var i=ue.getStreamFromFD(n),a=Or(i,t,s);return Te[r>>2]=a,0}catch(d){if(typeof o>"u"||!(d instanceof o.ErrnoError))throw d;return d.errno}}var nn=function(n,t,s,r){n||(n=this),this.parent=n,this.mount=n.mount,this.mounted=null,this.id=o.nextInode++,this.name=t,this.mode=s,this.node_ops={},this.stream_ops={},this.rdev=r},qt=365,wt=146;Object.defineProperties(nn.prototype,{read:{get:function(){return(this.mode&qt)===qt},set:function(n){n?this.mode|=qt:this.mode&=~qt}},write:{get:function(){return(this.mode&wt)===wt},set:function(n){n?this.mode|=wt:this.mode&=~wt}},isFolder:{get:function(){return o.isDir(this.mode)}},isDevice:{get:function(){return o.isChrdev(this.mode)}}}),o.FSNode=nn,o.staticInit();var rn={__syscall_chmod:Bn,__syscall_faccessat:Un,__syscall_fchmod:zn,__syscall_fchown32:Wn,__syscall_fcntl64:Hn,__syscall_fstat64:Vn,__syscall_ftruncate64:$n,__syscall_getcwd:Jn,__syscall_ioctl:Xn,__syscall_lstat64:Yn,__syscall_mkdirat:Zn,__syscall_newfstatat:er,__syscall_openat:tr,__syscall_readlinkat:nr,__syscall_rmdir:rr,__syscall_stat64:sr,__syscall_unlinkat:ir,__syscall_utimensat:or,_emscripten_get_now_is_monotonic:lr,_localtime_js:dr,_mmap_js:pr,_munmap_js:mr,_tzset_js:hr,emscripten_date_now:gr,emscripten_get_now:tn,emscripten_resize_heap:qr,environ_get:vr,environ_sizes_get:Sr,fd_close:xr,fd_fdstat_get:Ar,fd_read:kr,fd_seek:Tr,fd_sync:Fr,fd_write:Pr,memory:He};Cn(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.__wasm_call_ctors).apply(null,arguments)},e._sqlite3_status64=function(){return(e._sqlite3_status64=e.asm.sqlite3_status64).apply(null,arguments)},e._sqlite3_status=function(){return(e._sqlite3_status=e.asm.sqlite3_status).apply(null,arguments)},e._sqlite3_db_status=function(){return(e._sqlite3_db_status=e.asm.sqlite3_db_status).apply(null,arguments)},e._sqlite3_msize=function(){return(e._sqlite3_msize=e.asm.sqlite3_msize).apply(null,arguments)},e._sqlite3_vfs_find=function(){return(e._sqlite3_vfs_find=e.asm.sqlite3_vfs_find).apply(null,arguments)},e._sqlite3_initialize=function(){return(e._sqlite3_initialize=e.asm.sqlite3_initialize).apply(null,arguments)},e._sqlite3_malloc=function(){return(e._sqlite3_malloc=e.asm.sqlite3_malloc).apply(null,arguments)},e._sqlite3_free=function(){return(e._sqlite3_free=e.asm.sqlite3_free).apply(null,arguments)},e._sqlite3_vfs_register=function(){return(e._sqlite3_vfs_register=e.asm.sqlite3_vfs_register).apply(null,arguments)},e._sqlite3_vfs_unregister=function(){return(e._sqlite3_vfs_unregister=e.asm.sqlite3_vfs_unregister).apply(null,arguments)},e._sqlite3_malloc64=function(){return(e._sqlite3_malloc64=e.asm.sqlite3_malloc64).apply(null,arguments)},e._sqlite3_realloc=function(){return(e._sqlite3_realloc=e.asm.sqlite3_realloc).apply(null,arguments)},e._sqlite3_realloc64=function(){return(e._sqlite3_realloc64=e.asm.sqlite3_realloc64).apply(null,arguments)},e._sqlite3_value_text=function(){return(e._sqlite3_value_text=e.asm.sqlite3_value_text).apply(null,arguments)},e._sqlite3_randomness=function(){return(e._sqlite3_randomness=e.asm.sqlite3_randomness).apply(null,arguments)},e._sqlite3_stricmp=function(){return(e._sqlite3_stricmp=e.asm.sqlite3_stricmp).apply(null,arguments)},e._sqlite3_strnicmp=function(){return(e._sqlite3_strnicmp=e.asm.sqlite3_strnicmp).apply(null,arguments)},e._sqlite3_uri_parameter=function(){return(e._sqlite3_uri_parameter=e.asm.sqlite3_uri_parameter).apply(null,arguments)};var sn=e.___errno_location=function(){return(sn=e.___errno_location=e.asm.__errno_location).apply(null,arguments)};e._sqlite3_uri_boolean=function(){return(e._sqlite3_uri_boolean=e.asm.sqlite3_uri_boolean).apply(null,arguments)},e._sqlite3_serialize=function(){return(e._sqlite3_serialize=e.asm.sqlite3_serialize).apply(null,arguments)},e._sqlite3_prepare_v2=function(){return(e._sqlite3_prepare_v2=e.asm.sqlite3_prepare_v2).apply(null,arguments)},e._sqlite3_step=function(){return(e._sqlite3_step=e.asm.sqlite3_step).apply(null,arguments)},e._sqlite3_column_int64=function(){return(e._sqlite3_column_int64=e.asm.sqlite3_column_int64).apply(null,arguments)},e._sqlite3_reset=function(){return(e._sqlite3_reset=e.asm.sqlite3_reset).apply(null,arguments)},e._sqlite3_exec=function(){return(e._sqlite3_exec=e.asm.sqlite3_exec).apply(null,arguments)},e._sqlite3_column_int=function(){return(e._sqlite3_column_int=e.asm.sqlite3_column_int).apply(null,arguments)},e._sqlite3_finalize=function(){return(e._sqlite3_finalize=e.asm.sqlite3_finalize).apply(null,arguments)},e._sqlite3_file_control=function(){return(e._sqlite3_file_control=e.asm.sqlite3_file_control).apply(null,arguments)},e._sqlite3_column_name=function(){return(e._sqlite3_column_name=e.asm.sqlite3_column_name).apply(null,arguments)},e._sqlite3_column_text=function(){return(e._sqlite3_column_text=e.asm.sqlite3_column_text).apply(null,arguments)},e._sqlite3_column_type=function(){return(e._sqlite3_column_type=e.asm.sqlite3_column_type).apply(null,arguments)},e._sqlite3_errmsg=function(){return(e._sqlite3_errmsg=e.asm.sqlite3_errmsg).apply(null,arguments)},e._sqlite3_deserialize=function(){return(e._sqlite3_deserialize=e.asm.sqlite3_deserialize).apply(null,arguments)},e._sqlite3_clear_bindings=function(){return(e._sqlite3_clear_bindings=e.asm.sqlite3_clear_bindings).apply(null,arguments)},e._sqlite3_value_blob=function(){return(e._sqlite3_value_blob=e.asm.sqlite3_value_blob).apply(null,arguments)},e._sqlite3_value_bytes=function(){return(e._sqlite3_value_bytes=e.asm.sqlite3_value_bytes).apply(null,arguments)},e._sqlite3_value_double=function(){return(e._sqlite3_value_double=e.asm.sqlite3_value_double).apply(null,arguments)},e._sqlite3_value_int=function(){return(e._sqlite3_value_int=e.asm.sqlite3_value_int).apply(null,arguments)},e._sqlite3_value_int64=function(){return(e._sqlite3_value_int64=e.asm.sqlite3_value_int64).apply(null,arguments)},e._sqlite3_value_subtype=function(){return(e._sqlite3_value_subtype=e.asm.sqlite3_value_subtype).apply(null,arguments)},e._sqlite3_value_pointer=function(){return(e._sqlite3_value_pointer=e.asm.sqlite3_value_pointer).apply(null,arguments)},e._sqlite3_value_type=function(){return(e._sqlite3_value_type=e.asm.sqlite3_value_type).apply(null,arguments)},e._sqlite3_value_nochange=function(){return(e._sqlite3_value_nochange=e.asm.sqlite3_value_nochange).apply(null,arguments)},e._sqlite3_value_frombind=function(){return(e._sqlite3_value_frombind=e.asm.sqlite3_value_frombind).apply(null,arguments)},e._sqlite3_value_dup=function(){return(e._sqlite3_value_dup=e.asm.sqlite3_value_dup).apply(null,arguments)},e._sqlite3_value_free=function(){return(e._sqlite3_value_free=e.asm.sqlite3_value_free).apply(null,arguments)},e._sqlite3_result_blob=function(){return(e._sqlite3_result_blob=e.asm.sqlite3_result_blob).apply(null,arguments)},e._sqlite3_result_error_toobig=function(){return(e._sqlite3_result_error_toobig=e.asm.sqlite3_result_error_toobig).apply(null,arguments)},e._sqlite3_result_error_nomem=function(){return(e._sqlite3_result_error_nomem=e.asm.sqlite3_result_error_nomem).apply(null,arguments)},e._sqlite3_result_double=function(){return(e._sqlite3_result_double=e.asm.sqlite3_result_double).apply(null,arguments)},e._sqlite3_result_error=function(){return(e._sqlite3_result_error=e.asm.sqlite3_result_error).apply(null,arguments)},e._sqlite3_result_int=function(){return(e._sqlite3_result_int=e.asm.sqlite3_result_int).apply(null,arguments)},e._sqlite3_result_int64=function(){return(e._sqlite3_result_int64=e.asm.sqlite3_result_int64).apply(null,arguments)},e._sqlite3_result_null=function(){return(e._sqlite3_result_null=e.asm.sqlite3_result_null).apply(null,arguments)},e._sqlite3_result_pointer=function(){return(e._sqlite3_result_pointer=e.asm.sqlite3_result_pointer).apply(null,arguments)},e._sqlite3_result_subtype=function(){return(e._sqlite3_result_subtype=e.asm.sqlite3_result_subtype).apply(null,arguments)},e._sqlite3_result_text=function(){return(e._sqlite3_result_text=e.asm.sqlite3_result_text).apply(null,arguments)},e._sqlite3_result_zeroblob=function(){return(e._sqlite3_result_zeroblob=e.asm.sqlite3_result_zeroblob).apply(null,arguments)},e._sqlite3_result_zeroblob64=function(){return(e._sqlite3_result_zeroblob64=e.asm.sqlite3_result_zeroblob64).apply(null,arguments)},e._sqlite3_result_error_code=function(){return(e._sqlite3_result_error_code=e.asm.sqlite3_result_error_code).apply(null,arguments)},e._sqlite3_user_data=function(){return(e._sqlite3_user_data=e.asm.sqlite3_user_data).apply(null,arguments)},e._sqlite3_context_db_handle=function(){return(e._sqlite3_context_db_handle=e.asm.sqlite3_context_db_handle).apply(null,arguments)},e._sqlite3_vtab_nochange=function(){return(e._sqlite3_vtab_nochange=e.asm.sqlite3_vtab_nochange).apply(null,arguments)},e._sqlite3_vtab_in_first=function(){return(e._sqlite3_vtab_in_first=e.asm.sqlite3_vtab_in_first).apply(null,arguments)},e._sqlite3_vtab_in_next=function(){return(e._sqlite3_vtab_in_next=e.asm.sqlite3_vtab_in_next).apply(null,arguments)},e._sqlite3_aggregate_context=function(){return(e._sqlite3_aggregate_context=e.asm.sqlite3_aggregate_context).apply(null,arguments)},e._sqlite3_get_auxdata=function(){return(e._sqlite3_get_auxdata=e.asm.sqlite3_get_auxdata).apply(null,arguments)},e._sqlite3_set_auxdata=function(){return(e._sqlite3_set_auxdata=e.asm.sqlite3_set_auxdata).apply(null,arguments)},e._sqlite3_column_count=function(){return(e._sqlite3_column_count=e.asm.sqlite3_column_count).apply(null,arguments)},e._sqlite3_data_count=function(){return(e._sqlite3_data_count=e.asm.sqlite3_data_count).apply(null,arguments)},e._sqlite3_column_blob=function(){return(e._sqlite3_column_blob=e.asm.sqlite3_column_blob).apply(null,arguments)},e._sqlite3_column_bytes=function(){return(e._sqlite3_column_bytes=e.asm.sqlite3_column_bytes).apply(null,arguments)},e._sqlite3_column_double=function(){return(e._sqlite3_column_double=e.asm.sqlite3_column_double).apply(null,arguments)},e._sqlite3_column_value=function(){return(e._sqlite3_column_value=e.asm.sqlite3_column_value).apply(null,arguments)},e._sqlite3_bind_blob=function(){return(e._sqlite3_bind_blob=e.asm.sqlite3_bind_blob).apply(null,arguments)},e._sqlite3_bind_double=function(){return(e._sqlite3_bind_double=e.asm.sqlite3_bind_double).apply(null,arguments)},e._sqlite3_bind_int=function(){return(e._sqlite3_bind_int=e.asm.sqlite3_bind_int).apply(null,arguments)},e._sqlite3_bind_int64=function(){return(e._sqlite3_bind_int64=e.asm.sqlite3_bind_int64).apply(null,arguments)},e._sqlite3_bind_null=function(){return(e._sqlite3_bind_null=e.asm.sqlite3_bind_null).apply(null,arguments)},e._sqlite3_bind_pointer=function(){return(e._sqlite3_bind_pointer=e.asm.sqlite3_bind_pointer).apply(null,arguments)},e._sqlite3_bind_text=function(){return(e._sqlite3_bind_text=e.asm.sqlite3_bind_text).apply(null,arguments)},e._sqlite3_bind_parameter_count=function(){return(e._sqlite3_bind_parameter_count=e.asm.sqlite3_bind_parameter_count).apply(null,arguments)},e._sqlite3_bind_parameter_index=function(){return(e._sqlite3_bind_parameter_index=e.asm.sqlite3_bind_parameter_index).apply(null,arguments)},e._sqlite3_db_handle=function(){return(e._sqlite3_db_handle=e.asm.sqlite3_db_handle).apply(null,arguments)},e._sqlite3_stmt_readonly=function(){return(e._sqlite3_stmt_readonly=e.asm.sqlite3_stmt_readonly).apply(null,arguments)},e._sqlite3_stmt_isexplain=function(){return(e._sqlite3_stmt_isexplain=e.asm.sqlite3_stmt_isexplain).apply(null,arguments)},e._sqlite3_stmt_status=function(){return(e._sqlite3_stmt_status=e.asm.sqlite3_stmt_status).apply(null,arguments)},e._sqlite3_sql=function(){return(e._sqlite3_sql=e.asm.sqlite3_sql).apply(null,arguments)},e._sqlite3_expanded_sql=function(){return(e._sqlite3_expanded_sql=e.asm.sqlite3_expanded_sql).apply(null,arguments)},e._sqlite3_preupdate_old=function(){return(e._sqlite3_preupdate_old=e.asm.sqlite3_preupdate_old).apply(null,arguments)},e._sqlite3_preupdate_count=function(){return(e._sqlite3_preupdate_count=e.asm.sqlite3_preupdate_count).apply(null,arguments)},e._sqlite3_preupdate_depth=function(){return(e._sqlite3_preupdate_depth=e.asm.sqlite3_preupdate_depth).apply(null,arguments)},e._sqlite3_preupdate_blobwrite=function(){return(e._sqlite3_preupdate_blobwrite=e.asm.sqlite3_preupdate_blobwrite).apply(null,arguments)},e._sqlite3_preupdate_new=function(){return(e._sqlite3_preupdate_new=e.asm.sqlite3_preupdate_new).apply(null,arguments)},e._sqlite3_value_numeric_type=function(){return(e._sqlite3_value_numeric_type=e.asm.sqlite3_value_numeric_type).apply(null,arguments)},e._sqlite3_set_authorizer=function(){return(e._sqlite3_set_authorizer=e.asm.sqlite3_set_authorizer).apply(null,arguments)},e._sqlite3_strglob=function(){return(e._sqlite3_strglob=e.asm.sqlite3_strglob).apply(null,arguments)},e._sqlite3_strlike=function(){return(e._sqlite3_strlike=e.asm.sqlite3_strlike).apply(null,arguments)},e._sqlite3_auto_extension=function(){return(e._sqlite3_auto_extension=e.asm.sqlite3_auto_extension).apply(null,arguments)},e._sqlite3_cancel_auto_extension=function(){return(e._sqlite3_cancel_auto_extension=e.asm.sqlite3_cancel_auto_extension).apply(null,arguments)},e._sqlite3_reset_auto_extension=function(){return(e._sqlite3_reset_auto_extension=e.asm.sqlite3_reset_auto_extension).apply(null,arguments)},e._sqlite3_prepare_v3=function(){return(e._sqlite3_prepare_v3=e.asm.sqlite3_prepare_v3).apply(null,arguments)},e._sqlite3_create_module=function(){return(e._sqlite3_create_module=e.asm.sqlite3_create_module).apply(null,arguments)},e._sqlite3_create_module_v2=function(){return(e._sqlite3_create_module_v2=e.asm.sqlite3_create_module_v2).apply(null,arguments)},e._sqlite3_drop_modules=function(){return(e._sqlite3_drop_modules=e.asm.sqlite3_drop_modules).apply(null,arguments)},e._sqlite3_declare_vtab=function(){return(e._sqlite3_declare_vtab=e.asm.sqlite3_declare_vtab).apply(null,arguments)},e._sqlite3_vtab_on_conflict=function(){return(e._sqlite3_vtab_on_conflict=e.asm.sqlite3_vtab_on_conflict).apply(null,arguments)},e._sqlite3_vtab_collation=function(){return(e._sqlite3_vtab_collation=e.asm.sqlite3_vtab_collation).apply(null,arguments)},e._sqlite3_vtab_in=function(){return(e._sqlite3_vtab_in=e.asm.sqlite3_vtab_in).apply(null,arguments)},e._sqlite3_vtab_rhs_value=function(){return(e._sqlite3_vtab_rhs_value=e.asm.sqlite3_vtab_rhs_value).apply(null,arguments)},e._sqlite3_vtab_distinct=function(){return(e._sqlite3_vtab_distinct=e.asm.sqlite3_vtab_distinct).apply(null,arguments)},e._sqlite3_keyword_name=function(){return(e._sqlite3_keyword_name=e.asm.sqlite3_keyword_name).apply(null,arguments)},e._sqlite3_keyword_count=function(){return(e._sqlite3_keyword_count=e.asm.sqlite3_keyword_count).apply(null,arguments)},e._sqlite3_keyword_check=function(){return(e._sqlite3_keyword_check=e.asm.sqlite3_keyword_check).apply(null,arguments)},e._sqlite3_complete=function(){return(e._sqlite3_complete=e.asm.sqlite3_complete).apply(null,arguments)},e._sqlite3_libversion=function(){return(e._sqlite3_libversion=e.asm.sqlite3_libversion).apply(null,arguments)},e._sqlite3_libversion_number=function(){return(e._sqlite3_libversion_number=e.asm.sqlite3_libversion_number).apply(null,arguments)},e._sqlite3_shutdown=function(){return(e._sqlite3_shutdown=e.asm.sqlite3_shutdown).apply(null,arguments)},e._sqlite3_last_insert_rowid=function(){return(e._sqlite3_last_insert_rowid=e.asm.sqlite3_last_insert_rowid).apply(null,arguments)},e._sqlite3_set_last_insert_rowid=function(){return(e._sqlite3_set_last_insert_rowid=e.asm.sqlite3_set_last_insert_rowid).apply(null,arguments)},e._sqlite3_changes64=function(){return(e._sqlite3_changes64=e.asm.sqlite3_changes64).apply(null,arguments)},e._sqlite3_changes=function(){return(e._sqlite3_changes=e.asm.sqlite3_changes).apply(null,arguments)},e._sqlite3_total_changes64=function(){return(e._sqlite3_total_changes64=e.asm.sqlite3_total_changes64).apply(null,arguments)},e._sqlite3_total_changes=function(){return(e._sqlite3_total_changes=e.asm.sqlite3_total_changes).apply(null,arguments)},e._sqlite3_txn_state=function(){return(e._sqlite3_txn_state=e.asm.sqlite3_txn_state).apply(null,arguments)},e._sqlite3_close_v2=function(){return(e._sqlite3_close_v2=e.asm.sqlite3_close_v2).apply(null,arguments)},e._sqlite3_busy_handler=function(){return(e._sqlite3_busy_handler=e.asm.sqlite3_busy_handler).apply(null,arguments)},e._sqlite3_progress_handler=function(){return(e._sqlite3_progress_handler=e.asm.sqlite3_progress_handler).apply(null,arguments)},e._sqlite3_busy_timeout=function(){return(e._sqlite3_busy_timeout=e.asm.sqlite3_busy_timeout).apply(null,arguments)},e._sqlite3_create_function=function(){return(e._sqlite3_create_function=e.asm.sqlite3_create_function).apply(null,arguments)},e._sqlite3_create_function_v2=function(){return(e._sqlite3_create_function_v2=e.asm.sqlite3_create_function_v2).apply(null,arguments)},e._sqlite3_create_window_function=function(){return(e._sqlite3_create_window_function=e.asm.sqlite3_create_window_function).apply(null,arguments)},e._sqlite3_overload_function=function(){return(e._sqlite3_overload_function=e.asm.sqlite3_overload_function).apply(null,arguments)},e._sqlite3_trace_v2=function(){return(e._sqlite3_trace_v2=e.asm.sqlite3_trace_v2).apply(null,arguments)},e._sqlite3_commit_hook=function(){return(e._sqlite3_commit_hook=e.asm.sqlite3_commit_hook).apply(null,arguments)},e._sqlite3_update_hook=function(){return(e._sqlite3_update_hook=e.asm.sqlite3_update_hook).apply(null,arguments)},e._sqlite3_rollback_hook=function(){return(e._sqlite3_rollback_hook=e.asm.sqlite3_rollback_hook).apply(null,arguments)},e._sqlite3_preupdate_hook=function(){return(e._sqlite3_preupdate_hook=e.asm.sqlite3_preupdate_hook).apply(null,arguments)},e._sqlite3_error_offset=function(){return(e._sqlite3_error_offset=e.asm.sqlite3_error_offset).apply(null,arguments)},e._sqlite3_errcode=function(){return(e._sqlite3_errcode=e.asm.sqlite3_errcode).apply(null,arguments)},e._sqlite3_extended_errcode=function(){return(e._sqlite3_extended_errcode=e.asm.sqlite3_extended_errcode).apply(null,arguments)},e._sqlite3_errstr=function(){return(e._sqlite3_errstr=e.asm.sqlite3_errstr).apply(null,arguments)},e._sqlite3_limit=function(){return(e._sqlite3_limit=e.asm.sqlite3_limit).apply(null,arguments)},e._sqlite3_open=function(){return(e._sqlite3_open=e.asm.sqlite3_open).apply(null,arguments)},e._sqlite3_open_v2=function(){return(e._sqlite3_open_v2=e.asm.sqlite3_open_v2).apply(null,arguments)},e._sqlite3_create_collation=function(){return(e._sqlite3_create_collation=e.asm.sqlite3_create_collation).apply(null,arguments)},e._sqlite3_create_collation_v2=function(){return(e._sqlite3_create_collation_v2=e.asm.sqlite3_create_collation_v2).apply(null,arguments)},e._sqlite3_collation_needed=function(){return(e._sqlite3_collation_needed=e.asm.sqlite3_collation_needed).apply(null,arguments)},e._sqlite3_get_autocommit=function(){return(e._sqlite3_get_autocommit=e.asm.sqlite3_get_autocommit).apply(null,arguments)},e._sqlite3_table_column_metadata=function(){return(e._sqlite3_table_column_metadata=e.asm.sqlite3_table_column_metadata).apply(null,arguments)},e._sqlite3_extended_result_codes=function(){return(e._sqlite3_extended_result_codes=e.asm.sqlite3_extended_result_codes).apply(null,arguments)},e._sqlite3_uri_key=function(){return(e._sqlite3_uri_key=e.asm.sqlite3_uri_key).apply(null,arguments)},e._sqlite3_uri_int64=function(){return(e._sqlite3_uri_int64=e.asm.sqlite3_uri_int64).apply(null,arguments)},e._sqlite3_db_name=function(){return(e._sqlite3_db_name=e.asm.sqlite3_db_name).apply(null,arguments)},e._sqlite3_db_filename=function(){return(e._sqlite3_db_filename=e.asm.sqlite3_db_filename).apply(null,arguments)},e._sqlite3_compileoption_used=function(){return(e._sqlite3_compileoption_used=e.asm.sqlite3_compileoption_used).apply(null,arguments)},e._sqlite3_compileoption_get=function(){return(e._sqlite3_compileoption_get=e.asm.sqlite3_compileoption_get).apply(null,arguments)},e._sqlite3session_diff=function(){return(e._sqlite3session_diff=e.asm.sqlite3session_diff).apply(null,arguments)},e._sqlite3session_attach=function(){return(e._sqlite3session_attach=e.asm.sqlite3session_attach).apply(null,arguments)},e._sqlite3session_create=function(){return(e._sqlite3session_create=e.asm.sqlite3session_create).apply(null,arguments)},e._sqlite3session_delete=function(){return(e._sqlite3session_delete=e.asm.sqlite3session_delete).apply(null,arguments)},e._sqlite3session_table_filter=function(){return(e._sqlite3session_table_filter=e.asm.sqlite3session_table_filter).apply(null,arguments)},e._sqlite3session_changeset=function(){return(e._sqlite3session_changeset=e.asm.sqlite3session_changeset).apply(null,arguments)},e._sqlite3session_changeset_strm=function(){return(e._sqlite3session_changeset_strm=e.asm.sqlite3session_changeset_strm).apply(null,arguments)},e._sqlite3session_patchset_strm=function(){return(e._sqlite3session_patchset_strm=e.asm.sqlite3session_patchset_strm).apply(null,arguments)},e._sqlite3session_patchset=function(){return(e._sqlite3session_patchset=e.asm.sqlite3session_patchset).apply(null,arguments)},e._sqlite3session_enable=function(){return(e._sqlite3session_enable=e.asm.sqlite3session_enable).apply(null,arguments)},e._sqlite3session_indirect=function(){return(e._sqlite3session_indirect=e.asm.sqlite3session_indirect).apply(null,arguments)},e._sqlite3session_isempty=function(){return(e._sqlite3session_isempty=e.asm.sqlite3session_isempty).apply(null,arguments)},e._sqlite3session_memory_used=function(){return(e._sqlite3session_memory_used=e.asm.sqlite3session_memory_used).apply(null,arguments)},e._sqlite3session_object_config=function(){return(e._sqlite3session_object_config=e.asm.sqlite3session_object_config).apply(null,arguments)},e._sqlite3session_changeset_size=function(){return(e._sqlite3session_changeset_size=e.asm.sqlite3session_changeset_size).apply(null,arguments)},e._sqlite3changeset_start=function(){return(e._sqlite3changeset_start=e.asm.sqlite3changeset_start).apply(null,arguments)},e._sqlite3changeset_start_v2=function(){return(e._sqlite3changeset_start_v2=e.asm.sqlite3changeset_start_v2).apply(null,arguments)},e._sqlite3changeset_start_strm=function(){return(e._sqlite3changeset_start_strm=e.asm.sqlite3changeset_start_strm).apply(null,arguments)},e._sqlite3changeset_start_v2_strm=function(){return(e._sqlite3changeset_start_v2_strm=e.asm.sqlite3changeset_start_v2_strm).apply(null,arguments)},e._sqlite3changeset_next=function(){return(e._sqlite3changeset_next=e.asm.sqlite3changeset_next).apply(null,arguments)},e._sqlite3changeset_op=function(){return(e._sqlite3changeset_op=e.asm.sqlite3changeset_op).apply(null,arguments)},e._sqlite3changeset_pk=function(){return(e._sqlite3changeset_pk=e.asm.sqlite3changeset_pk).apply(null,arguments)},e._sqlite3changeset_old=function(){return(e._sqlite3changeset_old=e.asm.sqlite3changeset_old).apply(null,arguments)},e._sqlite3changeset_new=function(){return(e._sqlite3changeset_new=e.asm.sqlite3changeset_new).apply(null,arguments)},e._sqlite3changeset_conflict=function(){return(e._sqlite3changeset_conflict=e.asm.sqlite3changeset_conflict).apply(null,arguments)},e._sqlite3changeset_fk_conflicts=function(){return(e._sqlite3changeset_fk_conflicts=e.asm.sqlite3changeset_fk_conflicts).apply(null,arguments)},e._sqlite3changeset_finalize=function(){return(e._sqlite3changeset_finalize=e.asm.sqlite3changeset_finalize).apply(null,arguments)},e._sqlite3changeset_invert=function(){return(e._sqlite3changeset_invert=e.asm.sqlite3changeset_invert).apply(null,arguments)},e._sqlite3changeset_invert_strm=function(){return(e._sqlite3changeset_invert_strm=e.asm.sqlite3changeset_invert_strm).apply(null,arguments)},e._sqlite3changeset_apply_v2=function(){return(e._sqlite3changeset_apply_v2=e.asm.sqlite3changeset_apply_v2).apply(null,arguments)},e._sqlite3changeset_apply=function(){return(e._sqlite3changeset_apply=e.asm.sqlite3changeset_apply).apply(null,arguments)},e._sqlite3changeset_apply_v2_strm=function(){return(e._sqlite3changeset_apply_v2_strm=e.asm.sqlite3changeset_apply_v2_strm).apply(null,arguments)},e._sqlite3changeset_apply_strm=function(){return(e._sqlite3changeset_apply_strm=e.asm.sqlite3changeset_apply_strm).apply(null,arguments)},e._sqlite3changegroup_new=function(){return(e._sqlite3changegroup_new=e.asm.sqlite3changegroup_new).apply(null,arguments)},e._sqlite3changegroup_add=function(){return(e._sqlite3changegroup_add=e.asm.sqlite3changegroup_add).apply(null,arguments)},e._sqlite3changegroup_output=function(){return(e._sqlite3changegroup_output=e.asm.sqlite3changegroup_output).apply(null,arguments)},e._sqlite3changegroup_add_strm=function(){return(e._sqlite3changegroup_add_strm=e.asm.sqlite3changegroup_add_strm).apply(null,arguments)},e._sqlite3changegroup_output_strm=function(){return(e._sqlite3changegroup_output_strm=e.asm.sqlite3changegroup_output_strm).apply(null,arguments)},e._sqlite3changegroup_delete=function(){return(e._sqlite3changegroup_delete=e.asm.sqlite3changegroup_delete).apply(null,arguments)},e._sqlite3changeset_concat=function(){return(e._sqlite3changeset_concat=e.asm.sqlite3changeset_concat).apply(null,arguments)},e._sqlite3changeset_concat_strm=function(){return(e._sqlite3changeset_concat_strm=e.asm.sqlite3changeset_concat_strm).apply(null,arguments)},e._sqlite3session_config=function(){return(e._sqlite3session_config=e.asm.sqlite3session_config).apply(null,arguments)},e._sqlite3_sourceid=function(){return(e._sqlite3_sourceid=e.asm.sqlite3_sourceid).apply(null,arguments)},e._sqlite3__wasm_pstack_ptr=function(){return(e._sqlite3__wasm_pstack_ptr=e.asm.sqlite3__wasm_pstack_ptr).apply(null,arguments)},e._sqlite3__wasm_pstack_restore=function(){return(e._sqlite3__wasm_pstack_restore=e.asm.sqlite3__wasm_pstack_restore).apply(null,arguments)},e._sqlite3__wasm_pstack_alloc=function(){return(e._sqlite3__wasm_pstack_alloc=e.asm.sqlite3__wasm_pstack_alloc).apply(null,arguments)},e._sqlite3__wasm_pstack_remaining=function(){return(e._sqlite3__wasm_pstack_remaining=e.asm.sqlite3__wasm_pstack_remaining).apply(null,arguments)},e._sqlite3__wasm_pstack_quota=function(){return(e._sqlite3__wasm_pstack_quota=e.asm.sqlite3__wasm_pstack_quota).apply(null,arguments)},e._sqlite3__wasm_db_error=function(){return(e._sqlite3__wasm_db_error=e.asm.sqlite3__wasm_db_error).apply(null,arguments)},e._sqlite3__wasm_test_struct=function(){return(e._sqlite3__wasm_test_struct=e.asm.sqlite3__wasm_test_struct).apply(null,arguments)},e._sqlite3__wasm_enum_json=function(){return(e._sqlite3__wasm_enum_json=e.asm.sqlite3__wasm_enum_json).apply(null,arguments)},e._sqlite3__wasm_vfs_unlink=function(){return(e._sqlite3__wasm_vfs_unlink=e.asm.sqlite3__wasm_vfs_unlink).apply(null,arguments)},e._sqlite3__wasm_db_vfs=function(){return(e._sqlite3__wasm_db_vfs=e.asm.sqlite3__wasm_db_vfs).apply(null,arguments)},e._sqlite3__wasm_db_reset=function(){return(e._sqlite3__wasm_db_reset=e.asm.sqlite3__wasm_db_reset).apply(null,arguments)},e._sqlite3__wasm_db_export_chunked=function(){return(e._sqlite3__wasm_db_export_chunked=e.asm.sqlite3__wasm_db_export_chunked).apply(null,arguments)},e._sqlite3__wasm_db_serialize=function(){return(e._sqlite3__wasm_db_serialize=e.asm.sqlite3__wasm_db_serialize).apply(null,arguments)},e._sqlite3__wasm_vfs_create_file=function(){return(e._sqlite3__wasm_vfs_create_file=e.asm.sqlite3__wasm_vfs_create_file).apply(null,arguments)},e._sqlite3__wasm_posix_create_file=function(){return(e._sqlite3__wasm_posix_create_file=e.asm.sqlite3__wasm_posix_create_file).apply(null,arguments)},e._sqlite3__wasm_kvvfsMakeKeyOnPstack=function(){return(e._sqlite3__wasm_kvvfsMakeKeyOnPstack=e.asm.sqlite3__wasm_kvvfsMakeKeyOnPstack).apply(null,arguments)},e._sqlite3__wasm_kvvfs_methods=function(){return(e._sqlite3__wasm_kvvfs_methods=e.asm.sqlite3__wasm_kvvfs_methods).apply(null,arguments)},e._sqlite3__wasm_vtab_config=function(){return(e._sqlite3__wasm_vtab_config=e.asm.sqlite3__wasm_vtab_config).apply(null,arguments)},e._sqlite3__wasm_db_config_ip=function(){return(e._sqlite3__wasm_db_config_ip=e.asm.sqlite3__wasm_db_config_ip).apply(null,arguments)},e._sqlite3__wasm_db_config_pii=function(){return(e._sqlite3__wasm_db_config_pii=e.asm.sqlite3__wasm_db_config_pii).apply(null,arguments)},e._sqlite3__wasm_db_config_s=function(){return(e._sqlite3__wasm_db_config_s=e.asm.sqlite3__wasm_db_config_s).apply(null,arguments)},e._sqlite3__wasm_config_i=function(){return(e._sqlite3__wasm_config_i=e.asm.sqlite3__wasm_config_i).apply(null,arguments)},e._sqlite3__wasm_config_ii=function(){return(e._sqlite3__wasm_config_ii=e.asm.sqlite3__wasm_config_ii).apply(null,arguments)},e._sqlite3__wasm_config_j=function(){return(e._sqlite3__wasm_config_j=e.asm.sqlite3__wasm_config_j).apply(null,arguments)},e._sqlite3__wasm_qfmt_token=function(){return(e._sqlite3__wasm_qfmt_token=e.asm.sqlite3__wasm_qfmt_token).apply(null,arguments)},e._sqlite3__wasm_init_wasmfs=function(){return(e._sqlite3__wasm_init_wasmfs=e.asm.sqlite3__wasm_init_wasmfs).apply(null,arguments)},e._sqlite3__wasm_test_intptr=function(){return(e._sqlite3__wasm_test_intptr=e.asm.sqlite3__wasm_test_intptr).apply(null,arguments)},e._sqlite3__wasm_test_voidptr=function(){return(e._sqlite3__wasm_test_voidptr=e.asm.sqlite3__wasm_test_voidptr).apply(null,arguments)},e._sqlite3__wasm_test_int64_max=function(){return(e._sqlite3__wasm_test_int64_max=e.asm.sqlite3__wasm_test_int64_max).apply(null,arguments)},e._sqlite3__wasm_test_int64_min=function(){return(e._sqlite3__wasm_test_int64_min=e.asm.sqlite3__wasm_test_int64_min).apply(null,arguments)},e._sqlite3__wasm_test_int64_times2=function(){return(e._sqlite3__wasm_test_int64_times2=e.asm.sqlite3__wasm_test_int64_times2).apply(null,arguments)},e._sqlite3__wasm_test_int64_minmax=function(){return(e._sqlite3__wasm_test_int64_minmax=e.asm.sqlite3__wasm_test_int64_minmax).apply(null,arguments)},e._sqlite3__wasm_test_int64ptr=function(){return(e._sqlite3__wasm_test_int64ptr=e.asm.sqlite3__wasm_test_int64ptr).apply(null,arguments)},e._sqlite3__wasm_test_stack_overflow=function(){return(e._sqlite3__wasm_test_stack_overflow=e.asm.sqlite3__wasm_test_stack_overflow).apply(null,arguments)},e._sqlite3__wasm_test_str_hello=function(){return(e._sqlite3__wasm_test_str_hello=e.asm.sqlite3__wasm_test_str_hello).apply(null,arguments)},e._sqlite3__wasm_SQLTester_strglob=function(){return(e._sqlite3__wasm_SQLTester_strglob=e.asm.sqlite3__wasm_SQLTester_strglob).apply(null,arguments)};var on=e._malloc=function(){return(on=e._malloc=e.asm.malloc).apply(null,arguments)};e._free=function(){return(e._free=e.asm.free).apply(null,arguments)},e._realloc=function(){return(e._realloc=e.asm.realloc).apply(null,arguments)};var an=e._emscripten_builtin_memalign=function(){return(an=e._emscripten_builtin_memalign=e.asm.emscripten_builtin_memalign).apply(null,arguments)};e.stackSave=function(){return(e.stackSave=e.asm.stackSave).apply(null,arguments)},e.stackRestore=function(){return(e.stackRestore=e.asm.stackRestore).apply(null,arguments)},e.stackAlloc=function(){return(e.stackAlloc=e.asm.stackAlloc).apply(null,arguments)},e.wasmMemory=He;var Et;ct=function n(){Et||ln(),Et||(ct=n)};function ln(n){if(rt>0||(In(),rt>0))return;function t(){Et||(Et=!0,e.calledRun=!0,!ht&&(kn(),$(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),Tn()))}e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),t()},1)):t()}if(e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return ln(),e.postRun||(e.postRun=[]),e.postRun.push(function(n){if(globalThis.sqlite3ApiBootstrap=function t(s=globalThis.sqlite3ApiConfig||t.defaultConfig){if(t.sqlite3)return(t.sqlite3.config||console).warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),t.sqlite3;const r=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:typeof n<"u"&&n.HEAPU64?!0:!!globalThis.BigInt64Array,debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},s||{});Object.assign(r,{allocExportName:r.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:r.useStdAlloc?"free":"sqlite3_free",reallocExportName:r.useStdAlloc?"realloc":"sqlite3_realloc"},r),["exports","memory","wasmfsOpfsDir"].forEach(l=>{typeof r[l]=="function"&&(r[l]=r[l]())}),delete globalThis.sqlite3ApiConfig,delete t.defaultConfig;const i=Object.create(null),a=Object.create(null),d=l=>i.sqlite3_js_rc_str&&i.sqlite3_js_rc_str(l)||"Unknown result code #"+l,g=l=>typeof l=="number"&&l===(l|0);class P extends Error{constructor(...u){let y;if(u.length)if(g(u[0]))if(y=u[0],u.length===1)super(d(u[0]));else{const b=d(y);typeof u[1]=="object"?super(b,u[1]):(u[0]=b+":",super(u.join(" ")))}else u.length===2&&typeof u[1]=="object"?super(...u):super(u.join(" "));this.resultCode=y||i.SQLITE_ERROR,this.name="SQLite3Error"}}P.toss=(...l)=>{throw new P(...l)};const L=P.toss;r.wasmfsOpfsDir&&!/^\/[^/]+$/.test(r.wasmfsOpfsDir)&&L("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");const z=l=>typeof l!="bigint"&&l===(l|0)&&l<=2147483647&&l>=-2147483648,G=function l(u){return l._max||(l._max=BigInt("0x7fffffffffffffff"),l._min=~l._max),u>=l._min&&u<=l._max},I=l=>l>=-0x7fffffffn-1n&&l<=0x7fffffffn,A=function l(u){return l._min||(l._min=Number.MIN_SAFE_INTEGER,l._max=Number.MAX_SAFE_INTEGER),u>=l._min&&u<=l._max},M=l=>l&&l.constructor&&z(l.constructor.BYTES_PER_ELEMENT)?l:!1,q=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,E=l=>l.buffer instanceof q,T=(l,u,y)=>E(l)?l.slice(u,y):l.subarray(u,y),O=l=>l&&(l instanceof Uint8Array||l instanceof Int8Array||l instanceof ArrayBuffer),R=l=>l&&(l instanceof Uint8Array||l instanceof Int8Array||l instanceof ArrayBuffer),x=l=>O(l)||L("Value is not of a supported TypedArray type."),j=new TextDecoder("utf-8"),V=function(l,u,y){return j.decode(T(l,u,y))},c=function(l){return R(l)?V(l instanceof ArrayBuffer?new Uint8Array(l):l):Array.isArray(l)?l.join(""):(a.isPtr(l)&&(l=a.cstrToJs(l)),l)};class m extends Error{constructor(...u){u.length===2&&typeof u[1]=="object"?super(...u):u.length?super(u.join(" ")):super("Allocation failed."),this.resultCode=i.SQLITE_NOMEM,this.name="WasmAllocError"}}m.toss=(...l)=>{throw new m(...l)},Object.assign(i,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(l,u,y,b,W,Z,se,fe,ie)=>{},sqlite3_create_function:(l,u,y,b,W,Z,se,fe)=>{},sqlite3_create_window_function:(l,u,y,b,W,Z,se,fe,ie,ae)=>{},sqlite3_prepare_v3:(l,u,y,b,W,Z)=>{},sqlite3_prepare_v2:(l,u,y,b,W)=>{},sqlite3_exec:(l,u,y,b,W)=>{},sqlite3_randomness:(l,u)=>{}});const w={affirmBindableTypedArray:x,flexibleString:c,bigIntFits32:I,bigIntFits64:G,bigIntFitsDouble:A,isBindableTypedArray:O,isInt32:z,isSQLableTypedArray:R,isTypedArray:M,typedArrayToString:V,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:E,toss:function(...l){throw new Error(l.join(" "))},toss3:L,typedArrayPart:T,affirmDbHeader:function(l){l instanceof ArrayBuffer&&(l=new Uint8Array(l));const u="SQLite format 3";u.length>l.byteLength&&L("Input does not contain an SQLite3 database header.");for(let y=0;y<u.length;++y)u.charCodeAt(y)!==l[y]&&L("Input does not contain an SQLite3 database header.")},affirmIsDb:function(l){l instanceof ArrayBuffer&&(l=new Uint8Array(l));const u=l.byteLength;(u<512||u%512!==0)&&L("Byte array size",u,"is invalid for an SQLite3 db."),w.affirmDbHeader(l)}};Object.assign(a,{ptrSizeof:r.wasmPtrSizeof||4,ptrIR:r.wasmPtrIR||"i32",bigIntEnabled:!!r.bigIntEnabled,exports:r.exports||L("Missing API config.exports (WASM module exports)."),memory:r.memory||r.exports.memory||L("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0}),a.allocFromTypedArray=function(l){l instanceof ArrayBuffer&&(l=new Uint8Array(l)),x(l);const u=a.alloc(l.byteLength||1);return a.heapForSize(l.constructor).set(l.byteLength?l:[0],u),u};{const l=r.allocExportName,u=r.deallocExportName,y=r.reallocExportName;for(const b of[l,u,y])a.exports[b]instanceof Function||L("Missing required exports[",b,"] function.");a.alloc=function b(W){return b.impl(W)||m.toss("Failed to allocate",W," bytes.")},a.alloc.impl=a.exports[l],a.realloc=function b(W,Z){const se=b.impl(W,Z);return Z?se||m.toss("Failed to reallocate",Z," bytes."):0},a.realloc.impl=a.exports[y],a.dealloc=a.exports[u]}a.compileOptionUsed=function l(u){if(arguments.length){if(Array.isArray(u)){const y={};return u.forEach(b=>{y[b]=i.sqlite3_compileoption_used(b)}),y}else if(typeof u=="object")return Object.keys(u).forEach(y=>{u[y]=i.sqlite3_compileoption_used(y)}),u}else{if(l._result)return l._result;l._opt||(l._rx=/^([^=]+)=(.+)/,l._rxInt=/^-?\d+$/,l._opt=function(se,fe){const ie=l._rx.exec(se);fe[0]=ie?ie[1]:se,fe[1]=ie?l._rxInt.test(ie[2])?+ie[2]:ie[2]:!0});const y={},b=[0,0];let W=0,Z;for(;Z=i.sqlite3_compileoption_get(W++);)l._opt(Z,b),y[b[0]]=b[1];return l._result=y}return typeof u=="string"?!!i.sqlite3_compileoption_used(u):!1},a.pstack=Object.assign(Object.create(null),{restore:a.exports.sqlite3__wasm_pstack_restore,alloc:function(l){return typeof l=="string"&&!(l=a.sizeofIR(l))&&m.toss("Invalid value for pstack.alloc(",arguments[0],")"),a.exports.sqlite3__wasm_pstack_alloc(l)||m.toss("Could not allocate",l,"bytes from the pstack.")},allocChunks:function(l,u){typeof u=="string"&&!(u=a.sizeofIR(u))&&m.toss("Invalid size value for allocChunks(",arguments[1],")");const y=a.pstack.alloc(l*u),b=[];let W=0,Z=0;for(;W<l;++W,Z+=u)b.push(y+Z);return b},allocPtr:(l=1,u=!0)=>l===1?a.pstack.alloc(u?8:a.ptrSizeof):a.pstack.allocChunks(l,u?8:a.ptrSizeof),call:function(l){const u=a.pstack.pointer;try{return l(h)}finally{a.pstack.restore(u)}}}),Object.defineProperties(a.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:a.exports.sqlite3__wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:a.exports.sqlite3__wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:a.exports.sqlite3__wasm_pstack_remaining}}),i.sqlite3_randomness=(...l)=>{if(l.length===1&&w.isTypedArray(l[0])&&l[0].BYTES_PER_ELEMENT===1){const u=l[0];if(u.byteLength===0)return a.exports.sqlite3_randomness(0,0),u;const y=a.pstack.pointer;try{let b=u.byteLength,W=0;const Z=a.exports.sqlite3_randomness,se=a.heap8u(),fe=b<512?b:512,ie=a.pstack.alloc(fe);do{const ae=b>fe?fe:b;Z(ae,ie),u.set(T(se,ie,ie+ae),W),b-=ae,W+=ae}while(b>0)}catch(b){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",b)}finally{a.pstack.restore(y)}return u}a.exports.sqlite3_randomness(...l)};let Q;if(i.sqlite3_wasmfs_opfs_dir=function(){if(Q!==void 0)return Q;const l=r.wasmfsOpfsDir;if(!l||!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle)return Q="";try{return l&&a.xCallWrapped("sqlite3__wasm_init_wasmfs","i32",["string"],l)===0?Q=l:Q=""}catch{return Q=""}},i.sqlite3_wasmfs_filename_is_persistent=function(l){const u=i.sqlite3_wasmfs_opfs_dir();return u&&l?l.startsWith(u+"/"):!1},i.sqlite3_js_db_uses_vfs=function(l,u,y=0){try{const b=i.sqlite3_vfs_find(u);return b?l?b===i.sqlite3_js_db_vfs(l,y)?b:!1:b===i.sqlite3_vfs_find(0)?b:!1:!1}catch{return!1}},i.sqlite3_js_vfs_list=function(){const l=[];let u=i.sqlite3_vfs_find(0);for(;u;){const y=new i.sqlite3_vfs(u);l.push(a.cstrToJs(y.$zName)),u=y.$pNext,y.dispose()}return l},i.sqlite3_js_db_export=function(l,u=0){l=a.xWrap.testConvertArg("sqlite3*",l),l||L("Invalid sqlite3* argument."),a.bigIntEnabled||L("BigInt64 support is not enabled.");const y=a.scopedAllocPush();let b;try{const W=a.scopedAlloc(8+a.ptrSizeof),Z=W+8,se=u?a.isPtr(u)?u:a.scopedAllocCString(""+u):0;let fe=a.exports.sqlite3__wasm_db_serialize(l,se,Z,W,0);fe&&L("Database serialization failed with code",h.capi.sqlite3_js_rc_str(fe)),b=a.peekPtr(Z);const ie=a.peek(W,"i64");return fe=ie?a.heap8u().slice(b,b+Number(ie)):new Uint8Array,fe}finally{b&&a.exports.sqlite3_free(b),a.scopedAllocPop(y)}},i.sqlite3_js_db_vfs=(l,u=0)=>w.sqlite3__wasm_db_vfs(l,u),i.sqlite3_js_aggregate_context=(l,u)=>i.sqlite3_aggregate_context(l,u)||(u?m.toss("Cannot allocate",u,"bytes for sqlite3_aggregate_context()"):0),i.sqlite3_js_posix_create_file=function(l,u,y){let b;u&&a.isPtr(u)?b=u:u instanceof ArrayBuffer||u instanceof Uint8Array?(b=a.allocFromTypedArray(u),(arguments.length<3||!w.isInt32(y)||y<0)&&(y=u.byteLength)):P.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!w.isInt32(y)||y<0)&&P.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");const W=w.sqlite3__wasm_posix_create_file(l,b,y);W&&P.toss("Creation of file failed with sqlite3 result code",i.sqlite3_js_rc_str(W))}finally{a.dealloc(b)}},i.sqlite3_js_vfs_create_file=function(l,u,y,b){r.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options.");let W;y?(a.isPtr(y)?W=y:y instanceof ArrayBuffer&&(y=new Uint8Array(y)),y instanceof Uint8Array?(W=a.allocFromTypedArray(y),(arguments.length<4||!w.isInt32(b)||b<0)&&(b=y.byteLength)):P.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):W=0,(!w.isInt32(b)||b<0)&&(a.dealloc(W),P.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{const Z=w.sqlite3__wasm_vfs_create_file(l,u,W,b);Z&&P.toss("Creation of file failed with sqlite3 result code",i.sqlite3_js_rc_str(Z))}finally{a.dealloc(W)}},i.sqlite3_js_sql_to_string=l=>{if(typeof l=="string")return l;const u=c(v);return u===v?void 0:u},w.isUIThread()){const l=function(u){const y=Object.create(null);return y.prefix="kvvfs-"+u,y.stores=[],(u==="session"||u==="")&&y.stores.push(globalThis.sessionStorage),(u==="local"||u==="")&&y.stores.push(globalThis.localStorage),y};i.sqlite3_js_kvvfs_clear=function(u=""){let y=0;const b=l(u);return b.stores.forEach(W=>{const Z=[];let se;for(se=0;se<W.length;++se){const fe=W.key(se);fe.startsWith(b.prefix)&&Z.push(fe)}Z.forEach(fe=>W.removeItem(fe)),y+=Z.length}),y},i.sqlite3_js_kvvfs_size=function(u=""){let y=0;const b=l(u);return b.stores.forEach(W=>{let Z;for(Z=0;Z<W.length;++Z){const se=W.key(Z);se.startsWith(b.prefix)&&(y+=se.length,y+=W.getItem(se).length)}}),y*2}}i.sqlite3_db_config=(function(l,u,...y){switch(this.s||(this.s=a.xWrap("sqlite3__wasm_db_config_s","int",["sqlite3*","int","string:static"]),this.pii=a.xWrap("sqlite3__wasm_db_config_pii","int",["sqlite3*","int","*","int","int"]),this.ip=a.xWrap("sqlite3__wasm_db_config_ip","int",["sqlite3*","int","int","*"])),u){case i.SQLITE_DBCONFIG_ENABLE_FKEY:case i.SQLITE_DBCONFIG_ENABLE_TRIGGER:case i.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case i.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case i.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case i.SQLITE_DBCONFIG_ENABLE_QPSG:case i.SQLITE_DBCONFIG_TRIGGER_EQP:case i.SQLITE_DBCONFIG_RESET_DATABASE:case i.SQLITE_DBCONFIG_DEFENSIVE:case i.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case i.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case i.SQLITE_DBCONFIG_DQS_DML:case i.SQLITE_DBCONFIG_DQS_DDL:case i.SQLITE_DBCONFIG_ENABLE_VIEW:case i.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case i.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case i.SQLITE_DBCONFIG_STMT_SCANSTATUS:case i.SQLITE_DBCONFIG_REVERSE_SCANORDER:return this.ip(l,u,y[0],y[1]||0);case i.SQLITE_DBCONFIG_LOOKASIDE:return this.pii(l,u,y[0],y[1],y[2]);case i.SQLITE_DBCONFIG_MAINDBNAME:return this.s(l,u,y[0]);default:return i.SQLITE_MISUSE}}).bind(Object.create(null)),i.sqlite3_value_to_js=function(l,u=!0){let y;const b=i.sqlite3_value_type(l);switch(b){case i.SQLITE_INTEGER:a.bigIntEnabled?(y=i.sqlite3_value_int64(l),w.bigIntFitsDouble(y)&&(y=Number(y))):y=i.sqlite3_value_double(l);break;case i.SQLITE_FLOAT:y=i.sqlite3_value_double(l);break;case i.SQLITE_TEXT:y=i.sqlite3_value_text(l);break;case i.SQLITE_BLOB:{const W=i.sqlite3_value_bytes(l),Z=i.sqlite3_value_blob(l);W&&!Z&&h.WasmAllocError.toss("Cannot allocate memory for blob argument of",W,"byte(s)"),y=W?a.heap8u().slice(Z,Z+Number(W)):null;break}case i.SQLITE_NULL:y=null;break;default:u&&L(i.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",b),y=void 0}return y},i.sqlite3_values_to_js=function(l,u,y=!0){let b;const W=[];for(b=0;b<l;++b)W.push(i.sqlite3_value_to_js(a.peekPtr(u+a.ptrSizeof*b),y));return W},i.sqlite3_result_error_js=function(l,u){u instanceof m?i.sqlite3_result_error_nomem(l):i.sqlite3_result_error(l,""+u,-1)},i.sqlite3_result_js=function(l,u){if(u instanceof Error){i.sqlite3_result_error_js(l,u);return}try{switch(typeof u){case"undefined":break;case"boolean":i.sqlite3_result_int(l,u?1:0);break;case"bigint":w.bigIntFits32(u)?i.sqlite3_result_int(l,Number(u)):w.bigIntFitsDouble(u)?i.sqlite3_result_double(l,Number(u)):a.bigIntEnabled?w.bigIntFits64(u)?i.sqlite3_result_int64(l,u):L("BigInt value",u.toString(),"is too BigInt for int64."):L("BigInt value",u.toString(),"is too BigInt.");break;case"number":{let y;w.isInt32(u)?y=i.sqlite3_result_int:a.bigIntEnabled&&Number.isInteger(u)&&w.bigIntFits64(BigInt(u))?y=i.sqlite3_result_int64:y=i.sqlite3_result_double,y(l,u);break}case"string":{const[y,b]=a.allocCString(u,!0);i.sqlite3_result_text(l,y,b,i.SQLITE_WASM_DEALLOC);break}case"object":if(u===null){i.sqlite3_result_null(l);break}else if(w.isBindableTypedArray(u)){const y=a.allocFromTypedArray(u);i.sqlite3_result_blob(l,y,u.byteLength,i.SQLITE_WASM_DEALLOC);break}default:L("Don't not how to handle this UDF result value:",typeof u,u)}}catch(y){i.sqlite3_result_error_js(l,y)}},i.sqlite3_column_js=function(l,u,y=!0){const b=i.sqlite3_column_value(l,u);return b===0?void 0:i.sqlite3_value_to_js(b,y)};const _=(function(l,u,y){y=i[y],this.ptr?a.pokePtr(this.ptr,0):this.ptr=a.allocPtr();const b=y(l,u,this.ptr);if(b)return P.toss(b,arguments[2]+"() failed with code "+b);const W=a.peekPtr(this.ptr);return W?i.sqlite3_value_to_js(W,!0):void 0}).bind(Object.create(null));i.sqlite3_preupdate_new_js=(l,u)=>_(l,u,"sqlite3_preupdate_new"),i.sqlite3_preupdate_old_js=(l,u)=>_(l,u,"sqlite3_preupdate_old"),i.sqlite3changeset_new_js=(l,u)=>_(l,u,"sqlite3changeset_new"),i.sqlite3changeset_old_js=(l,u)=>_(l,u,"sqlite3changeset_old");const h={WasmAllocError:m,SQLite3Error:P,capi:i,util:w,wasm:a,config:r,version:Object.create(null),client:void 0,asyncPostInit:async function l(){if(l.isReady instanceof Promise)return l.isReady;let u=t.initializersAsync;delete t.initializersAsync;const y=async()=>(h.__isUnderTest||(delete h.util,delete h.StructBinder),h),b=Z=>{throw r.error("an async sqlite3 initializer failed:",Z),Z};if(!u||!u.length)return l.isReady=y().catch(b);u=u.map(Z=>Z instanceof Function?async se=>Z(h):Z),u.push(y);let W=Promise.resolve(h);for(;u.length;)W=W.then(u.shift());return l.isReady=W.catch(b)},scriptInfo:void 0};try{t.initializers.forEach(l=>{l(h)})}catch(l){throw console.error("sqlite3 bootstrap initializer threw:",l),l}return delete t.initializers,t.sqlite3=h,h},globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(t){t.bigIntEnabled===void 0&&(t.bigIntEnabled=!!globalThis.BigInt64Array);const s=(...c)=>{throw new Error(c.join(" "))};t.exports||Object.defineProperty(t,"exports",{enumerable:!0,configurable:!0,get:()=>t.instance&&t.instance.exports});const r=t.pointerIR||"i32",i=t.ptrSizeof=r==="i32"?4:r==="i64"?8:s("Unhandled ptrSizeof:",r),a=Object.create(null);a.heapSize=0,a.memory=null,a.freeFuncIndexes=[],a.scopedAlloc=[],a.utf8Decoder=new TextDecoder,a.utf8Encoder=new TextEncoder("utf-8"),t.sizeofIR=c=>{switch(c){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return i;default:return(""+c).endsWith("*")?i:void 0}};const d=function(){if(!a.memory)a.memory=t.memory instanceof WebAssembly.Memory?t.memory:t.exports.memory;else if(a.heapSize===a.memory.buffer.byteLength)return a;const c=a.memory.buffer;return a.HEAP8=new Int8Array(c),a.HEAP8U=new Uint8Array(c),a.HEAP16=new Int16Array(c),a.HEAP16U=new Uint16Array(c),a.HEAP32=new Int32Array(c),a.HEAP32U=new Uint32Array(c),t.bigIntEnabled&&(a.HEAP64=new BigInt64Array(c),a.HEAP64U=new BigUint64Array(c)),a.HEAP32F=new Float32Array(c),a.HEAP64F=new Float64Array(c),a.heapSize=c.byteLength,a};t.heap8=()=>d().HEAP8,t.heap8u=()=>d().HEAP8U,t.heap16=()=>d().HEAP16,t.heap16u=()=>d().HEAP16U,t.heap32=()=>d().HEAP32,t.heap32u=()=>d().HEAP32U,t.heapForSize=function(c,m=!0){const w=a.memory&&a.heapSize===a.memory.buffer.byteLength?a:d();switch(c){case Int8Array:return w.HEAP8;case Uint8Array:return w.HEAP8U;case Int16Array:return w.HEAP16;case Uint16Array:return w.HEAP16U;case Int32Array:return w.HEAP32;case Uint32Array:return w.HEAP32U;case 8:return m?w.HEAP8U:w.HEAP8;case 16:return m?w.HEAP16U:w.HEAP16;case 32:return m?w.HEAP32U:w.HEAP32;case 64:if(w.HEAP64)return m?w.HEAP64U:w.HEAP64;break;default:if(t.bigIntEnabled){if(c===globalThis.BigUint64Array)return w.HEAP64U;if(c===globalThis.BigInt64Array)return w.HEAP64;break}}s("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")},t.functionTable=function(){return t.exports.__indirect_function_table},t.functionEntry=function(c){const m=t.functionTable();return c<m.length?m.get(c):void 0},t.jsFuncToWasm=function c(m,w){if(c._||(c._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(h,l,u){u<128?h[l](u):h[l](u%128|128,u>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(h){const l=c._.rxJSig.exec(h);return l?l[2]:h.substr(1)},letterType:h=>c._.sigTypes[h]||s("Invalid signature letter:",h),pushSigType:(h,l)=>h.push(c._.typeCodes[c._.letterType(l)])}),typeof m=="string"){const h=w;w=m,m=h}const Q=c._.sigParams(w),_=[1,96];c._.uleb128Encode(_,"push",Q.length);for(const h of Q)c._.pushSigType(_,h);return w[0]==="v"?_.push(0):(_.push(1),c._.pushSigType(_,w[0])),c._.uleb128Encode(_,"unshift",_.length),_.unshift(0,97,115,109,1,0,0,0,1),_.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(_)),{e:{f:m}}).exports.f};const g=function(m,w,Q){if(Q&&!a.scopedAlloc.length&&s("No scopedAllocPush() scope is active."),typeof m=="string"){const u=w;w=m,m=u}(typeof w!="string"||!(m instanceof Function))&&s("Invalid arguments: expecting (function,signature) or (signature,function).");const _=t.functionTable(),h=_.length;let l;for(;a.freeFuncIndexes.length&&(l=a.freeFuncIndexes.pop(),_.get(l));){l=null;continue}l||(l=h,_.grow(1));try{return _.set(l,m),Q&&a.scopedAlloc[a.scopedAlloc.length-1].push(l),l}catch(u){if(!(u instanceof TypeError))throw l===h&&a.freeFuncIndexes.push(h),u}try{const u=t.jsFuncToWasm(m,w);_.set(l,u),Q&&a.scopedAlloc[a.scopedAlloc.length-1].push(l)}catch(u){throw l===h&&a.freeFuncIndexes.push(h),u}return l};t.installFunction=(c,m)=>g(c,m,!1),t.scopedInstallFunction=(c,m)=>g(c,m,!0),t.uninstallFunction=function(c){if(!c&&c!==0)return;const m=a.freeFuncIndexes,w=t.functionTable();m.push(c);const Q=w.get(c);return w.set(c,null),Q},t.peek=function(m,w="i8"){w.endsWith("*")&&(w=r);const Q=a.memory&&a.heapSize===a.memory.buffer.byteLength?a:d(),_=Array.isArray(m)?[]:void 0;let h;do{switch(_&&(m=arguments[0].shift()),w){case"i1":case"i8":h=Q.HEAP8[m>>0];break;case"i16":h=Q.HEAP16[m>>1];break;case"i32":h=Q.HEAP32[m>>2];break;case"float":case"f32":h=Q.HEAP32F[m>>2];break;case"double":case"f64":h=Number(Q.HEAP64F[m>>3]);break;case"i64":if(t.bigIntEnabled){h=BigInt(Q.HEAP64[m>>3]);break}default:s("Invalid type for peek():",w)}_&&_.push(h)}while(_&&arguments[0].length);return _||h},t.poke=function(c,m,w="i8"){w.endsWith("*")&&(w=r);const Q=a.memory&&a.heapSize===a.memory.buffer.byteLength?a:d();for(const _ of Array.isArray(c)?c:[c])switch(w){case"i1":case"i8":Q.HEAP8[_>>0]=m;continue;case"i16":Q.HEAP16[_>>1]=m;continue;case"i32":Q.HEAP32[_>>2]=m;continue;case"float":case"f32":Q.HEAP32F[_>>2]=m;continue;case"double":case"f64":Q.HEAP64F[_>>3]=m;continue;case"i64":if(Q.HEAP64){Q.HEAP64[_>>3]=BigInt(m);continue}default:s("Invalid type for poke(): "+w)}return this},t.peekPtr=(...c)=>t.peek(c.length===1?c[0]:c,r),t.pokePtr=(c,m=0)=>t.poke(c,m,r),t.peek8=(...c)=>t.peek(c.length===1?c[0]:c,"i8"),t.poke8=(c,m)=>t.poke(c,m,"i8"),t.peek16=(...c)=>t.peek(c.length===1?c[0]:c,"i16"),t.poke16=(c,m)=>t.poke(c,m,"i16"),t.peek32=(...c)=>t.peek(c.length===1?c[0]:c,"i32"),t.poke32=(c,m)=>t.poke(c,m,"i32"),t.peek64=(...c)=>t.peek(c.length===1?c[0]:c,"i64"),t.poke64=(c,m)=>t.poke(c,m,"i64"),t.peek32f=(...c)=>t.peek(c.length===1?c[0]:c,"f32"),t.poke32f=(c,m)=>t.poke(c,m,"f32"),t.peek64f=(...c)=>t.peek(c.length===1?c[0]:c,"f64"),t.poke64f=(c,m)=>t.poke(c,m,"f64"),t.getMemValue=t.peek,t.getPtrValue=t.peekPtr,t.setMemValue=t.poke,t.setPtrValue=t.pokePtr,t.isPtr32=c=>typeof c=="number"&&c===(c|0)&&c>=0,t.isPtr=t.isPtr32,t.cstrlen=function(c){if(!c||!t.isPtr(c))return null;const m=d().HEAP8U;let w=c;for(;m[w]!==0;++w);return w-c};const P=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,L=function(c,m,w){return a.utf8Decoder.decode(c.buffer instanceof P?c.slice(m,w):c.subarray(m,w))};t.cstrToJs=function(c){const m=t.cstrlen(c);return m?L(d().HEAP8U,c,c+m):m===null?m:""},t.jstrlen=function(c){if(typeof c!="string")return null;const m=c.length;let w=0;for(let Q=0;Q<m;++Q){let _=c.charCodeAt(Q);_>=55296&&_<=57343&&(_=65536+((_&1023)<<10)|c.charCodeAt(++Q)&1023),_<=127?++w:_<=2047?w+=2:_<=65535?w+=3:w+=4}return w},t.jstrcpy=function(c,m,w=0,Q=-1,_=!0){if((!m||!(m instanceof Int8Array)&&!(m instanceof Uint8Array))&&s("jstrcpy() target must be an Int8Array or Uint8Array."),Q<0&&(Q=m.length-w),!(Q>0)||!(w>=0))return 0;let h=0,l=c.length;const u=w,y=w+Q-(_?1:0);for(;h<l&&w<y;++h){let b=c.charCodeAt(h);if(b>=55296&&b<=57343&&(b=65536+((b&1023)<<10)|c.charCodeAt(++h)&1023),b<=127){if(w>=y)break;m[w++]=b}else if(b<=2047){if(w+1>=y)break;m[w++]=192|b>>6,m[w++]=128|b&63}else if(b<=65535){if(w+2>=y)break;m[w++]=224|b>>12,m[w++]=128|b>>6&63,m[w++]=128|b&63}else{if(w+3>=y)break;m[w++]=240|b>>18,m[w++]=128|b>>12&63,m[w++]=128|b>>6&63,m[w++]=128|b&63}}return _&&(m[w++]=0),w-u},t.cstrncpy=function(c,m,w){if((!c||!m)&&s("cstrncpy() does not accept NULL strings."),w<0)w=t.cstrlen(strPtr)+1;else if(!(w>0))return 0;const Q=t.heap8u();let _=0,h;for(;_<w&&(h=Q[m+_]);++_)Q[c+_]=h;return _<w&&(Q[c+_++]=0),_},t.jstrToUintArray=(c,m=!1)=>a.utf8Encoder.encode(m?c+"\0":c);const z=(c,m)=>{(!(c.alloc instanceof Function)||!(c.dealloc instanceof Function))&&s("Object is missing alloc() and/or dealloc() function(s)","required by",m+"().")},G=function(c,m,w,Q){if(z(t,Q),typeof c!="string")return null;{const _=a.utf8Encoder.encode(c),h=w(_.length+1),l=d().HEAP8U;return l.set(_,h),l[h+_.length]=0,m?[h,_.length]:h}};t.allocCString=(c,m=!1)=>G(c,m,t.alloc,"allocCString()"),t.scopedAllocPush=function(){z(t,"scopedAllocPush");const c=[];return a.scopedAlloc.push(c),c},t.scopedAllocPop=function(c){z(t,"scopedAllocPop");const m=arguments.length?a.scopedAlloc.indexOf(c):a.scopedAlloc.length-1;m<0&&s("Invalid state object for scopedAllocPop()."),arguments.length===0&&(c=a.scopedAlloc[m]),a.scopedAlloc.splice(m,1);for(let w;w=c.pop();)t.functionEntry(w)?t.uninstallFunction(w):t.dealloc(w)},t.scopedAlloc=function(c){a.scopedAlloc.length||s("No scopedAllocPush() scope is active.");const m=t.alloc(c);return a.scopedAlloc[a.scopedAlloc.length-1].push(m),m},Object.defineProperty(t.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>a.scopedAlloc.length,set:()=>s("The 'active' property is read-only.")}),t.scopedAllocCString=(c,m=!1)=>G(c,m,t.scopedAlloc,"scopedAllocCString()");const I=function(c,m){const w=t[c?"scopedAlloc":"alloc"]((m.length+1)*t.ptrSizeof);let Q=0;return m.forEach(_=>{t.pokePtr(w+t.ptrSizeof*Q++,t[c?"scopedAllocCString":"allocCString"](""+_))}),t.pokePtr(w+t.ptrSizeof*Q,0),w};t.scopedAllocMainArgv=c=>I(!0,c),t.allocMainArgv=c=>I(!1,c),t.cArgvToJs=(c,m)=>{const w=[];for(let Q=0;Q<c;++Q){const _=t.peekPtr(m+t.ptrSizeof*Q);w.push(_?t.cstrToJs(_):null)}return w},t.scopedAllocCall=function(c){t.scopedAllocPush();try{return c()}finally{t.scopedAllocPop()}};const A=function(c,m,w){z(t,w);const Q=m?"i64":r;let _=t[w](c*(m?8:i));if(t.poke(_,0,Q),c===1)return _;const h=[_];for(let l=1;l<c;++l)_+=m?8:i,h[l]=_,t.poke(_,0,Q);return h};t.allocPtr=(c=1,m=!0)=>A(c,m,"alloc"),t.scopedAllocPtr=(c=1,m=!0)=>A(c,m,"scopedAlloc"),t.xGet=function(c){return t.exports[c]||s("Cannot find exported symbol:",c)};const M=(c,m)=>s(c+"() requires",m,"argument(s).");t.xCall=function(c,...m){const w=c instanceof Function?c:t.xGet(c);return w instanceof Function||s("Exported symbol",c,"is not a function."),w.length!==m.length&&M(w===c?w.name:c,w.length),arguments.length===2&&Array.isArray(arguments[1])?w.apply(null,arguments[1]):w.apply(null,m)},a.xWrap=Object.create(null),a.xWrap.convert=Object.create(null),a.xWrap.convert.arg=new Map,a.xWrap.convert.result=new Map;const q=a.xWrap.convert.arg,E=a.xWrap.convert.result;t.bigIntEnabled&&q.set("i64",c=>BigInt(c));const T=r==="i32"?c=>c|0:c=>BigInt(c)|BigInt(0);q.set("i32",T).set("i16",c=>(c|0)&65535).set("i8",c=>(c|0)&255).set("f32",c=>Number(c).valueOf()).set("float",q.get("f32")).set("f64",q.get("f32")).set("double",q.get("f64")).set("int",q.get("i32")).set("null",c=>c).set(null,q.get("null")).set("**",T).set("*",T),E.set("*",T).set("pointer",T).set("number",c=>Number(c)).set("void",c=>{}).set("null",c=>c).set(null,E.get("null"));{const c=["i8","i16","i32","int","f32","float","f64","double"];t.bigIntEnabled&&c.push("i64");const m=q.get(r);for(const w of c)q.set(w+"*",m),E.set(w+"*",m),E.set(w,q.get(w)||s("Missing arg converter:",w))}const O=function(c){return typeof c=="string"?t.scopedAllocCString(c):c?T(c):null};q.set("string",O).set("utf8",O).set("pointer",O),E.set("string",c=>t.cstrToJs(c)).set("utf8",E.get("string")).set("string:dealloc",c=>{try{return c?t.cstrToJs(c):null}finally{t.dealloc(c)}}).set("utf8:dealloc",E.get("string:dealloc")).set("json",c=>JSON.parse(t.cstrToJs(c))).set("json:dealloc",c=>{try{return c?JSON.parse(t.cstrToJs(c)):null}finally{t.dealloc(c)}});const R=class{constructor(c){this.name=c.name||"unnamed adapter"}convertArg(c,m,w){s("AbstractArgAdapter must be subclassed.")}};q.FuncPtrAdapter=class Je extends R{constructor(m){super(m),q.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",m),this.name=m.name||"unnamed",this.signature=m.signature,m.contextKey instanceof Function&&(this.contextKey=m.contextKey,m.bindScope||(m.bindScope="context")),this.bindScope=m.bindScope||s("FuncPtrAdapter options requires a bindScope (explicit or implied)."),Je.bindScopes.indexOf(m.bindScope)<0&&s("Invalid options.bindScope ("+m.bindMod+") for FuncPtrAdapter. Expecting one of: ("+Je.bindScopes.join(", ")+")"),this.isTransient=this.bindScope==="transient",this.isContext=this.bindScope==="context",this.isPermanent=this.bindScope==="permanent",this.singleton=this.bindScope==="singleton"?[]:void 0,this.callProxy=m.callProxy instanceof Function?m.callProxy:void 0}contextKey(m,w){return this}contextMap(m){const w=this.__cmap||(this.__cmap=new Map);let Q=w.get(m);return Q===void 0&&w.set(m,Q=[]),Q}convertArg(m,w,Q){let _=this.singleton;if(!_&&this.isContext&&(_=this.contextMap(this.contextKey(w,Q))),_&&_[0]===m)return _[1];if(m instanceof Function){this.callProxy&&(m=this.callProxy(m));const h=g(m,this.signature,this.isTransient);if(Je.debugFuncInstall&&Je.debugOut("FuncPtrAdapter installed",this,this.contextKey(w,Q),"@"+h,m),_){if(_[1]){Je.debugFuncInstall&&Je.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(w,Q),"@"+_[1],m);try{a.scopedAlloc[a.scopedAlloc.length-1].push(_[1])}catch{}}_[0]=m,_[1]=h}return h}else if(t.isPtr(m)||m===null||m===void 0){if(_&&_[1]&&_[1]!==m){Je.debugFuncInstall&&Je.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(w,Q),"@"+_[1],m);try{a.scopedAlloc[a.scopedAlloc.length-1].push(_[1])}catch{}_[0]=_[1]=m|0}return m||0}else throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},q.FuncPtrAdapter.warnOnUse=!1,q.FuncPtrAdapter.debugFuncInstall=!1,q.FuncPtrAdapter.debugOut=console.debug.bind(console),q.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];const x=c=>q.get(c)||s("Argument adapter not found:",c),j=c=>E.get(c)||s("Result adapter not found:",c);a.xWrap.convertArg=(c,...m)=>x(c)(...m),a.xWrap.convertArgNoCheck=(c,...m)=>q.get(c)(...m),a.xWrap.convertResult=(c,m)=>c===null?m:c?j(c)(m):void 0,a.xWrap.convertResultNoCheck=(c,m)=>c===null?m:c?E.get(c)(m):void 0,t.xWrap=function(c,m,...w){arguments.length===3&&Array.isArray(arguments[2])&&(w=arguments[2]),t.isPtr(c)&&(c=t.functionEntry(c)||s("Function pointer not found in WASM function table."));const Q=c instanceof Function,_=Q?c:t.xGet(c);if(Q&&(c=_.name||"unnamed function"),w.length!==_.length&&M(c,_.length),m===null&&_.length===0)return _;m!=null&&j(m);for(const l of w)l instanceof R?q.set(l,(...u)=>l.convertArg(...u)):x(l);const h=a.xWrap;return _.length===0?(...l)=>l.length?M(c,_.length):h.convertResult(m,_.call(null)):function(...l){l.length!==_.length&&M(c,_.length);const u=t.scopedAllocPush();try{let y=0;for(;y<l.length;++y)l[y]=h.convertArgNoCheck(w[y],l[y],l,y);return h.convertResultNoCheck(m,_.apply(null,l))}finally{t.scopedAllocPop(u)}}};const V=function(c,m,w,Q,_,h){if(typeof w=="string"){if(m===1)return h.get(w);if(m===2){if(Q)Q instanceof Function||s(_,"requires a function argument.");else return delete h.get(w),c;return h.set(w,Q),c}}s("Invalid arguments to",_)};return t.xWrap.resultAdapter=function c(m,w){return V(c,arguments.length,m,w,"resultAdapter()",E)},t.xWrap.argAdapter=function c(m,w){return V(c,arguments.length,m,w,"argAdapter()",q)},t.xWrap.FuncPtrAdapter=q.FuncPtrAdapter,t.xCallWrapped=function(c,m,w,...Q){return Array.isArray(arguments[3])&&(Q=arguments[3]),t.xWrap(c,m,w||[]).apply(null,Q||[])},t.xWrap.testConvertArg=a.xWrap.convertArg,t.xWrap.testConvertResult=a.xWrap.convertResult,t},globalThis.WhWasmUtilInstaller.yawl=(function(t){const s=()=>fetch(t.uri,{credentials:"same-origin"}),r=this,i=function(d){if(t.wasmUtilTarget){const g=(...L)=>{throw new Error(L.join(" "))},P=t.wasmUtilTarget;if(P.module=d.module,P.instance=d.instance,P.instance.exports.memory||(P.memory=t.imports&&t.imports.env&&t.imports.env.memory||g("Missing 'memory' object!")),!P.alloc&&d.instance.exports.malloc){const L=d.instance.exports;P.alloc=function(z){return L.malloc(z)||g("Allocation of",z,"bytes failed.")},P.dealloc=function(z){L.free(z)}}r(P)}return t.onload&&t.onload(d,t),d};return WebAssembly.instantiateStreaming?function(){return WebAssembly.instantiateStreaming(s(),t.imports||{}).then(i)}:function(){return s().then(g=>g.arrayBuffer()).then(g=>WebAssembly.instantiate(g,t.imports||{})).then(i)}}).bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=function t(s){const r=(...f)=>{throw new Error(f.join(" "))};!(s.heap instanceof WebAssembly.Memory)&&!(s.heap instanceof Function)&&r("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach(function(f){s[f]instanceof Function||r("Config option '"+f+"' must be a function.")});const i=t,a=s.heap instanceof Function?s.heap:()=>new Uint8Array(s.heap.buffer),d=s.alloc,g=s.dealloc,P=s.log||console.log.bind(console),L=s.memberPrefix||"",z=s.memberSuffix||"",G=s.bigIntEnabled===void 0?!!globalThis.BigInt64Array:!!s.bigIntEnabled,I=globalThis.BigInt,A=globalThis.BigInt64Array,M=s.ptrSizeof||4,q=s.ptrIR||"i32";i.debugFlags||(i.__makeDebugFlags=function(f=null){f&&f.__flags&&(f=f.__flags);const S=function k(C){return arguments.length===0?k.__flags:(C<0?(delete k.__flags.getter,delete k.__flags.setter,delete k.__flags.alloc,delete k.__flags.dealloc):(k.__flags.getter=(1&C)!==0,k.__flags.setter=(2&C)!==0,k.__flags.alloc=(4&C)!==0,k.__flags.dealloc=(8&C)!==0),k._flags)};return Object.defineProperty(S,"__flags",{iterable:!1,writable:!1,value:Object.create(f)}),f||S(0),S},i.debugFlags=i.__makeDebugFlags());const E=function(){const f=new ArrayBuffer(2);return new DataView(f).setInt16(0,256,!0),new Int16Array(f)[0]===256}(),T=f=>f[1]==="(",O=f=>f==="P",R=f=>T(f)?"p":f[0],x=function(f){switch(R(f)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return q;case"j":return"i64";case"f":return"float";case"d":return"double"}r("Unhandled signature IR:",f)},j=A?()=>!0:()=>r("BigInt64Array is not available."),V=function(f){switch(R(f)){case"p":case"P":case"s":{switch(M){case 4:return"getInt32";case 8:return j()&&"getBigInt64"}break}case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return j()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}r("Unhandled DataView getter for signature:",f)},c=function(f){switch(R(f)){case"p":case"P":case"s":{switch(M){case 4:return"setInt32";case 8:return j()&&"setBigInt64"}break}case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return j()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}r("Unhandled DataView setter for signature:",f)},m=function(f){switch(R(f)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return j()&&I;case"p":case"P":case"s":switch(M){case 4:return Number;case 8:return j()&&I}break}r("Unhandled DataView set wrapper for signature:",f)},w=(f,S)=>f+"::"+S,Q=function(f,S){return()=>r(w(f,S),"is read-only.")},_=new WeakMap,h="(pointer-is-external)",l=function(f,S,k){if(k||(k=_.get(S)),k){if(_.delete(S),Array.isArray(S.ondispose)){let C;for(;C=S.ondispose.shift();)try{C instanceof Function?C.call(S):C instanceof K?C.dispose():typeof C=="number"&&g(C)}catch(J){console.warn("ondispose() for",f.structName,"@",k,"threw. NOT propagating it.",J)}}else if(S.ondispose instanceof Function)try{S.ondispose()}catch(C){console.warn("ondispose() for",f.structName,"@",k,"threw. NOT propagating it.",C)}delete S.ondispose,f.debugFlags.__flags.dealloc&&P("debug.dealloc:",S[h]?"EXTERNAL":"",f.structName,"instance:",f.structInfo.sizeof,"bytes @"+k),S[h]||g(k)}},u=f=>({configurable:!1,writable:!1,iterable:!1,value:f}),y=function(f,S,k){let C=!k;k?Object.defineProperty(S,h,u(k)):(k=d(f.structInfo.sizeof),k||r("Allocation of",f.structName,"structure failed."));try{f.debugFlags.__flags.alloc&&P("debug.alloc:",C?"":"EXTERNAL",f.structName,"instance:",f.structInfo.sizeof,"bytes @"+k),C&&a().fill(0,k,k+f.structInfo.sizeof),_.set(S,k)}catch(J){throw l(f,S,k),J}},b=function(){const f=this.pointer;return f?new Uint8Array(a().slice(f,f+this.structInfo.sizeof)):null},Z=u(f=>L+f+z),se=function(f,S,k=!0){let C=f.members[S];if(!C&&(L||z)){for(const J of Object.values(f.members))if(J.key===S){C=J;break}!C&&k&&r(w(f.name,S),"is not a mapped struct member.")}return C},fe=function f(S,k,C=!1){f._||(f._=re=>re.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));const J=se(S.structInfo,k,!0);return C?f._(J.signature):J.signature},ie={configurable:!1,enumerable:!1,get:function(){return _.get(this)},set:()=>r("Cannot assign the 'pointer' property of a struct.")},ae=u(function(){const f=[];for(const S of Object.keys(this.structInfo.members))f.push(this.memberKey(S));return f}),me=new TextDecoder("utf-8"),ge=new TextEncoder,Ee=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,ve=function(f,S,k){return me.decode(f.buffer instanceof Ee?f.slice(S,k):f.subarray(S,k))},De=function(f,S,k=!1){const C=se(f.structInfo,S,k);return C&&C.signature.length===1&&C.signature[0]==="s"?C:!1},Ie=function(f){f.signature!=="s"&&r("Invalid member type signature for C-string value:",JSON.stringify(f))},F=function(S,k){const C=se(S.structInfo,k,!0);Ie(C);const J=S[C.key];if(!J)return null;let re=J;const de=a();for(;de[re]!==0;++re);return J===re?"":ve(de,J,re)},B=function(f,...S){f.ondispose?Array.isArray(f.ondispose)||(f.ondispose=[f.ondispose]):f.ondispose=[],f.ondispose.push(...S)},U=function(f){const S=ge.encode(f),k=d(S.length+1);k||r("Allocation error while duplicating string:",f);const C=a();return C.set(S,k),C[k+S.length]=0,k},X=function(f,S,k){const C=se(f.structInfo,S,!0);Ie(C);const J=U(k);return f[C.key]=J,B(f,J),f},K=function(S,k){arguments[2]!==u&&r("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:u(S),structInfo:u(k)})};K.prototype=Object.create(null,{dispose:u(function(){l(this.constructor,this)}),lookupMember:u(function(f,S=!0){return se(this.structInfo,f,S)}),memberToJsString:u(function(f){return F(this,f)}),memberIsString:u(function(f,S=!0){return De(this,f,S)}),memberKey:Z,memberKeys:ae,memberSignature:u(function(f,S=!1){return fe(this,f,S)}),memoryDump:u(b),pointer:ie,setMemberCString:u(function(f,S){return X(this,f,S)})}),Object.assign(K.prototype,{addOnDispose:function(...f){return B(this,...f),this}}),Object.defineProperties(K,{allocCString:u(U),isA:u(f=>f instanceof K),hasExternalPointer:u(f=>f instanceof K&&!!f[h]),memberKey:Z});const ee=f=>Number.isFinite(f)||f instanceof(I||Number),H=function f(S,k,C){if(!f._){f._={getters:{},setters:{},sw:{}};const Ne=["i","c","C","p","P","s","f","d","v()"];G&&Ne.push("j"),Ne.forEach(function(Ge){f._.getters[Ge]=V(Ge),f._.setters[Ge]=c(Ge),f._.sw[Ge]=m(Ge)});const Lr=/^[ipPsjfdcC]$/,Dr=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;f.sigCheck=function(Ge,Cr,cn,Ct){Object.prototype.hasOwnProperty.call(Ge,cn)&&r(Ge.structName,"already has a property named",cn+"."),Lr.test(Ct)||Dr.test(Ct)||r("Malformed signature for",w(Ge.structName,Cr)+":",Ct)}}const J=S.memberKey(k);f.sigCheck(S.prototype,k,J,C.signature),C.key=J,C.name=k;const re=R(C.signature),de=w(S.prototype.structName,J),qe=S.prototype.debugFlags.__flags,je=Object.create(null);je.configurable=!1,je.enumerable=!1,je.get=function(){qe.getter&&P("debug.getter:",f._.getters[re],"for",x(re),de,"@",this.pointer,"+",C.offset,"sz",C.sizeof);let Ne=new DataView(a().buffer,this.pointer+C.offset,C.sizeof)[f._.getters[re]](0,E);return qe.getter&&P("debug.getter:",de,"result =",Ne),Ne},C.readOnly?je.set=Q(S.prototype.structName,J):je.set=function(Ne){if(qe.setter&&P("debug.setter:",f._.setters[re],"for",x(re),de,"@",this.pointer,"+",C.offset,"sz",C.sizeof,Ne),this.pointer||r("Cannot set struct property on disposed instance."),Ne===null)Ne=0;else for(;!ee(Ne);){if(O(C.signature)&&Ne instanceof K){Ne=Ne.pointer||0,qe.setter&&P("debug.setter:",de,"resolved to",Ne);break}r("Invalid value for pointer-type",de+".")}new DataView(a().buffer,this.pointer+C.offset,C.sizeof)[f._.setters[re]](0,f._.sw[re](Ne),E)},Object.defineProperty(S.prototype,J,je)},p=function f(S,k){arguments.length===1?(k=S,S=k.name):k.name||(k.name=S),S||r("Struct name is required.");let C=!1;Object.keys(k.members).forEach(de=>{const qe=k.members[de];qe.sizeof?qe.sizeof===1?qe.signature==="c"||qe.signature==="C"||r("Unexpected sizeof==1 member",w(k.name,de),"with signature",qe.signature):(qe.sizeof%4!==0&&(console.warn("Invalid struct member description =",qe,"from",k),r(S,"member",de,"sizeof is not aligned. sizeof="+qe.sizeof)),qe.offset%4!==0&&(console.warn("Invalid struct member description =",qe,"from",k),r(S,"member",de,"offset is not aligned. offset="+qe.offset))):r(S,"member",de,"is missing sizeof."),(!C||C.offset<qe.offset)&&(C=qe)}),C?k.sizeof<C.offset+C.sizeof&&r("Invalid struct config:",S,"max member offset ("+C.offset+") ","extends past end of struct (sizeof="+k.sizeof+")."):r("No member property descriptions found.");const J=u(i.__makeDebugFlags(f.debugFlags)),re=function de(qe){this instanceof de?arguments.length?((qe!==(qe|0)||qe<=0)&&r("Invalid pointer value for",S,"constructor."),y(de,this,qe)):y(de,this):r("The",S,"constructor may only be called via 'new'.")};return Object.defineProperties(re,{debugFlags:J,isA:u(de=>de instanceof re),memberKey:Z,memberKeys:ae,methodInfoForKey:u(function(de){}),structInfo:u(k),structName:u(S)}),re.prototype=new K(S,k,u),Object.defineProperties(re.prototype,{debugFlags:J,constructor:u(re)}),Object.keys(k.members).forEach(de=>H(re,de,k.members[de])),re};return p.StructType=K,p.config=s,p.allocCString=U,p.debugFlags||(p.debugFlags=i.__makeDebugFlags(i.debugFlags)),p},globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const s=(...q)=>{throw new Error(q.join(" "))};t.SQLite3Error.toss;const r=t.capi,i=t.wasm,a=t.util;if(globalThis.WhWasmUtilInstaller(i),delete globalThis.WhWasmUtilInstaller,i.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(q,E)=>q[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:q=>q[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new i.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:q=>{let E;return(T,O,R,x)=>{try{const j=i.cArgvToJs(O,R);return E||(E=i.cArgvToJs(O,x)),q(j,E)|0}catch(j){return j.resultCode||r.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_autocommit","int","sqlite3*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_progress_handler",void 0,["sqlite3*","int",new i.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(q,E)=>q[0]}),"*"]],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:q=>q[0]}),"*"]],["sqlite3_set_authorizer","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(q,E)=>q[0],callProxy:q=>(E,T,O,R,x,j)=>{try{return O=O&&i.cstrToJs(O),R=R&&i.cstrToJs(R),x=x&&i.cstrToJs(x),j=j&&i.cstrToJs(j),q(E,T,O,R,x,j)||0}catch(V){return V.resultCode||r.SQLITE_ERROR}}}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*",new i.xWrap.FuncPtrAdapter({name:"xDestroyAuxData",signature:"v(*)",contextKey:(q,E)=>q[0]})]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_isexplain","int",["sqlite3_stmt*"]],["sqlite3_stmt_readonly","int",["sqlite3_stmt*"]],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new i.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(q,E)=>q[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],i.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:q=>q[0],callProxy:q=>(E,T,O,R,x,j,V)=>{q(E,T,O,i.cstrToJs(R),i.cstrToJs(x),j,V)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:q=>q[0],callProxy:q=>(E,T,O,R,x)=>{q(E,T,i.cstrToJs(O),i.cstrToJs(R),x)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]],i.bigIntEnabled&&i.exports.sqlite3changegroup_add){const q={signature:"i(ps)",callProxy:E=>(T,O)=>{try{return E(T,i.cstrToJs(O))|0}catch(R){return R.resultCode||r.SQLITE_ERROR}}};i.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...q}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...q}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...q}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...q}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new i.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new i.xWrap.FuncPtrAdapter({name:"xFilter",...q,contextKey:(E,T)=>E[0]}),"*"]])}i.bindingSignatures.wasmInternal=[["sqlite3__wasm_db_reset","int","sqlite3*"],["sqlite3__wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3__wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3__wasm_posix_create_file","int","string","*","int"],["sqlite3__wasm_vfs_unlink","int","sqlite3_vfs*","string"],["sqlite3__wasm_qfmt_token","string:dealloc","string","int"]],t.StructBinder=globalThis.Jaccwabyt({heap:i.heap8u,alloc:i.alloc,dealloc:i.dealloc,bigIntEnabled:i.bigIntEnabled,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{const q=i.xWrap.argAdapter("string");i.xWrap.argAdapter("string:flexible",x=>q(a.flexibleString(x))),i.xWrap.argAdapter("string:static",(function(x){return i.isPtr(x)?x:(x=""+x,this[x]||(this[x]=i.allocCString(x)))}).bind(Object.create(null)));const E=i.xWrap.argAdapter("*"),T=function(){};i.xWrap.argAdapter("sqlite3_filename",E)("sqlite3_context*",E)("sqlite3_value*",E)("void*",E)("sqlite3_changegroup*",E)("sqlite3_changeset_iter*",E)("sqlite3_session*",E)("sqlite3_stmt*",x=>{var j;return E(x instanceof(((j=t==null?void 0:t.oo1)==null?void 0:j.Stmt)||T)?x.pointer:x)})("sqlite3*",x=>{var j;return E(x instanceof(((j=t==null?void 0:t.oo1)==null?void 0:j.DB)||T)?x.pointer:x)})("sqlite3_index_info*",x=>E(x instanceof(r.sqlite3_index_info||T)?x.pointer:x))("sqlite3_module*",x=>E(x instanceof(r.sqlite3_module||T)?x.pointer:x))("sqlite3_vfs*",x=>typeof x=="string"?r.sqlite3_vfs_find(x)||t.SQLite3Error.toss(r.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",x):E(x instanceof(r.sqlite3_vfs||T)?x.pointer:x));const O=i.xWrap.resultAdapter("*");i.xWrap.resultAdapter("sqlite3*",O)("sqlite3_context*",O)("sqlite3_stmt*",O)("sqlite3_value*",O)("sqlite3_vfs*",O)("void*",O),i.exports.sqlite3_step.length===0&&(i.xWrap.doArgcCheck=!1,t.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks."));for(const x of i.bindingSignatures)r[x[0]]=i.xWrap.apply(null,x);for(const x of i.bindingSignatures.wasmInternal)a[x[0]]=i.xWrap.apply(null,x);const R=function(x){return()=>s(x+"() is unavailable due to lack","of BigInt support in this build.")};for(const x of i.bindingSignatures.int64)r[x[0]]=i.bigIntEnabled?i.xWrap.apply(null,x):R(x[0]);if(delete i.bindingSignatures,i.exports.sqlite3__wasm_db_error){const x=i.xWrap("sqlite3__wasm_db_error","int","sqlite3*","int","string");a.sqlite3__wasm_db_error=function(j,V,c){return V instanceof t.WasmAllocError?(V=r.SQLITE_NOMEM,c=0):V instanceof Error&&(c=c||""+V,V=V.resultCode||r.SQLITE_ERROR),j?x(j,V,c):V}}else a.sqlite3__wasm_db_error=function(x,j,V){return console.warn("sqlite3__wasm_db_error() is not exported.",arguments),j}}{const q=i.xCall("sqlite3__wasm_enum_json");q||s("Maintenance required: increase sqlite3__wasm_enum_json()'s","static buffer size!"),i.ctype=JSON.parse(i.cstrToJs(q));const E=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];i.bigIntEnabled&&E.push("serialize","session","vtab");for(const R of E)for(const x of Object.entries(i.ctype[R]))r[x[0]]=x[1];i.functionEntry(r.SQLITE_WASM_DEALLOC)||s("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+r.SQLITE_WASM_DEALLOC+").");const T=Object.create(null);for(const R of["resultCodes"])for(const x of Object.entries(i.ctype[R]))T[x[1]]=x[0];r.sqlite3_js_rc_str=R=>T[R];const O=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!a.isUIThread(),sqlite3_index_info:!i.bigIntEnabled,sqlite3_index_constraint:!i.bigIntEnabled,sqlite3_index_orderby:!i.bigIntEnabled,sqlite3_index_constraint_usage:!i.bigIntEnabled});for(const R of i.ctype.structs)O[R.name]||(r[R.name]=t.StructBinder(R));if(r.sqlite3_index_info){for(const R of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])r.sqlite3_index_info[R]=r[R],delete r[R];r.sqlite3_vtab_config=i.xWrap("sqlite3__wasm_vtab_config","int",["sqlite3*","int","int"])}}const d=(q,E,T)=>a.sqlite3__wasm_db_error(q,r.SQLITE_MISUSE,E+"() requires "+T+" argument"+(T===1?"":"s")+"."),g=q=>a.sqlite3__wasm_db_error(q,r.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),P=q=>i.xWrap.argAdapter("sqlite3*")(q),L=q=>i.isPtr(q)?i.cstrToJs(q):q,z=(function(q,E){q=P(q);let T=this.dbMap.get(q);if(E)!T&&E>0&&this.dbMap.set(q,T=Object.create(null));else return this.dbMap.delete(q),T;return T}).bind(Object.assign(Object.create(null),{dbMap:new Map}));z.addCollation=function(q,E){const T=z(q,1);T.collation||(T.collation=new Set),T.collation.add(L(E).toLowerCase())},z._addUDF=function(q,E,T,O){E=L(E).toLowerCase();let R=O.get(E);R||O.set(E,R=new Set),R.add(T<0?-1:T)},z.addFunction=function(q,E,T){const O=z(q,1);O.udf||(O.udf=new Map),this._addUDF(q,E,T,O.udf)},z.addWindowFunc=function(q,E,T){const O=z(q,1);O.wudf||(O.wudf=new Map),this._addUDF(q,E,T,O.wudf)},z.cleanup=function(q){q=P(q);const E=[q];for(const R of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){const x=i.exports[R];E.length=x.length;try{r[R](...E)}catch(j){console.warn("close-time call of",R+"(",E,") threw:",j)}}const T=z(q,0);if(!T)return;if(T.collation){for(const R of T.collation)try{r.sqlite3_create_collation_v2(q,R,r.SQLITE_UTF8,0,0,0)}catch{}delete T.collation}let O;for(O=0;O<2;++O){const R=O?T.wudf:T.udf;if(!R)continue;const x=O?r.sqlite3_create_window_function:r.sqlite3_create_function_v2;for(const j of R){const V=j[0],c=j[1],m=[q,V,0,r.SQLITE_UTF8,0,0,0,0,0];O&&m.push(0);for(const w of c)try{m[2]=w,x.apply(null,m)}catch{}c.clear()}R.clear()}delete T.udf,delete T.wudf};{const q=i.xWrap("sqlite3_close_v2","int","sqlite3*");r.sqlite3_close_v2=function(E){if(arguments.length!==1)return d(E,"sqlite3_close_v2",1);if(E)try{z.cleanup(E)}catch{}return q(E)}}if(r.sqlite3session_table_filter){const q=i.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);r.sqlite3session_delete=function(E){if(arguments.length!==1)return d(pDb,"sqlite3session_delete",1);E&&r.sqlite3session_table_filter(E,0,0),q(E)}}{const q=(T,O)=>"argv["+O+"]:"+T[0]+":"+i.cstrToJs(T[1]).toLowerCase(),E=i.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new i.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:q}),new i.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:q})]);r.sqlite3_create_collation_v2=function(T,O,R,x,j,V){if(arguments.length!==6)return d(T,"sqlite3_create_collation_v2",6);if(!(R&15))R|=r.SQLITE_UTF8;else if(r.SQLITE_UTF8!==(R&15))return g(T);try{const c=E(T,O,R,x,j,V);return c===0&&j instanceof Function&&z.addCollation(T,O),c}catch(c){return a.sqlite3__wasm_db_error(T,c)}},r.sqlite3_create_collation=(T,O,R,x,j)=>arguments.length===5?r.sqlite3_create_collation_v2(T,O,R,x,j,0):d(T,"sqlite3_create_collation",5)}{const q=function(R,x){return R[0]+":"+(R[2]<0?-1:R[2])+":"+x+":"+i.cstrToJs(R[1]).toLowerCase()},E=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:q,callProxy:R=>(x,j,V)=>{try{R(x,...r.sqlite3_values_to_js(j,V))}catch(c){r.sqlite3_result_error_js(x,c)}}},xFinalAndValue:{signature:"v(p)",contextKey:q,callProxy:R=>x=>{try{r.sqlite3_result_js(x,R(x))}catch(j){r.sqlite3_result_error_js(x,j)}}},xFunc:{signature:"v(pip)",contextKey:q,callProxy:R=>(x,j,V)=>{try{r.sqlite3_result_js(x,R(x,...r.sqlite3_values_to_js(j,V)))}catch(c){r.sqlite3_result_error_js(x,c)}}},xDestroy:{signature:"v(p)",contextKey:q,callProxy:R=>x=>{try{R(x)}catch(j){console.error("UDF xDestroy method threw:",j)}}}}),T=i.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new i.xWrap.FuncPtrAdapter({name:"xFunc",...E.xFunc}),new i.xWrap.FuncPtrAdapter({name:"xStep",...E.xInverseAndStep}),new i.xWrap.FuncPtrAdapter({name:"xFinal",...E.xFinalAndValue}),new i.xWrap.FuncPtrAdapter({name:"xDestroy",...E.xDestroy})]),O=i.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new i.xWrap.FuncPtrAdapter({name:"xStep",...E.xInverseAndStep}),new i.xWrap.FuncPtrAdapter({name:"xFinal",...E.xFinalAndValue}),new i.xWrap.FuncPtrAdapter({name:"xValue",...E.xFinalAndValue}),new i.xWrap.FuncPtrAdapter({name:"xInverse",...E.xInverseAndStep}),new i.xWrap.FuncPtrAdapter({name:"xDestroy",...E.xDestroy})]);r.sqlite3_create_function_v2=function R(x,j,V,c,m,w,Q,_,h){if(R.length!==arguments.length)return d(x,"sqlite3_create_function_v2",R.length);if(!(c&15))c|=r.SQLITE_UTF8;else if(r.SQLITE_UTF8!==(c&15))return g(x);try{const l=T(x,j,V,c,m,w,Q,_,h);return l===0&&(w instanceof Function||Q instanceof Function||_ instanceof Function||h instanceof Function)&&z.addFunction(x,j,V),l}catch(l){return console.error("sqlite3_create_function_v2() setup threw:",l),a.sqlite3__wasm_db_error(x,l,"Creation of UDF threw: "+l)}},r.sqlite3_create_function=function R(x,j,V,c,m,w,Q,_){return R.length===arguments.length?r.sqlite3_create_function_v2(x,j,V,c,m,w,Q,_,0):d(x,"sqlite3_create_function",R.length)},r.sqlite3_create_window_function=function R(x,j,V,c,m,w,Q,_,h,l){if(R.length!==arguments.length)return d(x,"sqlite3_create_window_function",R.length);if(!(c&15))c|=r.SQLITE_UTF8;else if(r.SQLITE_UTF8!==(c&15))return g(x);try{const u=O(x,j,V,c,m,w,Q,_,h,l);return u===0&&(w instanceof Function||Q instanceof Function||_ instanceof Function||h instanceof Function||l instanceof Function)&&z.addWindowFunc(x,j,V),u}catch(u){return console.error("sqlite3_create_window_function() setup threw:",u),a.sqlite3__wasm_db_error(x,u,"Creation of UDF threw: "+u)}},r.sqlite3_create_function_v2.udfSetResult=r.sqlite3_create_function.udfSetResult=r.sqlite3_create_window_function.udfSetResult=r.sqlite3_result_js,r.sqlite3_create_function_v2.udfConvertArgs=r.sqlite3_create_function.udfConvertArgs=r.sqlite3_create_window_function.udfConvertArgs=r.sqlite3_values_to_js,r.sqlite3_create_function_v2.udfSetError=r.sqlite3_create_function.udfSetError=r.sqlite3_create_window_function.udfSetError=r.sqlite3_result_error_js}{const q=(T,O)=>(typeof T=="string"?O=-1:a.isSQLableTypedArray(T)?(O=T.byteLength,T=a.typedArrayToString(T instanceof ArrayBuffer?new Uint8Array(T):T)):Array.isArray(T)&&(T=T.join(""),O=-1),[T,O]),E={basic:i.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:i.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};r.sqlite3_prepare_v3=function T(O,R,x,j,V,c){if(T.length!==arguments.length)return d(O,"sqlite3_prepare_v3",T.length);const[m,w]=q(R,x);switch(typeof m){case"string":return E.basic(O,m,w,j,V,null);case"number":return E.full(O,m,w,j,V,c);default:return a.sqlite3__wasm_db_error(O,r.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}},r.sqlite3_prepare_v2=function T(O,R,x,j,V){return T.length===arguments.length?r.sqlite3_prepare_v3(O,R,x,0,j,V):d(O,"sqlite3_prepare_v2",T.length)}}{const q=i.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),E=i.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);r.sqlite3_bind_text=function T(O,R,x,j,V){if(T.length!==arguments.length)return d(r.sqlite3_db_handle(O),"sqlite3_bind_text",T.length);if(i.isPtr(x)||x===null)return q(O,R,x,j,V);x instanceof ArrayBuffer?x=new Uint8Array(x):Array.isArray(pMem)&&(x=pMem.join(""));let c,m;try{if(a.isSQLableTypedArray(x))c=i.allocFromTypedArray(x),m=x.byteLength;else if(typeof x=="string")[c,m]=i.allocCString(x);else return a.sqlite3__wasm_db_error(r.sqlite3_db_handle(O),r.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");return q(O,R,c,m,r.SQLITE_WASM_DEALLOC)}catch(w){return i.dealloc(c),a.sqlite3__wasm_db_error(r.sqlite3_db_handle(O),w)}},r.sqlite3_bind_blob=function T(O,R,x,j,V){if(T.length!==arguments.length)return d(r.sqlite3_db_handle(O),"sqlite3_bind_blob",T.length);if(i.isPtr(x)||x===null)return E(O,R,x,j,V);x instanceof ArrayBuffer?x=new Uint8Array(x):Array.isArray(x)&&(x=x.join(""));let c,m;try{if(a.isBindableTypedArray(x))c=i.allocFromTypedArray(x),m=j>=0?j:x.byteLength;else if(typeof x=="string")[c,m]=i.allocCString(x);else return a.sqlite3__wasm_db_error(r.sqlite3_db_handle(O),r.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");return E(O,R,c,m,r.SQLITE_WASM_DEALLOC)}catch(w){return i.dealloc(c),a.sqlite3__wasm_db_error(r.sqlite3_db_handle(O),w)}}}r.sqlite3_config=function(q,...E){if(arguments.length<2)return r.SQLITE_MISUSE;switch(q){case r.SQLITE_CONFIG_COVERING_INDEX_SCAN:case r.SQLITE_CONFIG_MEMSTATUS:case r.SQLITE_CONFIG_SMALL_MALLOC:case r.SQLITE_CONFIG_SORTERREF_SIZE:case r.SQLITE_CONFIG_STMTJRNL_SPILL:case r.SQLITE_CONFIG_URI:return i.exports.sqlite3__wasm_config_i(q,E[0]);case r.SQLITE_CONFIG_LOOKASIDE:return i.exports.sqlite3__wasm_config_ii(q,E[0],E[1]);case r.SQLITE_CONFIG_MEMDB_MAXSIZE:return i.exports.sqlite3__wasm_config_j(q,E[0]);case r.SQLITE_CONFIG_GETMALLOC:case r.SQLITE_CONFIG_GETMUTEX:case r.SQLITE_CONFIG_GETPCACHE2:case r.SQLITE_CONFIG_GETPCACHE:case r.SQLITE_CONFIG_HEAP:case r.SQLITE_CONFIG_LOG:case r.SQLITE_CONFIG_MALLOC:case r.SQLITE_CONFIG_MMAP_SIZE:case r.SQLITE_CONFIG_MULTITHREAD:case r.SQLITE_CONFIG_MUTEX:case r.SQLITE_CONFIG_PAGECACHE:case r.SQLITE_CONFIG_PCACHE2:case r.SQLITE_CONFIG_PCACHE:case r.SQLITE_CONFIG_PCACHE_HDRSZ:case r.SQLITE_CONFIG_PMASZ:case r.SQLITE_CONFIG_SERIALIZED:case r.SQLITE_CONFIG_SINGLETHREAD:case r.SQLITE_CONFIG_SQLLOG:case r.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return r.SQLITE_NOTFOUND}};{const q=new Set;r.sqlite3_auto_extension=function(E){if(E instanceof Function)E=i.installFunction("i(ppp)",E);else if(arguments.length!==1||!i.isPtr(E))return r.SQLITE_MISUSE;const T=i.exports.sqlite3_auto_extension(E);return E!==arguments[0]&&(T===0?q.add(E):i.uninstallFunction(E)),T},r.sqlite3_cancel_auto_extension=function(E){return!E||arguments.length!==1||!i.isPtr(E)?0:i.exports.sqlite3_cancel_auto_extension(E)},r.sqlite3_reset_auto_extension=function(){i.exports.sqlite3_reset_auto_extension();for(const E of q)i.uninstallFunction(E);q.clear()}}const G=r.sqlite3_vfs_find("kvvfs");if(G)if(a.isUIThread()){const q=new r.sqlite3_kvvfs_methods(i.exports.sqlite3__wasm_kvvfs_methods());delete r.sqlite3_kvvfs_methods;const E=i.exports.sqlite3__wasm_kvvfsMakeKeyOnPstack,T=i.pstack,O=x=>i.peek(x)===115?sessionStorage:localStorage,R={xRead:(x,j,V,c)=>{const m=T.pointer,w=i.scopedAllocPush();try{const Q=E(x,j);if(!Q)return-3;const _=i.cstrToJs(Q),h=O(x).getItem(_);if(!h)return-1;const l=h.length;if(c<=0)return l;if(c===1)return i.poke(V,0),l;const u=i.scopedAllocCString(h);return c>l+1&&(c=l+1),i.heap8u().copyWithin(V,u,u+c-1),i.poke(V+c-1,0),c-1}catch(Q){return console.error("kvstorageRead()",Q),-2}finally{T.restore(m),i.scopedAllocPop(w)}},xWrite:(x,j,V)=>{const c=T.pointer;try{const m=E(x,j);if(!m)return 1;const w=i.cstrToJs(m);return O(x).setItem(w,i.cstrToJs(V)),0}catch(m){return console.error("kvstorageWrite()",m),r.SQLITE_IOERR}finally{T.restore(c)}},xDelete:(x,j)=>{const V=T.pointer;try{const c=E(x,j);return c?(O(x).removeItem(i.cstrToJs(c)),0):1}catch(c){return console.error("kvstorageDelete()",c),r.SQLITE_IOERR}finally{T.restore(V)}}};for(const x of Object.keys(R))q[q.memberKey(x)]=i.installFunction(q.memberSignature(x),R[x])}else r.sqlite3_vfs_unregister(G);i.xWrap.FuncPtrAdapter.warnOnUse=!0;const I=t.StructBinder,A=function q(E,T,O,R=q.installMethodArgcCheck){if(E instanceof I.StructType?!(O instanceof Function)&&!i.isPtr(O)&&s("Usage errror: expecting a Function or WASM pointer to one."):s("Usage error: target object is-not-a StructType."),arguments.length===1)return(c,m)=>q(E,c,m,R);q.argcProxy||(q.argcProxy=function(c,m,w,Q){return function(..._){return w.length!==arguments.length&&s("Argument mismatch for",c.structInfo.name+"::"+m+": Native signature is:",Q),w.apply(this,_)}},q.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach((c,m)=>{if(typeof c=="number")try{i.uninstallFunction(c)}catch{}}),delete this.ondispose.__removeFuncList)});const x=E.memberSignature(T);x.length<2&&s("Member",T,"does not have a function pointer signature:",x);const j=E.memberKey(T),V=R&&!i.isPtr(O)?q.argcProxy(E,j,O,x):O;if(i.isPtr(V))V&&!i.functionEntry(V)&&s("Pointer",V,"is not a WASM function table entry."),E[j]=V;else{const c=i.installFunction(V,E.memberSignature(T,!0));E[j]=c,(!E.ondispose||!E.ondispose.__removeFuncList)&&(E.addOnDispose("ondispose.__removeFuncList handler",q.removeFuncList),E.ondispose.__removeFuncList=[]),E.ondispose.__removeFuncList.push(j,c)}return(c,m)=>q(E,c,m,R)};A.installMethodArgcCheck=!1;const M=function(q,E,T=A.installMethodArgcCheck){const O=new Map;for(const R of Object.keys(E)){const x=E[R],j=O.get(x);if(j){const V=q.memberKey(R);q[V]=q[q.memberKey(j)]}else A(q,R,x,T),O.set(x,R)}return q};I.StructType.prototype.installMethod=function(E,T,O=A.installMethodArgcCheck){return arguments.length<3&&E&&typeof E=="object"?M(this,...arguments):A(this,...arguments)},I.StructType.prototype.installMethods=function(q,E=A.installMethodArgcCheck){return M(this,q,E)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){t.version={libVersion:"3.46.0",libVersionNumber:3046e3,sourceId:"2024-05-23 13:25:27 96c92aba00c8375bc32fafcdf12429c58bd8aabfcadab6683e35bbb9cdebf19e",downloadVersion:346e4}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const s=(..._)=>{throw new t.SQLite3Error(..._)},r=t.capi,i=t.wasm,a=t.util,d=new WeakMap,g=new WeakMap,P=(_,h,l)=>{const u=Object.getOwnPropertyDescriptor(_,h);return u?u.value:l},L=function(_,h){return h&&(_ instanceof A&&(_=_.pointer),s(h,"sqlite3 result code",h+":",_?r.sqlite3_errmsg(_):r.sqlite3_errstr(h))),arguments[0]},z=i.installFunction("i(ippp)",(function(_,h,l,u){r.SQLITE_TRACE_STMT===_&&console.log("SQL TRACE #"+ ++this.counter+" via sqlite3@"+h+":",i.cstrToJs(u))}).bind({counter:0})),G=Object.create(null),I=function _(...h){if(!_._name2vfs){_._name2vfs=Object.create(null);const ae=typeof importScripts=="function"?me=>s("The VFS for",me,"is only available in the main window thread."):!1;_._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:ae||(()=>"local")},_._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:ae||(()=>"session")}}const l=_.normalizeArgs(...h);let u=l.filename,y=l.vfs,b=l.flags;(typeof u!="string"&&typeof u!="number"||typeof b!="string"||y&&typeof y!="string"&&typeof y!="number")&&(t.config.error("Invalid DB ctor args",l,arguments),s("Invalid arguments for DB constructor."));let W=typeof u=="number"?i.cstrToJs(u):u;const Z=_._name2vfs[W];Z&&(y=Z.vfs,u=W=Z.filename(W));let se,fe=0;b.indexOf("c")>=0&&(fe|=r.SQLITE_OPEN_CREATE|r.SQLITE_OPEN_READWRITE),b.indexOf("w")>=0&&(fe|=r.SQLITE_OPEN_READWRITE),fe===0&&(fe|=r.SQLITE_OPEN_READONLY),fe|=r.SQLITE_OPEN_EXRESCODE;const ie=i.pstack.pointer;try{const ae=i.pstack.allocPtr();let me=r.sqlite3_open_v2(u,ae,fe,y||0);se=i.peekPtr(ae),L(se,me),r.sqlite3_extended_result_codes(se,1),b.indexOf("t")>=0&&r.sqlite3_trace_v2(se,r.SQLITE_TRACE_STMT,z,se)}catch(ae){throw se&&r.sqlite3_close_v2(se),ae}finally{i.pstack.restore(ie)}this.filename=W,d.set(this,se),g.set(this,Object.create(null));try{const ae=r.sqlite3_js_db_vfs(se)||s("Internal error: cannot get VFS for new db handle."),me=G[ae];me&&(me instanceof Function?me(this,t):L(se,r.sqlite3_exec(se,me,0,0,0)))}catch(ae){throw this.close(),ae}};I.setVfsPostOpenSql=function(_,h){G[_]=h},I.normalizeArgs=function(_=":memory:",h="c",l=null){const u={};return arguments.length===1&&arguments[0]&&typeof arguments[0]=="object"?(Object.assign(u,arguments[0]),u.flags===void 0&&(u.flags="c"),u.vfs===void 0&&(u.vfs=null),u.filename===void 0&&(u.filename=":memory:")):(u.filename=_,u.flags=h,u.vfs=l),u};const A=function(..._){I.apply(this,_)};A.dbCtorHelper=I;const M={null:1,number:2,string:3,boolean:4,blob:5};M.undefined==M.null,i.bigIntEnabled&&(M.bigint=M.number);const q=function(){M!==arguments[2]&&s(r.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],d.set(this,arguments[1]),this.parameterCount=r.sqlite3_bind_parameter_count(this.pointer)},E=function(_){return _.pointer||s("DB has been closed."),_},T=function(_,h){return(h!==(h|0)||h<0||h>=_.columnCount)&&s("Column index",h,"is out of range."),_},O=function(_,h){const l=Object.create(null);switch(l.opt=Object.create(null),h.length){case 1:typeof h[0]=="string"||a.isSQLableTypedArray(h[0])||Array.isArray(h[0])?l.sql=h[0]:h[0]&&typeof h[0]=="object"&&(l.opt=h[0],l.sql=l.opt.sql);break;case 2:l.sql=h[0],l.opt=h[1];break;default:s("Invalid argument count for exec().")}l.sql=a.flexibleString(l.sql),typeof l.sql!="string"&&s("Missing SQL argument or unsupported SQL value type.");const u=l.opt;switch(u.returnValue){case"resultRows":u.resultRows||(u.resultRows=[]),l.returnVal=()=>u.resultRows;break;case"saveSql":u.saveSql||(u.saveSql=[]),l.returnVal=()=>u.saveSql;break;case void 0:case"this":l.returnVal=()=>_;break;default:s("Invalid returnValue value:",u.returnValue)}if(!u.callback&&!u.returnValue&&u.rowMode!==void 0&&(u.resultRows||(u.resultRows=[]),l.returnVal=()=>u.resultRows),u.callback||u.resultRows)switch(u.rowMode===void 0?"array":u.rowMode){case"object":l.cbArg=(y,b)=>{b.columnNames||(b.columnNames=y.getColumnNames([]));const W=y.get([]),Z=Object.create(null);for(const se in b.columnNames)Z[b.columnNames[se]]=W[se];return Z};break;case"array":l.cbArg=y=>y.get([]);break;case"stmt":Array.isArray(u.resultRows)&&s("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),l.cbArg=y=>y;break;default:if(a.isInt32(u.rowMode)){l.cbArg=y=>y.get(u.rowMode);break}else if(typeof u.rowMode=="string"&&u.rowMode.length>1&&u.rowMode[0]==="$"){const y=u.rowMode.substr(1);l.cbArg=b=>{const W=b.get(Object.create(null))[y];return W===void 0?s(r.SQLITE_NOTFOUND,"exec(): unknown result column:",y):W};break}s("Invalid rowMode:",u.rowMode)}return l},R=(_,h,l,...u)=>{const y=_.prepare(h);try{const b=y.bind(l).step()?y.get(...u):void 0;return y.reset(),b}finally{y.finalize()}},x=(_,h,l,u)=>_.exec({sql:h,bind:l,rowMode:u,returnValue:"resultRows"});A.checkRc=(_,h)=>L(_,h),A.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return E(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch{}const _=this.pointer;if(Object.keys(g.get(this)).forEach((h,l)=>{if(l&&l.pointer)try{l.finalize()}catch{}}),d.delete(this),g.delete(this),r.sqlite3_close_v2(_),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch{}delete this.filename}},changes:function(_=!1,h=!1){const l=E(this).pointer;return _?h?r.sqlite3_total_changes64(l):r.sqlite3_total_changes(l):h?r.sqlite3_changes64(l):r.sqlite3_changes(l)},dbFilename:function(_="main"){return r.sqlite3_db_filename(E(this).pointer,_)},dbName:function(_=0){return r.sqlite3_db_name(E(this).pointer,_)},dbVfsName:function(_=0){let h;const l=r.sqlite3_js_db_vfs(E(this).pointer,_);if(l){const u=new r.sqlite3_vfs(l);try{h=i.cstrToJs(u.$zName)}finally{u.dispose()}}return h},prepare:function(_){E(this);const h=i.pstack.pointer;let l,u;try{l=i.pstack.alloc(8),A.checkRc(this,r.sqlite3_prepare_v2(this.pointer,_,-1,l,null)),u=i.peekPtr(l)}finally{i.pstack.restore(h)}u||s("Cannot prepare empty SQL.");const y=new q(this,u,M);return g.get(this)[u]=y,y},exec:function(){E(this);const _=O(this,arguments);if(!_.sql)return s("exec() requires an SQL string.");const h=_.opt,l=h.callback,u=Array.isArray(h.resultRows)?h.resultRows:void 0;let y,b=h.bind,W=!!(_.cbArg||h.columnNames||u);const Z=i.scopedAllocPush(),se=Array.isArray(h.saveSql)?h.saveSql:void 0;try{const fe=a.isSQLableTypedArray(_.sql);let ie=fe?_.sql.byteLength:i.jstrlen(_.sql);const ae=i.scopedAlloc(2*i.ptrSizeof+(ie+1)),me=ae+i.ptrSizeof;let ge=me+i.ptrSizeof;const Ee=ge+ie;for(fe?i.heap8().set(_.sql,ge):i.jstrcpy(_.sql,i.heap8(),ge,ie,!1),i.poke(ge+ie,0);ge&&i.peek(ge,"i8");){i.pokePtr([ae,me],0),A.checkRc(this,r.sqlite3_prepare_v3(this.pointer,ge,ie,0,ae,me));const ve=i.peekPtr(ae);if(ge=i.peekPtr(me),ie=Ee-ge,!!ve){if(se&&se.push(r.sqlite3_sql(ve).trim()),y=new q(this,ve,M),b&&y.parameterCount&&(y.bind(b),b=null),W&&y.columnCount){let De=Array.isArray(h.columnNames)?0:1;if(W=!1,_.cbArg||u){const Ie=Object.create(null);for(;y.step();y._lockedByExec=!1){De++===0&&y.getColumnNames(Ie.columnNames=h.columnNames||[]),y._lockedByExec=!0;const F=_.cbArg(y,Ie);if(u&&u.push(F),l&&l.call(h,F,y)===!1)break}y._lockedByExec=!1}De===0&&y.getColumnNames(h.columnNames)}else y.step();y.reset().finalize(),y=null}}}finally{i.scopedAllocPop(Z),y&&(delete y._lockedByExec,y.finalize())}return _.returnVal()},createFunction:function(h,l,u){const y=Ie=>Ie instanceof Function;switch(arguments.length){case 1:u=h,h=u.name,l=u.xFunc||0;break;case 2:y(l)||(u=l,l=u.xFunc||0);break}u||(u={}),typeof h!="string"&&s("Invalid arguments: missing function name.");let b=u.xStep||0,W=u.xFinal||0;const Z=u.xValue||0,se=u.xInverse||0;let fe;y(l)?(fe=!1,(y(b)||y(W))&&s("Ambiguous arguments: scalar or aggregate?"),b=W=null):y(b)?(y(W)||s("Missing xFinal() callback for aggregate or window UDF."),l=null):y(W)?s("Missing xStep() callback for aggregate or window UDF."):s("Missing function-type properties."),fe===!1?(y(Z)||y(se))&&s("xValue and xInverse are not permitted for non-window UDFs."):y(Z)?(y(se)||s("xInverse must be provided if xValue is."),fe=!0):y(se)&&s("xValue must be provided if xInverse is.");const ie=u.pApp;ie!=null&&(typeof ie!="number"||!a.isInt32(ie))&&s("Invalid value for pApp property. Must be a legal WASM pointer value.");const ae=u.xDestroy||0;ae&&!y(ae)&&s("xDestroy property must be a function.");let me=0;P(u,"deterministic")&&(me|=r.SQLITE_DETERMINISTIC),P(u,"directOnly")&&(me|=r.SQLITE_DIRECTONLY),P(u,"innocuous")&&(me|=r.SQLITE_INNOCUOUS),h=h.toLowerCase();const ge=l||b,Ee=P(u,"arity"),ve=typeof Ee=="number"?Ee:ge.length?ge.length-1:0;let De;return fe?De=r.sqlite3_create_window_function(this.pointer,h,ve,r.SQLITE_UTF8|me,ie||0,b,W,Z,se,ae):De=r.sqlite3_create_function_v2(this.pointer,h,ve,r.SQLITE_UTF8|me,ie||0,l,b,W,ae),A.checkRc(this,De),this},selectValue:function(_,h,l){return R(this,_,h,0,l)},selectValues:function(_,h,l){const u=this.prepare(_),y=[];try{for(u.bind(h);u.step();)y.push(u.get(0,l));u.reset()}finally{u.finalize()}return y},selectArray:function(_,h){return R(this,_,h,[])},selectObject:function(_,h){return R(this,_,h,{})},selectArrays:function(_,h){return x(this,_,h,"array")},selectObjects:function(_,h){return x(this,_,h,"object")},openStatementCount:function(){return this.pointer?Object.keys(g.get(this)).length:0},transaction:function(_){let h="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&s(r.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),h+=" "+arguments[0],_=arguments[1]),E(this).exec(h);try{const l=_(this);return this.exec("COMMIT"),l}catch(l){throw this.exec("ROLLBACK"),l}},savepoint:function(_){E(this).exec("SAVEPOINT oo1");try{const h=_(this);return this.exec("RELEASE oo1"),h}catch(h){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),h}},checkRc:function(_){return L(this,_)}};const j=function(_){return _.pointer||s("Stmt has been closed."),_},V=function(_){let h=M[_==null?"null":typeof _];switch(h){case M.boolean:case M.null:case M.number:case M.string:return h;case M.bigint:if(i.bigIntEnabled)return h;default:return a.isBindableTypedArray(_)?M.blob:void 0}},c=function(_){return V(_)||s("Unsupported bind() argument type:",typeof _)},m=function(_,h){const l=typeof h=="number"?h:r.sqlite3_bind_parameter_index(_.pointer,h);return l===0||!a.isInt32(l)?s("Invalid bind() parameter name: "+h):(l<1||l>_.parameterCount)&&s("Bind index",h,"is out of range."),l},w=function(_,h){return _._lockedByExec&&s("Operation is illegal when statement is locked:",h),_},Q=function _(h,l,u,y){w(j(h),"bind()"),_._||(_._tooBigInt=W=>s("BigInt value is too big to store without precision loss:",W),_._={string:function(W,Z,se,fe){const[ie,ae]=i.allocCString(se,!0);return(fe?r.sqlite3_bind_blob:r.sqlite3_bind_text)(W.pointer,Z,ie,ae,r.SQLITE_WASM_DEALLOC)}}),c(y),l=m(h,l);let b=0;switch(y==null?M.null:u){case M.null:b=r.sqlite3_bind_null(h.pointer,l);break;case M.string:b=_._.string(h,l,y,!1);break;case M.number:{let W;a.isInt32(y)?W=r.sqlite3_bind_int:typeof y=="bigint"?a.bigIntFits64(y)?i.bigIntEnabled?W=r.sqlite3_bind_int64:a.bigIntFitsDouble(y)?(y=Number(y),W=r.sqlite3_bind_double):_._tooBigInt(y):_._tooBigInt(y):(y=Number(y),i.bigIntEnabled&&Number.isInteger(y)?W=r.sqlite3_bind_int64:W=r.sqlite3_bind_double),b=W(h.pointer,l,y);break}case M.boolean:b=r.sqlite3_bind_int(h.pointer,l,y?1:0);break;case M.blob:{if(typeof y=="string"){b=_._.string(h,l,y,!0);break}else y instanceof ArrayBuffer?y=new Uint8Array(y):a.isBindableTypedArray(y)||s("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");const W=i.alloc(y.byteLength||1);i.heap8().set(y.byteLength?y:[0],W),b=r.sqlite3_bind_blob(h.pointer,l,W,y.byteLength,r.SQLITE_WASM_DEALLOC);break}default:t.config.warn("Unsupported bind() argument type:",y),s("Unsupported bind() argument type: "+typeof y)}return b&&A.checkRc(h.db.pointer,b),h._mayGet=!1,h};q.prototype={finalize:function(){if(this.pointer){w(this,"finalize()");const _=r.sqlite3_finalize(this.pointer);return delete g.get(this.db)[this.pointer],d.delete(this),delete this._mayGet,delete this.parameterCount,delete this._lockedByExec,delete this.db,_}},clearBindings:function(){return w(j(this),"clearBindings()"),r.sqlite3_clear_bindings(this.pointer),this._mayGet=!1,this},reset:function(_){w(this,"reset()"),_&&this.clearBindings();const h=r.sqlite3_reset(j(this).pointer);return this._mayGet=!1,L(this.db,h),this},bind:function(){j(this);let _,h;switch(arguments.length){case 1:_=1,h=arguments[0];break;case 2:_=arguments[0],h=arguments[1];break;default:s("Invalid bind() arguments.")}return h===void 0?this:(this.parameterCount||s("This statement has no bindable parameters."),this._mayGet=!1,h===null?Q(this,_,M.null,h):Array.isArray(h)?(arguments.length!==1&&s("When binding an array, an index argument is not permitted."),h.forEach((l,u)=>Q(this,u+1,c(l),l)),this):(h instanceof ArrayBuffer&&(h=new Uint8Array(h)),typeof h=="object"&&!a.isBindableTypedArray(h)?(arguments.length!==1&&s("When binding an object, an index argument is not permitted."),Object.keys(h).forEach(l=>Q(this,l,c(h[l]),h[l])),this):Q(this,_,c(h),h)))},bindAsBlob:function(_,h){j(this),arguments.length===1&&(h=_,_=1);const l=c(h);return M.string!==l&&M.blob!==l&&M.null!==l&&s("Invalid value type for bindAsBlob()"),Q(this,_,M.blob,h)},step:function(){w(this,"step()");const _=r.sqlite3_step(j(this).pointer);switch(_){case r.SQLITE_DONE:return this._mayGet=!1;case r.SQLITE_ROW:return this._mayGet=!0;default:this._mayGet=!1,t.config.warn("sqlite3_step() rc=",_,r.sqlite3_js_rc_str(_),"SQL =",r.sqlite3_sql(this.pointer)),A.checkRc(this.db.pointer,_)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{const _=this.step();return this.reset(),_}finally{try{this.finalize()}catch{}}},get:function(_,h){if(j(this)._mayGet||s("Stmt.step() has not (recently) returned true."),Array.isArray(_)){let l=0;const u=this.columnCount;for(;l<u;)_[l]=this.get(l++);return _}else if(_&&typeof _=="object"){let l=0;const u=this.columnCount;for(;l<u;)_[r.sqlite3_column_name(this.pointer,l)]=this.get(l++);return _}switch(T(this,_),h===void 0?r.sqlite3_column_type(this.pointer,_):h){case r.SQLITE_NULL:return null;case r.SQLITE_INTEGER:if(i.bigIntEnabled){const l=r.sqlite3_column_int64(this.pointer,_);return l>=Number.MIN_SAFE_INTEGER&&l<=Number.MAX_SAFE_INTEGER?Number(l).valueOf():l}else{const l=r.sqlite3_column_double(this.pointer,_);return(l>Number.MAX_SAFE_INTEGER||l<Number.MIN_SAFE_INTEGER)&&s("Integer is out of range for JS integer range: "+l),a.isInt32(l)?l|0:l}case r.SQLITE_FLOAT:return r.sqlite3_column_double(this.pointer,_);case r.SQLITE_TEXT:return r.sqlite3_column_text(this.pointer,_);case r.SQLITE_BLOB:{const l=r.sqlite3_column_bytes(this.pointer,_),u=r.sqlite3_column_blob(this.pointer,_),y=new Uint8Array(l);return l&&y.set(i.heap8u().slice(u,u+l),0),l&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(y.buffer),y}default:s("Don't know how to translate","type of result column #"+_+".")}s("Not reached.")},getInt:function(_){return this.get(_,r.SQLITE_INTEGER)},getFloat:function(_){return this.get(_,r.SQLITE_FLOAT)},getString:function(_){return this.get(_,r.SQLITE_TEXT)},getBlob:function(_){return this.get(_,r.SQLITE_BLOB)},getJSON:function(_){const h=this.get(_,r.SQLITE_STRING);return h===null?h:JSON.parse(h)},getColumnName:function(_){return r.sqlite3_column_name(T(j(this),_).pointer,_)},getColumnNames:function(_=[]){T(j(this),0);const h=this.columnCount;for(let l=0;l<h;++l)_.push(r.sqlite3_column_name(this.pointer,l));return _},getParamIndex:function(_){return j(this).parameterCount?r.sqlite3_bind_parameter_index(this.pointer,_):void 0}};{const _={enumerable:!0,get:function(){return d.get(this)},set:()=>s("The pointer property is read-only.")};Object.defineProperty(q.prototype,"pointer",_),Object.defineProperty(A.prototype,"pointer",_)}if(Object.defineProperty(q.prototype,"columnCount",{enumerable:!1,get:function(){return r.sqlite3_column_count(this.pointer)},set:()=>s("The columnCount property is read-only.")}),t.oo1={DB:A,Stmt:q},a.isUIThread()){t.oo1.JsStorageDb=function(h="session"){const l=I.normalizeArgs(...arguments);h=l.filename,h!=="session"&&h!=="local"&&s("JsStorageDb db name must be one of 'session' or 'local'."),l.vfs="kvvfs",I.call(this,l)};const _=t.oo1.JsStorageDb;_.prototype=Object.create(A.prototype),_.clearStorage=r.sqlite3_js_kvvfs_clear,_.prototype.clearStorage=function(){return _.clearStorage(E(this).filename)},_.storageSize=r.sqlite3_js_kvvfs_size,_.prototype.storageSize=function(){return _.storageSize(E(this).filename)}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const s=t.util;t.initWorker1API=(function(){const r=(...I)=>{throw new Error(I.join(" "))};globalThis.WorkerGlobalScope instanceof Function||r("initWorker1API() must be run from a Worker thread.");const i=this.sqlite3||r("Missing this.sqlite3 object."),a=i.oo1.DB,d=function(I){let A=g.idMap.get(I);return A||(A="db#"+ ++g.idSeq+"@"+I.pointer,g.idMap.set(I,A),A)},g={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(I){const A=new a(I);return this.dbs[d(A)]=A,this.dbList.indexOf(A)<0&&this.dbList.push(A),A},close:function(I,A){if(I){delete this.dbs[d(I)];const M=I.filename,q=s.sqlite3__wasm_db_vfs(I.pointer,0);I.close();const E=this.dbList.indexOf(I);E>=0&&this.dbList.splice(E,1),A&&M&&q&&s.sqlite3__wasm_vfs_unlink(q,M)}},post:function(I,A){A&&A.length?(globalThis.postMessage(I,Array.from(A)),A.length=0):globalThis.postMessage(I)},dbs:Object.create(null),getDb:function(I,A=!0){return this.dbs[I]||(A?r("Unknown (or closed) DB ID:",I):void 0)}},P=function(I=g.dbList[0]){return I&&I.pointer?I:r("DB is not opened.")},L=function(I,A=!0){const M=g.getDb(I.dbId,!1)||g.dbList[0];return A?P(M):M},z=function(){return g.dbList[0]&&d(g.dbList[0])},G={open:function(I){const A=Object.create(null),M=I.args||Object.create(null);M.simulateError&&r("Throwing because of simulateError flag.");const q=Object.create(null);A.vfs=M.vfs,A.filename=M.filename||"";const E=g.open(A);return q.filename=E.filename,q.persistent=!!i.capi.sqlite3_js_db_uses_vfs(E.pointer,"opfs"),q.dbId=d(E),q.vfs=E.dbVfsName(),q},close:function(I){const A=L(I,!1),M={filename:A&&A.filename};if(A){const q=I.args&&typeof I.args=="object"?!!I.args.unlink:!1;g.close(A,q)}return M},exec:function(I){const A=typeof I.args=="string"?{sql:I.args}:I.args||Object.create(null);A.rowMode==="stmt"?r("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):A.sql||r("'exec' requires input SQL.");const M=L(I);(A.callback||Array.isArray(A.resultRows))&&(M._blobXfer=g.xfer);const q=A.callback;let E=0;const T=!!A.columnNames;typeof q=="string"&&(T||(A.columnNames=[]),A.callback=function(O,R){g.post({type:q,columnNames:A.columnNames,rowNumber:++E,row:O},g.xfer)});try{const O=A.countChanges?M.changes(!0,A.countChanges===64):void 0;M.exec(A),O!==void 0&&(A.changeCount=M.changes(!0,A.countChanges===64)-O),A.callback instanceof Function&&(A.callback=q,g.post({type:q,columnNames:A.columnNames,rowNumber:null,row:void 0}))}finally{delete M._blobXfer,A.callback&&(A.callback=q)}return A},"config-get":function(){const I=Object.create(null),A=i.config;return["bigIntEnabled"].forEach(function(M){Object.getOwnPropertyDescriptor(A,M)&&(I[M]=A[M])}),I.version=i.version,I.vfsList=i.capi.sqlite3_js_vfs_list(),I.opfsEnabled=!!i.opfs,I},export:function(I){const A=L(I),M={byteArray:i.capi.sqlite3_js_db_export(A.pointer),filename:A.filename,mimetype:"application/x-sqlite3"};return g.xfer.push(M.byteArray.buffer),M},toss:function(I){r("Testing worker exception")},"opfs-tree":async function(I){return i.opfs||r("OPFS support is unavailable."),await i.opfs.treeList()}};globalThis.onmessage=async function(I){I=I.data;let A,M=I.dbId,q=I.type;const E=performance.now();try{G.hasOwnProperty(q)&&G[q]instanceof Function?A=await G[q](I):r("Unknown db worker message type:",I.type)}catch(T){q="error",A={operation:I.type,message:T.message,errorClass:T.name,input:I},T.stack&&(A.stack=typeof T.stack=="string"?T.stack.split(/\n\s*/):T.stack)}M||(M=A.dbId||z()),g.post({type:q,dbId:M,messageId:I.messageId,workerReceivedTime:E,workerRespondTime:performance.now(),departureTime:I.departureTime,result:A},g.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}).bind({sqlite3:t})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const s=t.wasm,r=t.capi,i=t.util.toss3,a=Object.create(null);t.vfs=a,r.sqlite3_vfs.prototype.registerVfs=function(d=!1){this instanceof t.capi.sqlite3_vfs||i("Expecting a sqlite3_vfs-type argument.");const g=r.sqlite3_vfs_register(this,d?1:0);return g&&i("sqlite3_vfs_register(",this,") failed with rc",g),this.pointer!==r.sqlite3_vfs_find(this.$zName)&&i("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},a.installVfs=function(d){let g=0;const P=["io","vfs"];for(const L of P){const z=d[L];z&&(++g,z.struct.installMethods(z.methods,!!z.applyArgcCheck),L==="vfs"&&(!z.struct.$zName&&typeof z.name=="string"&&z.struct.addOnDispose(z.struct.$zName=s.allocCString(z.name)),z.struct.registerVfs(!!z.asDefault)))}return g||i("Misuse: installVfs() options object requires at least","one of:",P),this}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const s=t.wasm,r=t.capi,i=t.util.toss3,a=Object.create(null);t.vtab=a;const d=r.sqlite3_index_info;d.prototype.nthConstraint=function(L,z=!1){if(L<0||L>=this.$nConstraint)return!1;const G=this.$aConstraint+d.sqlite3_index_constraint.structInfo.sizeof*L;return z?G:new d.sqlite3_index_constraint(G)},d.prototype.nthConstraintUsage=function(L,z=!1){if(L<0||L>=this.$nConstraint)return!1;const G=this.$aConstraintUsage+d.sqlite3_index_constraint_usage.structInfo.sizeof*L;return z?G:new d.sqlite3_index_constraint_usage(G)},d.prototype.nthOrderBy=function(L,z=!1){if(L<0||L>=this.$nOrderBy)return!1;const G=this.$aOrderBy+d.sqlite3_index_orderby.structInfo.sizeof*L;return z?G:new d.sqlite3_index_orderby(G)};const g=function(L,z){return(function(G,I=!1){if(arguments.length===0&&(G=new z),G instanceof z)return this.set(G.pointer,G),G;s.isPtr(G)||t.SQLite3Error.toss("Invalid argument to",L+"()");let A=this.get(G);return I&&this.delete(G),A}).bind(new Map)},P=function(L,z){const G=g(L,z);return Object.assign(Object.create(null),{StructType:z,create:I=>{const A=G();return s.pokePtr(I,A.pointer),A},get:I=>G(I),unget:I=>G(I,!0),dispose:I=>{const A=G(I,!0);A&&A.dispose()}})};a.xVtab=P("xVtab",r.sqlite3_vtab),a.xCursor=P("xCursor",r.sqlite3_vtab_cursor),a.xIndexInfo=L=>new r.sqlite3_index_info(L),a.xError=function L(z,G,I){if(L.errorReporter instanceof Function)try{L.errorReporter("sqlite3_module::"+z+"(): "+G.message)}catch{}let A;return G instanceof t.WasmAllocError?A=r.SQLITE_NOMEM:arguments.length>2?A=I:G instanceof t.SQLite3Error&&(A=G.resultCode),A||r.SQLITE_ERROR},a.xError.errorReporter=console.error.bind(console),a.xRowid=(L,z)=>s.poke(L,z,"i64"),a.setupModule=function(L){let z=!1;const G=this instanceof r.sqlite3_module?this:L.struct||(z=new r.sqlite3_module);try{const I=L.methods||i("Missing 'methods' object.");for(const A of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){const M=A[0],q=A[1];I[M]===!0?I[M]=I[q]:I[q]===!0&&(I[q]=I[M])}if(L.catchExceptions){const A=function(E,T){return["xConnect","xCreate"].indexOf(E)>=0?function(O,R,x,j,V,c){try{return T(...arguments)||0}catch(m){return m instanceof t.WasmAllocError||(s.dealloc(s.peekPtr(c)),s.pokePtr(c,s.allocCString(m.message))),a.xError(E,m)}}:function(...O){try{return T(...O)||0}catch(R){return a.xError(E,R)}}},M=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],q=Object.create(null);for(const E of M){const T=I[E];if(T instanceof Function)E==="xConnect"&&I.xCreate===T?q[E]=I.xCreate:E==="xCreate"&&I.xConnect===T?q[E]=I.xConnect:q[E]=A(E,T);else continue}G.installMethods(q,!1)}else G.installMethods(I,!!L.applyArgcCheck);if(G.$iVersion===0){let A;typeof L.iVersion=="number"?A=L.iVersion:G.$xShadowName?A=3:G.$xSavePoint||G.$xRelease||G.$xRollbackTo?A=2:A=1,G.$iVersion=A}}catch(I){throw z&&z.dispose(),I}return G},r.sqlite3_module.prototype.setupModule=function(L){return a.setupModule.call(this,L)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const s=function r(i){var g;if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if(typeof WorkerGlobalScope>"u")return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!((g=navigator==null?void 0:navigator.storage)!=null&&g.getDirectory))return Promise.reject(new Error("Missing required OPFS APIs."));(!i||typeof i!="object")&&(i=Object.create(null));const a=new URL(globalThis.location.href).searchParams;return a.has("opfs-disable")?Promise.resolve(t):(i.verbose===void 0&&(i.verbose=a.has("opfs-verbose")?+a.get("opfs-verbose")||2:1),i.sanityChecks===void 0&&(i.sanityChecks=a.has("opfs-sanity-check")),i.proxyUri===void 0&&(i.proxyUri=r.defaultProxyUri),typeof i.proxyUri=="function"&&(i.proxyUri=i.proxyUri()),new Promise(function(P,L){const z=[t.config.error,t.config.warn,t.config.log],G=(F,...B)=>{i.verbose>F&&z[F]("OPFS syncer:",...B)},I=(...F)=>G(2,...F),A=(...F)=>G(1,...F),M=(...F)=>G(0,...F),q=t.util.toss,E=t.capi,T=t.util,O=t.wasm,R=E.sqlite3_vfs,x=E.sqlite3_file,j=E.sqlite3_io_methods,V=Object.create(null),c=()=>{var F;return globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&((F=navigator==null?void 0:navigator.storage)==null?void 0:F.getDirectory)};V.metrics={dump:function(){let F,B=0,U=0,X=0;for(F in b.opIds){const K=W[F];B+=K.count,U+=K.time,X+=K.wait,K.avgTime=K.count&&K.time?K.time/K.count:0,K.avgWait=K.count&&K.wait?K.wait/K.count:0}t.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",W,`
Total of`,B,"op(s) for",U,"ms (incl. "+X+" ms of waiting on the async side)"),t.config.log("Serialization metrics:",W.s11n),l.postMessage({type:"opfs-async-metrics"})},reset:function(){let F;const B=X=>X.count=X.time=X.wait=0;for(F in b.opIds)B(W[F]=Object.create(null));let U=W.s11n=Object.create(null);U=U.serialize=Object.create(null),U.count=U.time=0,U=W.s11n.deserialize=Object.create(null),U.count=U.time=0}};const m=new j,w=new R().addOnDispose(()=>m.dispose());let Q;const _=F=>(Q=!0,w.dispose(),L(F)),h=()=>(Q=!1,P(t)),l=new Worker(new URL(""+new URL("sqlite3-opfs-async-proxy-CoS_Ozvq.js",self.location.href).href,self.location.href));setTimeout(()=>{Q===void 0&&_(new Error("Timeout while waiting for OPFS async proxy worker."))},4e3),l._originalOnError=l.onerror,l.onerror=function(F){M("Error initializing OPFS asyncer:",F),_(new Error("Loading OPFS async Worker failed for unknown reasons."))};const u=E.sqlite3_vfs_find(null),y=u?new R(u):null;m.$iVersion=1,w.$iVersion=2,w.$szOsFile=E.sqlite3_file.structInfo.sizeof,w.$mxPathname=1024,w.$zName=O.allocCString("opfs"),w.$xDlOpen=w.$xDlError=w.$xDlSym=w.$xDlClose=null,w.addOnDispose("$zName",w.$zName,"cleanup default VFS wrapper",()=>y?y.dispose():null);const b=Object.create(null);b.verbose=i.verbose,b.littleEndian=(()=>{const F=new ArrayBuffer(2);return new DataView(F).setInt16(0,256,!0),new Int16Array(F)[0]===256})(),b.asyncIdleWaitTime=150,b.asyncS11nExceptions=1,b.fileBufferSize=1024*64,b.sabS11nOffset=b.fileBufferSize,b.sabS11nSize=w.$mxPathname*2,b.sabIO=new SharedArrayBuffer(b.fileBufferSize+b.sabS11nSize),b.opIds=Object.create(null);const W=Object.create(null);{let F=0;b.opIds.whichOp=F++,b.opIds.rc=F++,b.opIds.xAccess=F++,b.opIds.xClose=F++,b.opIds.xDelete=F++,b.opIds.xDeleteNoWait=F++,b.opIds.xFileSize=F++,b.opIds.xLock=F++,b.opIds.xOpen=F++,b.opIds.xRead=F++,b.opIds.xSleep=F++,b.opIds.xSync=F++,b.opIds.xTruncate=F++,b.opIds.xUnlock=F++,b.opIds.xWrite=F++,b.opIds.mkdir=F++,b.opIds["opfs-async-metrics"]=F++,b.opIds["opfs-async-shutdown"]=F++,b.opIds.retry=F++,b.sabOP=new SharedArrayBuffer(F*4),V.metrics.reset()}b.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach(F=>{(b.sq3Codes[F]=E[F])===void 0&&q("Maintenance required: not found:",F)}),b.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,OPFS_UNLINK_BEFORE_OPEN:2,defaultUnlockAsap:!1});const Z=(F,...B)=>{const U=b.opIds[F]||q("Invalid op ID:",F);b.s11n.serialize(...B),Atomics.store(b.sabOPView,b.opIds.rc,-1),Atomics.store(b.sabOPView,b.opIds.whichOp,U),Atomics.notify(b.sabOPView,b.opIds.whichOp);const X=performance.now();Atomics.wait(b.sabOPView,b.opIds.rc,-1);const K=Atomics.load(b.sabOPView,b.opIds.rc);if(W[F].wait+=performance.now()-X,K&&b.asyncS11nExceptions){const ee=b.s11n.deserialize();ee&&M(F+"() async error:",...ee)}return K};V.debug={asyncShutdown:()=>{A("Shutting down OPFS async listener. The OPFS VFS will no longer work."),Z("opfs-async-shutdown")},asyncRestart:()=>{A("Attempting to restart OPFS VFS async listener. Might work, might not."),l.postMessage({type:"opfs-async-restart"})}};const se=()=>{if(b.s11n)return b.s11n;const F=new TextDecoder,B=new TextEncoder("utf-8"),U=new Uint8Array(b.sabIO,b.sabS11nOffset,b.sabS11nSize),X=new DataView(b.sabIO,b.sabS11nOffset,b.sabS11nSize);b.s11n=Object.create(null);const K=Object.create(null);K.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},K.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},K.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},K.string={id:4};const ee=p=>K[typeof p]||q("Maintenance required: this value type cannot be serialized.",p),H=p=>{switch(p){case K.number.id:return K.number;case K.bigint.id:return K.bigint;case K.boolean.id:return K.boolean;case K.string.id:return K.string;default:q("Invalid type ID:",p)}};return b.s11n.deserialize=function(p=!1){++W.s11n.deserialize.count;const f=performance.now(),S=U[0],k=S?[]:null;if(S){const C=[];let J=1,re,de,qe;for(re=0;re<S;++re,++J)C.push(H(U[J]));for(re=0;re<S;++re){const je=C[re];je.getter?(qe=X[je.getter](J,b.littleEndian),J+=je.size):(de=X.getInt32(J,b.littleEndian),J+=4,qe=F.decode(U.slice(J,J+de)),J+=de),k.push(qe)}}return p&&(U[0]=0),W.s11n.deserialize.time+=performance.now()-f,k},b.s11n.serialize=function(...p){const f=performance.now();if(++W.s11n.serialize.count,p.length){const S=[];let k=0,C=1;for(U[0]=p.length&255;k<p.length;++k,++C)S.push(ee(p[k])),U[C]=S[k].id;for(k=0;k<p.length;++k){const J=S[k];if(J.setter)X[J.setter](C,p[k],b.littleEndian),C+=J.size;else{const re=B.encode(p[k]);X.setInt32(C,re.byteLength,b.littleEndian),C+=4,U.set(re,C),C+=re.byteLength}}}else U[0]=0;W.s11n.serialize.time+=performance.now()-f},b.s11n},fe=function F(B=16){F._chars||(F._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789",F._n=F._chars.length);const U=[];let X=0;for(;X<B;++X){const K=Math.random()*(F._n*64)%F._n|0;U[X]=F._chars[K]}return U.join("")},ie=Object.create(null),ae=Object.create(null);ae.op=void 0,ae.start=void 0;const me=F=>{ae.start=performance.now(),ae.op=F,++W[F].count},ge=()=>W[ae.op].time+=performance.now()-ae.start,Ee={xCheckReservedLock:function(F,B){const U=ie[F];return O.poke(B,U.lockType?1:0,"i32"),0},xClose:function(F){me("xClose");let B=0;const U=ie[F];return U&&(delete ie[F],B=Z("xClose",F),U.sq3File&&U.sq3File.dispose()),ge(),B},xDeviceCharacteristics:function(F){return E.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(F,B,U){return E.SQLITE_NOTFOUND},xFileSize:function(F,B){me("xFileSize");let U=Z("xFileSize",F);if(U==0)try{const X=b.s11n.deserialize()[0];O.poke(B,X,"i64")}catch(X){M("Unexpected error reading xFileSize() result:",X),U=b.sq3Codes.SQLITE_IOERR}return ge(),U},xLock:function(F,B){me("xLock");const U=ie[F];let X=0;return U.lockType?U.lockType=B:(X=Z("xLock",F,B),X===0&&(U.lockType=B)),ge(),X},xRead:function(F,B,U,X){me("xRead");const K=ie[F];let ee;try{ee=Z("xRead",F,U,Number(X)),(ee===0||E.SQLITE_IOERR_SHORT_READ===ee)&&O.heap8u().set(K.sabView.subarray(0,U),B)}catch(H){M("xRead(",arguments,") failed:",H,K),ee=E.SQLITE_IOERR_READ}return ge(),ee},xSync:function(F,B){me("xSync"),++W.xSync.count;const U=Z("xSync",F,B);return ge(),U},xTruncate:function(F,B){me("xTruncate");const U=Z("xTruncate",F,Number(B));return ge(),U},xUnlock:function(F,B){me("xUnlock");const U=ie[F];let X=0;return E.SQLITE_LOCK_NONE===B&&U.lockType&&(X=Z("xUnlock",F,B)),X===0&&(U.lockType=B),ge(),X},xWrite:function(F,B,U,X){me("xWrite");const K=ie[F];let ee;try{K.sabView.set(O.heap8u().subarray(B,B+U)),ee=Z("xWrite",F,U,Number(X))}catch(H){M("xWrite(",arguments,") failed:",H,K),ee=E.SQLITE_IOERR_WRITE}return ge(),ee}},ve={xAccess:function(F,B,U,X){me("xAccess");const K=Z("xAccess",O.cstrToJs(B));return O.poke(X,K?0:1,"i32"),ge(),0},xCurrentTime:function(F,B){return O.poke(B,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(F,B){return O.poke(B,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(F,B,U){me("xDelete");const X=Z("xDelete",O.cstrToJs(B),U,!1);return ge(),X},xFullPathname:function(F,B,U,X){return O.cstrncpy(X,B,U)<U?0:E.SQLITE_CANTOPEN},xGetLastError:function(F,B,U){return A("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:function(B,U,X,K,ee){me("xOpen");let H=0;U===0?U=fe():O.isPtr(U)&&(E.sqlite3_uri_boolean(U,"opfs-unlock-asap",0)&&(H|=b.opfsFlags.OPFS_UNLOCK_ASAP),E.sqlite3_uri_boolean(U,"delete-before-open",0)&&(H|=b.opfsFlags.OPFS_UNLINK_BEFORE_OPEN),U=O.cstrToJs(U));const p=Object.create(null);p.fid=X,p.filename=U,p.sab=new SharedArrayBuffer(b.fileBufferSize),p.flags=K;const f=Z("xOpen",X,U,K,H);return f||(p.readOnly&&O.poke(ee,E.SQLITE_OPEN_READONLY,"i32"),ie[X]=p,p.sabView=b.sabFileBufView,p.sq3File=new x(X),p.sq3File.$pMethods=m.pointer,p.lockType=E.SQLITE_LOCK_NONE),ge(),f}};y&&(w.$xRandomness=y.$xRandomness,w.$xSleep=y.$xSleep),w.$xRandomness||(ve.xRandomness=function(F,B,U){const X=O.heap8u();let K=0;for(;K<B;++K)X[U+K]=Math.random()*255e3&255;return K}),w.$xSleep||(ve.xSleep=function(F,B){return Atomics.wait(b.sabOPView,b.opIds.xSleep,0,B),0}),V.getResolvedPath=function(F,B){const U=new URL(F,"file://irrelevant").pathname;return B?U.split("/").filter(X=>!!X):U},V.getDirForFilename=async function(B,U=!1){const X=V.getResolvedPath(B,!0),K=X.pop();let ee=V.rootDirectory;for(const H of X)H&&(ee=await ee.getDirectoryHandle(H,{create:!!U}));return[ee,K]},V.mkdir=async function(F){try{return await V.getDirForFilename(F+"/filepart",!0),!0}catch{return!1}},V.entryExists=async function(F){try{const[B,U]=await V.getDirForFilename(F);return await B.getFileHandle(U),!0}catch{return!1}},V.randomFilename=fe,V.treeList=async function(){const F=async function U(X,K){K.name=X.name,K.dirs=[],K.files=[];for await(const ee of X.values())if(ee.kind==="directory"){const H=Object.create(null);K.dirs.push(H),await U(ee,H)}else K.files.push(ee.name)},B=Object.create(null);return await F(V.rootDirectory,B),B},V.rmfr=async function(){const F=V.rootDirectory,B={recurse:!0};for await(const U of F.values())F.removeEntry(U.name,B)},V.unlink=async function(F,B=!1,U=!1){try{const[X,K]=await V.getDirForFilename(F,!1);return await X.removeEntry(K,{recursive:B}),!0}catch(X){if(U)throw new Error("unlink(",arguments[0],") failed: "+X.message,{cause:X});return!1}},V.traverse=async function(F){const B={recursive:!0,directory:V.rootDirectory};typeof F=="function"&&(F={callback:F}),F=Object.assign(B,F||{}),async function X(K,ee){for await(const H of K.values()){if(F.callback(H,K,ee)===!1)return!1;if(F.recursive&&H.kind==="directory"&&await X(H,ee+1)===!1)break}}(F.directory,0)};const De=async function(F,B){const[U,X]=await V.getDirForFilename(F,!0);let ee=await(await U.getFileHandle(X,{create:!0})).createSyncAccessHandle(),H=0,p,f=!1;try{for(ee.truncate(0);(p=await B())!==void 0;)p instanceof ArrayBuffer&&(p=new Uint8Array(p)),H===0&&p.byteLength>=15&&(T.affirmDbHeader(p),f=!0),ee.write(p,{at:H}),H+=p.byteLength;if((H<512||H%512!==0)&&q("Input size",H,"is not correct for an SQLite database."),!f){const S=new Uint8Array(20);ee.read(S,{at:0}),T.affirmDbHeader(S)}return ee.write(new Uint8Array([1,1]),{at:18}),H}catch(S){throw await ee.close(),ee=void 0,await U.removeEntry(X).catch(()=>{}),S}finally{ee&&await ee.close()}};if(V.importDb=async function(F,B){if(B instanceof Function)return De(F,B);B instanceof ArrayBuffer&&(B=new Uint8Array(B)),T.affirmIsDb(B);const U=B.byteLength,[X,K]=await V.getDirForFilename(F,!0);let ee,H=0;try{return ee=await(await X.getFileHandle(K,{create:!0})).createSyncAccessHandle(),ee.truncate(0),H=ee.write(B,{at:0}),H!=U&&q("Expected to write "+U+" bytes but wrote "+H+"."),ee.write(new Uint8Array([1,1]),{at:18}),H}catch(p){throw ee&&(await ee.close(),ee=void 0),await X.removeEntry(K).catch(()=>{}),p}finally{ee&&await ee.close()}},t.oo1){const F=function(...B){const U=t.oo1.DB.dbCtorHelper.normalizeArgs(...B);U.vfs=w.$zName,t.oo1.DB.dbCtorHelper.call(this,U)};F.prototype=Object.create(t.oo1.DB.prototype),t.oo1.OpfsDb=F,F.importDb=V.importDb,t.oo1.DB.dbCtorHelper.setVfsPostOpenSql(w.pointer,function(B,U){U.capi.sqlite3_busy_timeout(B,1e4),U.capi.sqlite3_exec(B,["pragma journal_mode=DELETE;","pragma cache_size=-16384;"],0,0,0)})}const Ie=function(){const F=O.scopedAllocPush(),B=new x;try{const U=B.pointer,X=E.SQLITE_OPEN_CREATE|E.SQLITE_OPEN_READWRITE|E.SQLITE_OPEN_MAIN_DB,K=O.scopedAlloc(8),ee="/sanity/check/file"+fe(8),H=O.scopedAllocCString(ee);let p;if(b.s11n.serialize("This is  string."),p=b.s11n.deserialize(),I("deserialize() says:",p),p[0]!=="This is  string."&&q("String d13n error."),ve.xAccess(w.pointer,H,0,K),p=O.peek(K,"i32"),I("xAccess(",ee,") exists ?=",p),p=ve.xOpen(w.pointer,H,U,X,K),I("open rc =",p,"state.sabOPView[xOpen] =",b.sabOPView[b.opIds.xOpen]),p!==0){M("open failed with code",p);return}ve.xAccess(w.pointer,H,0,K),p=O.peek(K,"i32"),p||q("xAccess() failed to detect file."),p=Ee.xSync(B.pointer,0),p&&q("sync failed w/ rc",p),p=Ee.xTruncate(B.pointer,1024),p&&q("truncate failed w/ rc",p),O.poke(K,0,"i64"),p=Ee.xFileSize(B.pointer,K),p&&q("xFileSize failed w/ rc",p),I("xFileSize says:",O.peek(K,"i64")),p=Ee.xWrite(B.pointer,H,10,1),p&&q("xWrite() failed!");const f=O.scopedAlloc(16);p=Ee.xRead(B.pointer,f,6,2),O.poke(f+6,0);let S=O.cstrToJs(f);I("xRead() got:",S),S!=="sanity"&&q("Unexpected xRead() value."),ve.xSleep&&(I("xSleep()ing before close()ing..."),ve.xSleep(w.pointer,2e3),I("waking up from xSleep()")),p=Ee.xClose(U),I("xClose rc =",p,"sabOPView =",b.sabOPView),I("Deleting file:",ee),ve.xDelete(w.pointer,H,4660),ve.xAccess(w.pointer,H,0,K),p=O.peek(K,"i32"),p&&q("Expecting 0 from xAccess(",ee,") after xDelete()."),A("End of OPFS sanity checks.")}finally{B.dispose(),O.scopedAllocPop(F)}};l.onmessage=function({data:F}){switch(F.type){case"opfs-unavailable":_(new Error(F.payload.join(" ")));break;case"opfs-async-loaded":l.postMessage({type:"opfs-async-init",args:b});break;case"opfs-async-inited":{if(Q===!0)break;try{t.vfs.installVfs({io:{struct:m,methods:Ee},vfs:{struct:w,methods:ve}}),b.sabOPView=new Int32Array(b.sabOP),b.sabFileBufView=new Uint8Array(b.sabIO,0,b.fileBufferSize),b.sabS11nView=new Uint8Array(b.sabIO,b.sabS11nOffset,b.sabS11nSize),se(),i.sanityChecks&&(A("Running sanity checks because of opfs-sanity-check URL arg..."),Ie()),c()?navigator.storage.getDirectory().then(B=>{l.onerror=l._originalOnError,delete l._originalOnError,t.opfs=V,V.rootDirectory=B,I("End of OPFS sqlite3_vfs setup.",w),h()}).catch(_):h()}catch(B){M(B),_(B)}break}default:{const B="Unexpected message from the OPFS async worker: "+JSON.stringify(F);M(B),_(new Error(B));break}}}}))};s.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push(async r=>{try{let i=s.defaultProxyUri;return r.scriptInfo.sqlite3Dir&&(s.defaultProxyUri=r.scriptInfo.sqlite3Dir+i),s().catch(a=>{r.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",a.message)})}catch(i){return r.config.error("installOpfsVfs() exception:",i),Promise.reject(i)}})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){var ie,ae,me,ge,Ee,ve,De,Ie,F,B,U,X,St,ee;const s=t.util.toss,r=t.util.toss3,i=Object.create(null),a=t.capi,d=t.util,g=t.wasm,P=4096,L=512,z=4,G=8,I=L+z,A=L,M=I,q=P,E=a.SQLITE_OPEN_MAIN_DB|a.SQLITE_OPEN_MAIN_JOURNAL|a.SQLITE_OPEN_SUPER_JOURNAL|a.SQLITE_OPEN_WAL,T=".opaque",O=()=>Math.random().toString(36).slice(2),R=new TextDecoder,x=new TextEncoder,j=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2}),V=[t.config.error,t.config.warn,t.config.log];t.config.log;const c=t.config.warn;t.config.error;const m=new Map,w=H=>m.get(H),Q=(H,p)=>{p?m.set(H,p):m.delete(H)},_=new Map,h=H=>_.get(H),l=(H,p)=>{p?_.set(H,p):_.delete(H)},u={xCheckReservedLock:function(H,p){const f=h(H);return f.log("xCheckReservedLock"),f.storeErr(),g.poke32(p,1),0},xClose:function(H){const p=h(H);p.storeErr();const f=p.getOFileForS3File(H);if(f)try{p.log(`xClose ${f.path}`),p.mapS3FileToOFile(H,!1),f.sah.flush(),f.flags&a.SQLITE_OPEN_DELETEONCLOSE&&p.deletePath(f.path)}catch(S){return p.storeErr(S,a.SQLITE_IOERR)}return 0},xDeviceCharacteristics:function(H){return a.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(H,p,f){return a.SQLITE_NOTFOUND},xFileSize:function(H,p){const f=h(H);f.log("xFileSize");const k=f.getOFileForS3File(H).sah.getSize()-q;return g.poke64(p,BigInt(k)),0},xLock:function(H,p){const f=h(H);f.log(`xLock ${p}`),f.storeErr();const S=f.getOFileForS3File(H);return S.lockType=p,0},xRead:function(H,p,f,S){const k=h(H);k.storeErr();const C=k.getOFileForS3File(H);k.log(`xRead ${C.path} ${f} @ ${S}`);try{const J=C.sah.read(g.heap8u().subarray(p,p+f),{at:q+Number(S)});return J<f?(g.heap8u().fill(0,p+J,p+f),a.SQLITE_IOERR_SHORT_READ):0}catch(J){return k.storeErr(J,a.SQLITE_IOERR)}},xSectorSize:function(H){return P},xSync:function(H,p){const f=h(H);f.log(`xSync ${p}`),f.storeErr();const S=f.getOFileForS3File(H);try{return S.sah.flush(),0}catch(k){return f.storeErr(k,a.SQLITE_IOERR)}},xTruncate:function(H,p){const f=h(H);f.log(`xTruncate ${p}`),f.storeErr();const S=f.getOFileForS3File(H);try{return S.sah.truncate(q+Number(p)),0}catch(k){return f.storeErr(k,a.SQLITE_IOERR)}},xUnlock:function(H,p){const f=h(H);f.log("xUnlock");const S=f.getOFileForS3File(H);return S.lockType=p,0},xWrite:function(H,p,f,S){const k=h(H);k.storeErr();const C=k.getOFileForS3File(H);k.log(`xWrite ${C.path} ${f} ${S}`);try{const J=C.sah.write(g.heap8u().subarray(p,p+f),{at:q+Number(S)});return f===J?0:s("Unknown write() failure.")}catch(J){return k.storeErr(J,a.SQLITE_IOERR)}}},y=new a.sqlite3_io_methods;y.$iVersion=1,t.vfs.installVfs({io:{struct:y,methods:u}});const b={xAccess:function(H,p,f,S){const k=w(H);k.storeErr();try{const C=k.getPath(p);g.poke32(S,k.hasFilename(C)?1:0)}catch{g.poke32(S,0)}return 0},xCurrentTime:function(H,p){return g.poke(p,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(H,p){return g.poke(p,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(H,p,f){const S=w(H);S.log(`xDelete ${g.cstrToJs(p)}`),S.storeErr();try{return S.deletePath(S.getPath(p)),0}catch(k){return S.storeErr(k),a.SQLITE_IOERR_DELETE}},xFullPathname:function(H,p,f,S){return g.cstrncpy(S,p,f)<f?0:a.SQLITE_CANTOPEN},xGetLastError:function(H,p,f){const S=w(H),k=S.popErr();if(S.log(`xGetLastError ${p} e =`,k),k){const C=g.scopedAllocPush();try{const[J,re]=g.scopedAllocCString(k.message,!0);g.cstrncpy(f,J,p),re>p&&g.poke8(f+p-1,0)}catch{return a.SQLITE_NOMEM}finally{g.scopedAllocPop(C)}}return k?k.sqlite3Rc||a.SQLITE_IOERR:0},xOpen:function(p,f,S,k,C){const J=w(p);try{J.log(`xOpen ${g.cstrToJs(f)} ${k}`);const re=f&&g.peek8(f)?J.getPath(f):O();let de=J.getSAHForPath(re);!de&&k&a.SQLITE_OPEN_CREATE&&(J.getFileCount()<J.getCapacity()?(de=J.nextAvailableSAH(),J.setAssociatedPath(de,re,k)):s("SAH pool is full. Cannot create file",re)),de||s("file not found:",re);const qe={path:re,flags:k,sah:de};J.mapS3FileToOFile(S,qe),qe.lockType=a.SQLITE_LOCK_NONE;const je=new a.sqlite3_file(S);return je.$pMethods=y.pointer,je.dispose(),g.poke32(C,k),0}catch(re){return J.storeErr(re),a.SQLITE_CANTOPEN}}},W=function(H){t.capi.sqlite3_vfs_find(H)&&r("VFS name is already registered:",H);const p=new a.sqlite3_vfs,f=a.sqlite3_vfs_find(null),S=f?new a.sqlite3_vfs(f):null;return p.$iVersion=2,p.$szOsFile=a.sqlite3_file.structInfo.sizeof,p.$mxPathname=L,p.addOnDispose(p.$zName=g.allocCString(H),()=>Q(p.pointer,0)),S&&(p.$xRandomness=S.$xRandomness,p.$xSleep=S.$xSleep,S.dispose()),!p.$xRandomness&&!b.xRandomness&&(b.xRandomness=function(k,C,J){const re=g.heap8u();let de=0;for(;de<C;++de)re[J+de]=Math.random()*255e3&255;return de}),!p.$xSleep&&!b.xSleep&&(b.xSleep=(k,C)=>0),t.vfs.installVfs({vfs:{struct:p,methods:b}}),p};class Z{constructor(p=Object.create(null)){Me(this,X);Be(this,"vfsDir");Me(this,ie);Me(this,ae);Me(this,me);Me(this,ge,new Map);Me(this,Ee,new Map);Me(this,ve,new Set);Me(this,De,new Map);Me(this,Ie,new Uint8Array(I));Me(this,F);Me(this,B);Me(this,U);Qe(this,U,p.verbosity??j.verbosity),this.vfsName=p.name||j.name,Qe(this,B,W(this.vfsName)),Q(te(this,B).pointer,this),this.vfsDir=p.directory||"."+this.vfsName,Qe(this,F,new DataView(te(this,Ie).buffer,te(this,Ie).byteOffset)),this.isReady=this.reset(!!(p.clearOnInit??j.clearOnInit)).then(()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(p.initialCapacity||j.initialCapacity)})}log(...p){vt(this,X,St).call(this,2,...p)}warn(...p){vt(this,X,St).call(this,1,...p)}error(...p){vt(this,X,St).call(this,0,...p)}getVfs(){return te(this,B)}getCapacity(){return te(this,ge).size}getFileCount(){return te(this,Ee).size}getFileNames(){const p=[],f=te(this,Ee).keys();for(const S of f)p.push(S);return p}async addCapacity(p){for(let f=0;f<p;++f){const S=O(),C=await(await te(this,ae).getFileHandle(S,{create:!0})).createSyncAccessHandle();te(this,ge).set(C,S),this.setAssociatedPath(C,"",0)}return this.getCapacity()}async reduceCapacity(p){let f=0;for(const S of Array.from(te(this,ve))){if(f===p||this.getFileCount()===this.getCapacity())break;const k=te(this,ge).get(S);S.close(),await te(this,ae).removeEntry(k),te(this,ge).delete(S),te(this,ve).delete(S),++f}return f}releaseAccessHandles(){for(const p of te(this,ge).keys())p.close();te(this,ge).clear(),te(this,Ee).clear(),te(this,ve).clear()}async acquireAccessHandles(p){const f=[];for await(const[S,k]of te(this,ae))k.kind==="file"&&f.push([S,k]);return Promise.all(f.map(async([S,k])=>{try{const C=await k.createSyncAccessHandle();if(te(this,ge).set(C,S),p)C.truncate(q),this.setAssociatedPath(C,"",0);else{const J=this.getAssociatedPath(C);J?te(this,Ee).set(J,C):te(this,ve).add(C)}}catch(C){throw this.storeErr(C),this.releaseAccessHandles(),C}}))}getAssociatedPath(p){p.read(te(this,Ie),{at:0});const f=te(this,F).getUint32(A);if(te(this,Ie)[0]&&(f&a.SQLITE_OPEN_DELETEONCLOSE||!(f&E)))return c(`Removing file with unexpected flags ${f.toString(16)}`,te(this,Ie)),this.setAssociatedPath(p,"",0),"";const S=new Uint32Array(G/4);p.read(S,{at:M});const k=this.computeDigest(te(this,Ie));if(S.every((C,J)=>C===k[J])){const C=te(this,Ie).findIndex(J=>J===0);return C===0&&p.truncate(q),C?R.decode(te(this,Ie).subarray(0,C)):""}else return c("Disassociating file with bad digest."),this.setAssociatedPath(p,"",0),""}setAssociatedPath(p,f,S){const k=x.encodeInto(f,te(this,Ie));L<=k.written+1&&s("Path too long:",f),te(this,Ie).fill(0,k.written,L),te(this,F).setUint32(A,S);const C=this.computeDigest(te(this,Ie));p.write(te(this,Ie),{at:0}),p.write(C,{at:M}),p.flush(),f?(te(this,Ee).set(f,p),te(this,ve).delete(p)):(p.truncate(q),te(this,ve).add(p))}computeDigest(p){let f=3735928559,S=1103547991;for(const k of p)f=31*f+k*307,S=31*S+k*307;return new Uint32Array([f>>>0,S>>>0])}async reset(p){await this.isReady;let f=await navigator.storage.getDirectory(),S;for(const k of this.vfsDir.split("/"))k&&(S=f,f=await f.getDirectoryHandle(k,{create:!0}));return Qe(this,ie,f),Qe(this,me,S),Qe(this,ae,await te(this,ie).getDirectoryHandle(T,{create:!0})),this.releaseAccessHandles(),this.acquireAccessHandles(p)}getPath(p){return g.isPtr(p)&&(p=g.cstrToJs(p)),(p instanceof URL?p:new URL(p,"file://localhost/")).pathname}deletePath(p){const f=te(this,Ee).get(p);return f&&(te(this,Ee).delete(p),this.setAssociatedPath(f,"",0)),!!f}storeErr(p,f){return p&&(p.sqlite3Rc=f||a.SQLITE_IOERR,this.error(p)),this.$error=p,f}popErr(){const p=this.$error;return this.$error=void 0,p}nextAvailableSAH(){const[p]=te(this,ve).keys();return p}getOFileForS3File(p){return te(this,De).get(p)}mapS3FileToOFile(p,f){f?(te(this,De).set(p,f),l(p,this)):(te(this,De).delete(p),l(p,!1))}hasFilename(p){return te(this,Ee).has(p)}getSAHForPath(p){return te(this,Ee).get(p)}async removeVfs(){if(!te(this,B).pointer||!te(this,ae))return!1;a.sqlite3_vfs_unregister(te(this,B).pointer),te(this,B).dispose();try{this.releaseAccessHandles(),await te(this,ie).removeEntry(T,{recursive:!0}),Qe(this,ae,void 0),await te(this,me).removeEntry(te(this,ie).name,{recursive:!0}),Qe(this,ie,Qe(this,me,void 0))}catch(p){t.config.error(this.vfsName,"removeVfs() failed:",p)}return!0}exportFile(p){const f=te(this,Ee).get(p)||s("File not found:",p),S=f.getSize()-q,k=new Uint8Array(S>0?S:0);if(S>0){const C=f.read(k,{at:q});C!=S&&s("Expected to read "+S+" bytes but read "+C+".")}return k}async importDbChunked(p,f){const S=te(this,Ee).get(p)||this.nextAvailableSAH()||s("No available handles to import to.");S.truncate(0);let k=0,C,J=!1;try{for(;(C=await f())!==void 0;)C instanceof ArrayBuffer&&(C=new Uint8Array(C)),k===0&&C.byteLength>=15&&(d.affirmDbHeader(C),J=!0),S.write(C,{at:q+k}),k+=C.byteLength;if((k<512||k%512!==0)&&s("Input size",k,"is not correct for an SQLite database."),!J){const re=new Uint8Array(20);S.read(re,{at:0}),d.affirmDbHeader(re)}S.write(new Uint8Array([1,1]),{at:q+18})}catch(re){throw this.setAssociatedPath(S,"",0),re}return this.setAssociatedPath(S,p,a.SQLITE_OPEN_MAIN_DB),k}importDb(p,f){if(f instanceof ArrayBuffer)f=new Uint8Array(f);else if(f instanceof Function)return this.importDbChunked(p,f);const S=te(this,Ee).get(p)||this.nextAvailableSAH()||s("No available handles to import to."),k=f.byteLength;(k<512||k%512!=0)&&s("Byte array size is invalid for an SQLite db.");const C="SQLite format 3";for(let re=0;re<C.length;++re)C.charCodeAt(re)!==f[re]&&s("Input does not contain an SQLite database header.");const J=S.write(f,{at:q});return J!=k?(this.setAssociatedPath(S,"",0),s("Expected to write "+k+" bytes but wrote "+J+".")):(S.write(new Uint8Array([1,1]),{at:q+18}),this.setAssociatedPath(S,p,a.SQLITE_OPEN_MAIN_DB)),J}}ie=new WeakMap,ae=new WeakMap,me=new WeakMap,ge=new WeakMap,Ee=new WeakMap,ve=new WeakMap,De=new WeakMap,Ie=new WeakMap,F=new WeakMap,B=new WeakMap,U=new WeakMap,X=new WeakSet,St=function(p,...f){te(this,U)>p&&V[p](this.vfsName+":",...f)};class se{constructor(p){Me(this,ee);Qe(this,ee,p),this.vfsName=p.vfsName}async addCapacity(p){return te(this,ee).addCapacity(p)}async reduceCapacity(p){return te(this,ee).reduceCapacity(p)}getCapacity(){return te(this,ee).getCapacity(te(this,ee))}getFileCount(){return te(this,ee).getFileCount()}getFileNames(){return te(this,ee).getFileNames()}async reserveMinimumCapacity(p){const f=te(this,ee).getCapacity();return f<p?te(this,ee).addCapacity(p-f):f}exportFile(p){return te(this,ee).exportFile(p)}importDb(p,f){return te(this,ee).importDb(p,f)}async wipeFiles(){return te(this,ee).reset(!0)}unlink(p){return te(this,ee).deletePath(p)}async removeVfs(){return te(this,ee).removeVfs()}}ee=new WeakMap;const fe=async()=>{const H=await navigator.storage.getDirectory(),p=".opfs-sahpool-sync-check-"+O(),k=(await(await H.getFileHandle(p,{create:!0})).createSyncAccessHandle()).close();return await k,await H.removeEntry(p),k!=null&&k.then&&s("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0};t.installOpfsSAHPoolVfs=async function(H=Object.create(null)){var f;const p=H.name||j.name;return i[p]?i[p]:!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!((f=navigator==null?void 0:navigator.storage)!=null&&f.getDirectory)?i[p]=Promise.reject(new Error("Missing required OPFS APIs.")):i[p]=fe().then(async function(){if(H.$testThrowInInit)throw H.$testThrowInInit;const S=new Z(H);return S.isReady.then(async()=>{const k=new se(S);if(t.oo1){const C=t.oo1,J=S.getVfs(),re=function(...de){const qe=C.DB.dbCtorHelper.normalizeArgs(...de);qe.vfs=J.$zName,C.DB.dbCtorHelper.call(this,qe)};re.prototype=Object.create(C.DB.prototype),k.OpfsSAHPoolDb=re,C.DB.dbCtorHelper.setVfsPostOpenSql(J.pointer,function(de,qe){qe.capi.sqlite3_exec(de,["pragma journal_mode=DELETE;","pragma cache_size=-16384;"],0,0,0)})}return S.log("VFS initialized."),k}).catch(async k=>{throw await S.removeVfs().catch(()=>{}),k})}).catch(S=>i[p]=Promise.reject(S))}}),typeof n<"u"){const t=Object.assign(Object.create(null),{exports:typeof wasmExports>"u"?n.asm:wasmExports,memory:n.wasmMemory},globalThis.sqlite3ApiConfig||{});globalThis.sqlite3ApiConfig=t;let s;try{s=globalThis.sqlite3ApiBootstrap()}catch(r){throw console.error("sqlite3ApiBootstrap() error:",r),r}finally{delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig}n.sqlite3=s}else console.warn("This is not running in an Emscripten module context, so","globalThis.sqlite3ApiBootstrap() is _not_ being called due to lack","of config info for the WASM environment.","It must be called manually.")}),Y.ready}})();kt=function(){var Y,e;const N=kt;if(!N)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");const D=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:(Y=globalThis==null?void 0:globalThis.document)==null?void 0:Y.currentScript,isWorker:typeof WorkerGlobalScope<"u",location:globalThis.location,urlParams:(e=globalThis==null?void 0:globalThis.location)!=null&&e.href?new URL(globalThis.location.href).searchParams:new URLSearchParams});if(D.debugModule=D.urlParams.has("sqlite3.debugModule")?(...$)=>console.warn("sqlite3.debugModule:",...$):()=>{},D.urlParams.has("sqlite3.dir"))D.sqlite3Dir=D.urlParams.get("sqlite3.dir")+"/";else if(D.moduleScript){const $=D.moduleScript.src.split("/");$.pop(),D.sqlite3Dir=$.join("/")+"/"}if(globalThis.sqlite3InitModule=function $(...oe){return N(...oe).then(ce=>{const le=ce.sqlite3;le.scriptInfo=D,$.__isUnderTest&&(le.__isUnderTest=!0);const Se=le.asyncPostInit;return delete le.asyncPostInit,Se()}).catch(ce=>{throw console.error("Exception loading sqlite3 module:",ce),ce})},globalThis.sqlite3InitModule.ready=N.ready,globalThis.sqlite3InitModuleState.moduleScript){const $=globalThis.sqlite3InitModuleState;let oe=$.moduleScript.src.split("/");oe.pop(),$.scriptDir=oe.join("/")+"/"}return D.debugModule("sqlite3InitModuleState =",D),globalThis.sqlite3InitModule}();var Sn=kt;globalThis.sqlite3Worker1Promiser=function N(D=N.defaultConfig){if(arguments.length===1&&typeof arguments[0]=="function"){const ne=D;D=Object.assign(Object.create(null),N.defaultConfig),D.onready=ne}else D=Object.assign(Object.create(null),N.defaultConfig,D);const Y=Object.create(null),e=function(){},$=D.onerror||e,oe=D.debug||e,ce=D.generateMessageId?void 0:Object.create(null),le=D.generateMessageId||function(ne){return ne.type+"#"+(ce[ne.type]=(ce[ne.type]||0)+1)},Se=(...ne)=>{throw new Error(ne.join(" "))};D.worker||(D.worker=N.defaultConfig.worker),typeof D.worker=="function"&&(D.worker=D.worker());let be,Ae;return D.worker.onmessage=function(ne){ne=ne.data,oe("worker1.onmessage",ne);let _e=Y[ne.messageId];if(!_e){if(ne&&ne.type==="sqlite3-api"&&ne.result==="worker1-ready"){D.onready&&D.onready(Ae);return}if(_e=Y[ne.type],_e&&_e.onrow){_e.onrow(ne);return}D.onunhandled?D.onunhandled(arguments[0]):$("sqlite3Worker1Promiser() unhandled worker message:",ne);return}switch(delete Y[ne.messageId],ne.type){case"error":_e.reject(ne);return;case"open":be||(be=ne.dbId);break;case"close":ne.dbId===be&&(be=void 0);break}try{_e.resolve(ne)}catch(Le){_e.reject(Le)}},Ae=function(){let ne;arguments.length===1?ne=arguments[0]:arguments.length===2?(ne=Object.create(null),ne.type=arguments[0],ne.args=arguments[1],ne.dbId=ne.args.dbId):Se("Invalid arguments for sqlite3Worker1Promiser()-created factory."),!ne.dbId&&ne.type!=="open"&&(ne.dbId=be),ne.messageId=le(ne),ne.departureTime=performance.now();const _e=Object.create(null);_e.message=ne;let Le;ne.type==="exec"&&ne.args&&(typeof ne.args.callback=="function"?(Le=ne.messageId+":row",_e.onrow=ne.args.callback,ne.args.callback=Le,Y[Le]=_e):typeof ne.args.callback=="string"&&Se("exec callback may not be a string when using the Promise interface."));let Ue=new Promise(function(et,Ke){_e.resolve=et,_e.reject=Ke,Y[ne.messageId]=_e,oe("Posting",ne.type,"message to Worker dbId="+(be||"default")+":",ne),D.worker.postMessage(ne)});return Le&&(Ue=Ue.finally(()=>delete Y[Le])),Ue}},globalThis.sqlite3Worker1Promiser.defaultConfig={worker:function(){return new Worker(new URL(""+new URL("sqlite3-worker1-bundler-friendly-CE91Iu3U.js",self.location.href).href,self.location.href),{type:"module"})},onerror:(...N)=>console.error("worker1 promiser error",...N)},sqlite3Worker1Promiser.v2=(function(N){let D;typeof N=="function"?(D=N,N={}):typeof(N==null?void 0:N.onready)=="function"&&(D=N.onready,delete N.onready);const Y=Object.create(null);N=Object.assign(N||Object.create(null),{onready:async function($){try{D&&await D($),Y.resolve($)}catch(oe){Y.reject(oe)}}});const e=new Promise(function($,oe){Y.resolve=$,Y.reject=oe});try{this.original(N)}catch($){Y.reject($)}return e}).bind({original:sqlite3Worker1Promiser}),sqlite3Worker1Promiser.v2;const xn=(...N)=>console.log(...N),Qt=(...N)=>console.error(...N);class An{constructor(){Be(this,"sqlite3");Be(this,"name");Be(this,"db");Be(this,"columns",new Set);Be(this,"currentHash",null);Be(this,"currentDateString",null);this.initDB()}async initDB(){try{if(this.sqlite3=await Sn({print:xn,printErr:Qt}),"opfs"in this.sqlite3)return!0;throw"browser support for OPFS is missing"}catch(D){return Qt(D.name,D.message),!1}}setDbName(D,Y){this.name="web3d_db/"+D+"/"+Y}initTable(D=!0){return this.openDB(),this.db.exec("BEGIN TRANSACTION"),D&&(this.db.exec("DROP TABLE IF EXISTS ATTRIBUTES"),this.db.exec("DROP TABLE IF EXISTS HASH"),this.db.exec("DROP INDEX IF EXISTS FULLNAME")),this.db.exec("CREATE TABLE IF NOT EXISTS ATTRIBUTES(FULLNAME text, OWNER text, DATA jsonb)"),this.db.exec("CREATE TABLE IF NOT EXISTS HASH(MD5 text, DATESTRING text)"),this.db.exec("COMMIT"),this.closeDB(),!0}openDB(){this.db=new this.sqlite3.oo1.OpfsDb(`/${this.name}.sqlite3`,"c")}closeDB(){this.db.close()}async updateHash(D,Y){if(D)this.openDB(),this.db.exec("BEGIN TRANSACTION"),this.db.exec(`INSERT INTO HASH(MD5, DATESTRING) values('${D}', '${Y}')`),this.db.exec("COMMIT"),this.closeDB(),this.currentHash=D,this.currentDateString=Y;else try{this.openDB();const $=this.db.exec("SELECT MD5,DATESTRING  from HASH limit 1",{returnValue:"resultRows"})[0];this.currentHash=$[0],this.currentDateString=$[1],this.closeDB()}catch{this.initTable()}}async insertData(D,Y,e){this.setDbName(Y,e),this.openDB();try{this.db.exec("BEGIN TRANSACTION");const $=this.db.prepare("INSERT INTO ATTRIBUTES(FULLNAME, DATA) VALUES(?,jsonb(?))");D.forEach((oe,ce)=>{const le=JSON.stringify(oe);$.bind([ce,le]),$.stepReset()}),D.clear(),$.finalize(),this.db.exec("COMMIT")}catch($){console.error($)}this.closeDB()}async loadE3dAttributeFile(D,Y,e,$,oe){this.setDbName(Y,$),this.currentHash=null,await this.updateHash();const ce=await Wt(D,e,$,!0);if(!ce.ok)return{success:!1,msg:"Unable to get file"};const le=ce.headers.get("content-md5"),Se=ce.headers.get("x-ms-meta-original_size")||"0",be=ce.headers.get("date")||"unknown";if(!le)return console.warn("attribute file missing hash",e,$),{success:!1,msg:"Attribute file missing hash"};if(this.currentHash===le)return console.log("Attribute is up to date - no update needed"),{success:!0,msg:"Attribute is up to date - no update needed"};const Ae=new BroadcastChannel(oe);Ae.postMessage("Downloading file"),this.initTable(!0);const ne=await Wt(D,e,$);if(ne&&ne.ok&&ne.body){const _e=ne.body.getReader(),Le=new TextDecoder;let Ue="",et=!0,Ke="";const tt=this,Re=new Map;let Xe=0;const He=parseInt(Se)/1024;return await _e.read().then(async function ht({done:gt,value:lt}){const Ye=(Ue||"")+Le.decode(lt);Xe+=(lt||[]).length;const Tt=Xe/1024/1024;Ae.postMessage(`Parsed ${Tt.toFixed(0)}/${He.toFixed(0)}MB`);const Ce=Ye.split(`
`);et&&(Ce.reverse(),Ce.pop(),Ce.pop(),Ce.pop(),Ce.pop(),Ce.reverse(),et=!1),Ue&&Ce.length&&(Ce[0]=Ue+Ce[0]),gt||(Ue=Ce.pop());for(const yt of Ce){const[Ve,Oe]=yt.split(":=").map(We=>We.trim());if(Oe){const We=Re.get(Ke);if(We){const nt=Oe==null?void 0:Oe.replaceAll("'","");nt&&nt!=="unset"&&nt!=="Nulref"&&(We[Ve]=nt)}}else{Ve.trim().startsWith("NEW")&&Ve!=="NEW /*"&&(Ke=Ve.replace("NEW ",""),Re.size>1e4&&tt.insertData(Re,Y,$),Re.set(Ke,{}));continue}}if(!gt)return _e.read().then(ht)}),Re.size&&await tt.insertData(Re,Y,$),await this.updateHash(le,be),{success:!0,msg:`Ready, select something in model, date of data is ${be}`}}else return{success:!1,msg:"Unable to get file/file missing/or access missing"}}async selectData(D,Y,e,$){this.setDbName(D,Y),this.openDB();let oe,ce="";console.time("query");try{oe=this.db.exec({sql:e,bind:$,returnValue:"resultRows"})}catch(le){oe=null,ce=(le==null?void 0:le.message)||"Unknown error, click F12 to see error in console ",console.error(le)}return console.timeEnd("query"),this.closeDB(),[oe,ce]}}xt(An)})();
