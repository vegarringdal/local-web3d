var ze=Object.defineProperty;var Pe=(A,p,S)=>p in A?ze(A,p,{enumerable:!0,configurable:!0,writable:!0,value:S}):A[p]=S;var L=(A,p,S)=>(Pe(A,typeof p!="symbol"?p+"":p,S),S);(function(){"use strict";/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const A=Symbol("Comlink.proxy"),p=Symbol("Comlink.endpoint"),S=Symbol("Comlink.releaseProxy"),q=Symbol("Comlink.finalizer"),B=Symbol("Comlink.thrown"),ne=n=>typeof n=="object"&&n!==null||typeof n=="function",fe={canHandle:n=>ne(n)&&n[A],serialize(n){const{port1:e,port2:t}=new MessageChannel;return Z(n,e),[t,[t]]},deserialize(n){return n.start(),we(n)}},ge={canHandle:n=>ne(n)&&B in n,serialize({value:n}){let e;return n instanceof Error?e={isError:!0,value:{message:n.message,name:n.name,stack:n.stack}}:e={isError:!1,value:n},[e,[]]},deserialize(n){throw n.isError?Object.assign(new Error(n.value.message),n.value):n.value}},re=new Map([["proxy",fe],["throw",ge]]);function be(n,e){for(const t of n)if(e===t||t==="*"||t instanceof RegExp&&t.test(e))return!0;return!1}function Z(n,e=globalThis,t=["*"]){e.addEventListener("message",function r(s){if(!s||!s.data)return;if(!be(t,s.origin)){console.warn(`Invalid origin '${s.origin}' for comlink proxy`);return}const{id:i,type:_,path:c}=Object.assign({path:[]},s.data),f=(s.data.argumentList||[]).map(v);let b;try{const w=c.slice(0,-1).reduce((m,y)=>m[y],n),h=c.reduce((m,y)=>m[y],n);switch(_){case"GET":b=h;break;case"SET":w[c.slice(-1)[0]]=v(s.data.value),b=!0;break;case"APPLY":b=h.apply(w,f);break;case"CONSTRUCT":{const m=new h(...f);b=xe(m)}break;case"ENDPOINT":{const{port1:m,port2:y}=new MessageChannel;Z(n,y),b=pe(m,[m])}break;case"RELEASE":b=void 0;break;default:return}}catch(w){b={value:w,[B]:0}}Promise.resolve(b).catch(w=>({value:w,[B]:0})).then(w=>{const[h,m]=H(w);e.postMessage(Object.assign(Object.assign({},h),{id:i}),m),_==="RELEASE"&&(e.removeEventListener("message",r),se(e),q in n&&typeof n[q]=="function"&&n[q]())}).catch(w=>{const[h,m]=H({value:new TypeError("Unserializable return value"),[B]:0});e.postMessage(Object.assign(Object.assign({},h),{id:i}),m)})}),e.start&&e.start()}function de(n){return n.constructor.name==="MessagePort"}function se(n){de(n)&&n.close()}function we(n,e){return J(n,[],e)}function D(n){if(n)throw new Error("Proxy has been released and is not useable")}function oe(n){return R(n,{type:"RELEASE"}).then(()=>{se(n)})}const W=new WeakMap,I="FinalizationRegistry"in globalThis&&new FinalizationRegistry(n=>{const e=(W.get(n)||0)-1;W.set(n,e),e===0&&oe(n)});function me(n,e){const t=(W.get(e)||0)+1;W.set(e,t),I&&I.register(n,e,n)}function he(n){I&&I.unregister(n)}function J(n,e=[],t=function(){}){let r=!1;const s=new Proxy(t,{get(i,_){if(D(r),_===S)return()=>{he(s),oe(n),r=!0};if(_==="then"){if(e.length===0)return{then:()=>s};const c=R(n,{type:"GET",path:e.map(f=>f.toString())}).then(v);return c.then.bind(c)}return J(n,[...e,_])},set(i,_,c){D(r);const[f,b]=H(c);return R(n,{type:"SET",path:[...e,_].map(w=>w.toString()),value:f},b).then(v)},apply(i,_,c){D(r);const f=e[e.length-1];if(f===p)return R(n,{type:"ENDPOINT"}).then(v);if(f==="bind")return J(n,e.slice(0,-1));const[b,w]=_e(c);return R(n,{type:"APPLY",path:e.map(h=>h.toString()),argumentList:b},w).then(v)},construct(i,_){D(r);const[c,f]=_e(_);return R(n,{type:"CONSTRUCT",path:e.map(b=>b.toString()),argumentList:c},f).then(v)}});return me(s,n),s}function ye(n){return Array.prototype.concat.apply([],n)}function _e(n){const e=n.map(H);return[e.map(t=>t[0]),ye(e.map(t=>t[1]))]}const ie=new WeakMap;function pe(n,e){return ie.set(n,e),n}function xe(n){return Object.assign(n,{[A]:!0})}function H(n){for(const[e,t]of re)if(t.canHandle(n)){const[r,s]=t.serialize(n);return[{type:"HANDLER",name:e,value:r},s]}return[{type:"RAW",value:n},ie.get(n)||[]]}function v(n){switch(n.type){case"HANDLER":return re.get(n.name).deserialize(n.value);case"RAW":return n.value}}function R(n,e,t){return new Promise(r=>{const s=Ee();n.addEventListener("message",function i(_){!_.data||!_.data.id||_.data.id!==s||(n.removeEventListener("message",i),r(_.data))}),n.start&&n.start(),n.postMessage(Object.assign({id:s},e),t)})}function Ee(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function Ae(n){if(n)return n.project_key;throw"getActiveProjectModelGroupKey called without active prosjekt selected"}function Se(n){return`META_${n}`}class ve{constructor(e,t=1,r="DATA"){L(this,"__name");L(this,"__version");L(this,"__storeName");L(this,"__logEnabled");L(this,"__db");this.__name=e,this.__version=t,this.__storeName=r,this.__logEnabled=!1}enableLog(){this.__logEnabled=!0}__logStart(e){this.__logEnabled&&console.time(`ModelStoreLog_${this.__name}_${this.__storeName}_${e}`)}__logEnd(e){this.__logEnabled&&console.timeEnd(`ModelStoreLog_${this.__name}_${this.__storeName}_${e}`)}close(){return new Promise(e=>{this.__db&&(this.__db.close(),e(!0))})}__open(){return new Promise((e,t)=>{if(this.__db)e(this.__db);else{const r=indexedDB.open(this.__name,this.__version);r.onupgradeneeded=()=>{const s=r.result;s.objectStoreNames.contains(this.__name)||s.createObjectStore(this.__storeName)},r.onblocked=s=>{this.__logEnd("getKey"),t({type:"onblocked",event:s})},r.onerror=s=>{this.__logEnd("getKey"),t({type:"onblocked",event:s})},r.onsuccess=()=>{this.__db=r.result,e(r.result)}}})}getUUID(){return crypto.randomUUID()}getKey(e){return new Promise(async(t,r)=>{this.__logStart("getKey");try{const i=(await this.__open()).transaction(this.__storeName);i.onerror=f=>{this.__logEnd("getKey"),r({type:"store tx error",event:f})};const c=i.objectStore(this.__storeName).get(e);c.onsuccess=()=>{this.__logEnd("getKey"),t(c.result)}}catch(s){this.__logEnd("getKey"),r(s)}})}setKey(e,t){return new Promise(async(r,s)=>{var i;this.__logStart("setKey");try{const c=(await this.__open()).transaction(this.__storeName,"readwrite");c.onerror=w=>{this.__logEnd("setKey"),s({type:"store tx error",event:w})};const b=c.objectStore(this.__storeName).put(t,e);b.onsuccess=()=>{this.__logEnd("setKey"),r(b.result)},(i=b.transaction)==null||i.commit()}catch(_){this.__logEnd("setKey"),s(_)}})}getAllKeys(){return new Promise(async(e,t)=>{this.__logStart("getAllKeys");try{const s=(await this.__open()).transaction(this.__storeName,"readwrite");s.onerror=c=>{this.__logEnd("getAllKeys"),t({type:"store tx error",event:c})};const _=s.objectStore(this.__storeName).getAllKeys();_.onsuccess=()=>{this.__logEnd("getAllKeys"),e(_.result)}}catch(r){this.__logEnd("getAllKeys"),t(r)}})}deleteKey(e){return new Promise(async(t,r)=>{this.__logStart("deleteKey");try{const i=(await this.__open()).transaction(this.__storeName,"readwrite");i.onerror=f=>{this.__logEnd("deleteKey"),r({type:"store tx error",event:f})};const c=i.objectStore(this.__storeName).delete(e);c.onsuccess=()=>{this.__logEnd("deleteKey"),t(c.result)}}catch(s){this.__logEnd("deleteKey"),r(s)}})}deleteDB(){return new Promise((e,t)=>{this.__logStart("deleteDB");const r=indexedDB.deleteDatabase(this.__name);r.onsuccess=()=>{this.__logEnd("deleteDB"),e(!0)},r.onerror=s=>{this.__logEnd("deleteDB"),t({type:"onblocked",event:s})}})}}let o;const x=new Array(128).fill(void 0);x.push(void 0,null,!0,!1);function l(n){return x[n]}let K=x.length;function ke(n){n<132||(x[n]=K,K=n)}function g(n){const e=l(n);return ke(n),e}let d=0,M=null;function N(){return(M===null||M.byteLength===0)&&(M=new Uint8Array(o.memory.buffer)),M}const V=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},Le=typeof V.encodeInto=="function"?function(n,e){return V.encodeInto(n,e)}:function(n,e){const t=V.encode(n);return e.set(t),{read:n.length,written:t.length}};function E(n,e,t){if(t===void 0){const c=V.encode(n),f=e(c.length,1)>>>0;return N().subarray(f,f+c.length).set(c),d=c.length,f}let r=n.length,s=e(r,1)>>>0;const i=N();let _=0;for(;_<r;_++){const c=n.charCodeAt(_);if(c>127)break;i[s+_]=c}if(_!==r){_!==0&&(n=n.slice(_)),s=t(s,r,r=_+n.length*3,1)>>>0;const c=N().subarray(s+_,s+r),f=Le(n,c);_+=f.written,s=t(s,r,_,1)>>>0}return d=_,s}function Q(n){return n==null}let T=null;function k(){return(T===null||T.byteLength===0)&&(T=new Int32Array(o.memory.buffer)),T}const ce=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&ce.decode();function X(n,e){return n=n>>>0,ce.decode(N().subarray(n,n+e))}function u(n){K===x.length&&x.push(x.length+1);const e=K;return K=x[e],x[e]=n,e}let F=null;function Re(){return(F===null||F.byteLength===0)&&(F=new Float64Array(o.memory.buffer)),F}function G(n){const e=typeof n;if(e=="number"||e=="boolean"||n==null)return`${n}`;if(e=="string")return`"${n}"`;if(e=="symbol"){const s=n.description;return s==null?"Symbol":`Symbol(${s})`}if(e=="function"){const s=n.name;return typeof s=="string"&&s.length>0?`Function(${s})`:"Function"}if(Array.isArray(n)){const s=n.length;let i="[";s>0&&(i+=G(n[0]));for(let _=1;_<s;_++)i+=", "+G(n[_]);return i+="]",i}const t=/\[object ([^\]]+)\]/.exec(toString.call(n));let r;if(t.length>1)r=t[1];else return toString.call(n);if(r=="Object")try{return"Object("+JSON.stringify(n)+")"}catch{return"Object"}return n instanceof Error?`${n.name}: ${n.message}
${n.stack}`:r}let O=null;function Ke(){return(O===null||O.byteLength===0)&&(O=new Uint32Array(o.memory.buffer)),O}function ee(n,e){const t=e(n.length*4,4)>>>0;return Ke().set(n,t/4),d=n.length,t}function ae(n,e){const t=e(n.length*1,1)>>>0;return N().set(n,t/1),d=n.length,t}let C=null;function Me(){return(C===null||C.byteLength===0)&&(C=new Float32Array(o.memory.buffer)),C}function j(n,e){const t=e(n.length*4,4)>>>0;return Me().set(n,t/4),d=n.length,t}function te(n,e){try{return n.apply(this,e)}catch(t){o.__wbindgen_exn_store(u(t))}}const le=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>o.__wbg_webinterface_free(n>>>0));class z{static __wrap(e){e=e>>>0;const t=Object.create(z.prototype);return t.__wbg_ptr=e,le.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,le.unregister(this),e}free(){const e=this.__destroy_into_raw();o.__wbg_webinterface_free(e)}static new(){const e=o.webinterface_new();return z.__wrap(e)}selection_is_hidden(e){return o.webinterface_selection_is_hidden(this.__wbg_ptr,e)!==0}selection_is_selected(e){return o.webinterface_selection_is_selected(this.__wbg_ptr,e)!==0}selection_add(e,t){const r=ee(e,o.__wbindgen_malloc),s=d;o.webinterface_selection_add(this.__wbg_ptr,r,s,t)}selection_remove(e){const t=ee(e,o.__wbindgen_malloc),r=d;o.webinterface_selection_remove(this.__wbg_ptr,t,r)}selection_clear(e){o.webinterface_selection_clear(this.__wbg_ptr,e)}update_hidden_groups(){const e=o.webinterface_update_hidden_groups(this.__wbg_ptr);return g(e)}selection_set_color(e){const t=E(e,o.__wbindgen_malloc,o.__wbindgen_realloc),r=d,s=o.webinterface_selection_set_color(this.__wbg_ptr,t,r);return g(s)}unhide_all(){const e=o.webinterface_unhide_all(this.__wbg_ptr);return g(e)}selection_reset(e,t,r,s){const i=o.webinterface_selection_reset(this.__wbg_ptr,e,t,r,s);return g(i)}selection_show_only_selected(e){const t=o.webinterface_selection_show_only_selected(this.__wbg_ptr,e);return g(t)}selection_invert(){const e=o.webinterface_selection_invert(this.__wbg_ptr);return g(e)}selection_allow_selection_of_hidden(e){o.webinterface_selection_allow_selection_of_hidden(this.__wbg_ptr,e)}selection_save_transformation(e,t,r,s,i,_,c,f,b,w,h,m,y,P,U,$){const Y=o.webinterface_selection_save_transformation(this.__wbg_ptr,e,t,r,s,i,_,c,f,b,w,h,m,y,P,U,$);return g(Y)}update_selection(){const e=o.webinterface_update_selection(this.__wbg_ptr);return g(e)}undo_transform(){const e=o.webinterface_undo_transform(this.__wbg_ptr);return g(e)}meta_find_key_from_face_index(e,t){const r=E(e,o.__wbindgen_malloc,o.__wbindgen_realloc),s=d;return o.webinterface_meta_find_key_from_face_index(this.__wbg_ptr,r,s,t)>>>0}meshes_get_all(){const e=o.webinterface_meshes_get_all(this.__wbg_ptr);return g(e)}meshes_set_mesh_as_loaded(e,t,r,s,i){const _=E(e,o.__wbindgen_malloc,o.__wbindgen_realloc),c=d;o.webinterface_meshes_set_mesh_as_loaded(this.__wbg_ptr,_,c,u(t),u(r),u(s),u(i))}filter_treeview_fullname(e,t,r){const s=E(e,o.__wbindgen_malloc,o.__wbindgen_realloc),i=d,_=o.webinterface_filter_treeview_fullname(this.__wbg_ptr,s,i,t,r);return g(_)}meshes_remove_mesh_as_loaded(e){const t=E(e,o.__wbindgen_malloc,o.__wbindgen_realloc),r=d;o.webinterface_meshes_remove_mesh_as_loaded(this.__wbg_ptr,t,r)}filter_geometry(e,t){o.webinterface_filter_geometry(this.__wbg_ptr,u(e),u(t))}cache(e){const t=ae(e,o.__wbindgen_malloc),r=d;o.webinterface_cache(this.__wbg_ptr,t,r)}add_model_group(e){const t=ae(e,o.__wbindgen_malloc),r=d;o.webinterface_add_model_group(this.__wbg_ptr,t,r)}get_bounding_box_from_selection(e){const t=o.webinterface_get_bounding_box_from_selection(this.__wbg_ptr,e);return g(t)}all_sites_loaded(){o.webinterface_all_sites_loaded(this.__wbg_ptr)}get_bounding_boxes_from_selection(){const e=o.webinterface_get_bounding_boxes_from_selection(this.__wbg_ptr);return g(e)}get_bounding_box_from_ids(e,t){const r=o.webinterface_get_bounding_box_from_ids(this.__wbg_ptr,u(e),t);return g(r)}get_ids_from_fullnames(e){const t=o.webinterface_get_ids_from_fullnames(this.__wbg_ptr,u(e));return g(t)}treeview_collapse(){o.webinterface_treeview_collapse(this.__wbg_ptr)}treeview_toggle_id(e){o.webinterface_treeview_toggle_id(this.__wbg_ptr,e)}get_fullnames_from_selection(e){const t=o.webinterface_get_fullnames_from_selection(this.__wbg_ptr,e);return g(t)}get_all_ids_from_fullnames(e,t){const r=o.webinterface_get_all_ids_from_fullnames(this.__wbg_ptr,u(e),t);return g(r)}get_all_ids_from_ids(e){const t=o.webinterface_get_all_ids_from_ids(this.__wbg_ptr,u(e));return g(t)}get_fullname_from_keys(e,t){const r=o.webinterface_get_fullname_from_keys(this.__wbg_ptr,u(e),t);return g(r)}get_parents_from_fullname(e){const t=E(e,o.__wbindgen_malloc,o.__wbindgen_realloc),r=d,s=o.webinterface_get_parents_from_fullname(this.__wbg_ptr,t,r);return g(s)}get_parents_from_id(e){const t=o.webinterface_get_parents_from_id(this.__wbg_ptr,e);return g(t)}treeview_expand_from_id(e){o.webinterface_treeview_expand_from_id(this.__wbg_ptr,e)}treeview_reset_rows(){const e=o.webinterface_treeview_reset_rows(this.__wbg_ptr);return g(e)}reset_culling_all_meshes(){const e=o.webinterface_reset_culling_all_meshes(this.__wbg_ptr);return g(e)}set_occlusion_boxes(e){const t=j(e,o.__wbindgen_malloc),r=d;o.webinterface_set_occlusion_boxes(this.__wbg_ptr,t,r)}cull_items(e,t,r,s,i,_,c,f){const b=j(e,o.__wbindgen_malloc),w=d,h=j(t,o.__wbindgen_malloc),m=d,y=j(i,o.__wbindgen_malloc),P=d,U=ee(_,o.__wbindgen_malloc),$=d,Y=j(c,o.__wbindgen_malloc),Ce=d,je=o.webinterface_cull_items(this.__wbg_ptr,b,w,h,m,r,s,y,P,U,$,Y,Ce,f);return g(je)}}async function Ne(n,e){if(typeof Response=="function"&&n instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(n,e)}catch(r){if(n.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const t=await n.arrayBuffer();return await WebAssembly.instantiate(t,e)}else{const t=await WebAssembly.instantiate(n,e);return t instanceof WebAssembly.Instance?{instance:t,module:n}:t}}function Te(){const n={};return n.wbg={},n.wbg.__wbindgen_object_drop_ref=function(e){g(e)},n.wbg.__wbindgen_string_get=function(e,t){const r=l(t),s=typeof r=="string"?r:void 0;var i=Q(s)?0:E(s,o.__wbindgen_malloc,o.__wbindgen_realloc),_=d;k()[e/4+1]=_,k()[e/4+0]=i},n.wbg.__wbg_new_898a68150f225f2e=function(){const e=new Array;return u(e)},n.wbg.__wbg_new_b51585de1b234aff=function(){const e=new Object;return u(e)},n.wbg.__wbindgen_string_new=function(e,t){const r=X(e,t);return u(r)},n.wbg.__wbg_set_9182712abebf82ef=function(e,t,r){l(e)[g(t)]=g(r)},n.wbg.__wbindgen_number_new=function(e){return u(e)},n.wbg.__wbg_set_502d29070ea18557=function(e,t,r){l(e)[t>>>0]=g(r)},n.wbg.__wbg_isArray_4c24b343cb13cfb1=function(e){return Array.isArray(l(e))},n.wbg.__wbg_length_fff51ee6522a1a18=function(e){return l(e).length},n.wbg.__wbg_get_44be0491f933a435=function(e,t){const r=l(e)[t>>>0];return u(r)},n.wbg.__wbg_next_ddb3312ca1c4e32a=function(){return te(function(e){const t=l(e).next();return u(t)},arguments)},n.wbg.__wbg_done_5c1f01fb660d73b5=function(e){return l(e).done},n.wbg.__wbg_value_1695675138684bd5=function(e){const t=l(e).value;return u(t)},n.wbg.__wbindgen_jsval_loose_eq=function(e,t){return l(e)==l(t)},n.wbg.__wbg_isSafeInteger_bb8e18dd21c97288=function(e){return Number.isSafeInteger(l(e))},n.wbg.__wbindgen_as_number=function(e){return+l(e)},n.wbg.__wbindgen_is_object=function(e){const t=l(e);return typeof t=="object"&&t!==null},n.wbg.__wbg_entries_e51f29c7bba0c054=function(e){const t=Object.entries(l(e));return u(t)},n.wbg.__wbindgen_bigint_from_u64=function(e){const t=BigInt.asUintN(64,e);return u(t)},n.wbg.__wbg_new_abda76e883ba8a5f=function(){const e=new Error;return u(e)},n.wbg.__wbg_stack_658279fe44541cf6=function(e,t){const r=l(t).stack,s=E(r,o.__wbindgen_malloc,o.__wbindgen_realloc),i=d;k()[e/4+1]=i,k()[e/4+0]=s},n.wbg.__wbg_error_f851667af71bcfc6=function(e,t){let r,s;try{r=e,s=t,console.error(X(e,t))}finally{o.__wbindgen_free(r,s,1)}},n.wbg.__wbg_iterator_97f0c81209c6c35a=function(){return u(Symbol.iterator)},n.wbg.__wbg_get_97b561fb56f034b5=function(){return te(function(e,t){const r=Reflect.get(l(e),l(t));return u(r)},arguments)},n.wbg.__wbindgen_is_function=function(e){return typeof l(e)=="function"},n.wbg.__wbg_call_cb65541d95d71282=function(){return te(function(e,t){const r=l(e).call(l(t));return u(r)},arguments)},n.wbg.__wbg_next_526fc47e980da008=function(e){const t=l(e).next;return u(t)},n.wbg.__wbg_length_72e2208bbc0efc61=function(e){return l(e).length},n.wbg.__wbindgen_memory=function(){const e=o.memory;return u(e)},n.wbg.__wbg_buffer_085ec1f694018c4f=function(e){const t=l(e).buffer;return u(t)},n.wbg.__wbg_new_8125e318e6245eed=function(e){const t=new Uint8Array(l(e));return u(t)},n.wbg.__wbg_set_5cf90238115182c3=function(e,t,r){l(e).set(l(t),r>>>0)},n.wbg.__wbindgen_boolean_get=function(e){const t=l(e);return typeof t=="boolean"?t?1:0:2},n.wbg.__wbindgen_number_get=function(e,t){const r=l(t),s=typeof r=="number"?r:void 0;Re()[e/8+1]=Q(s)?0:s,k()[e/4+0]=!Q(s)},n.wbg.__wbg_instanceof_Uint8Array_d8d9cb2b8e8ac1d4=function(e){let t;try{t=l(e)instanceof Uint8Array}catch{t=!1}return t},n.wbg.__wbg_instanceof_ArrayBuffer_39ac22089b74fddb=function(e){let t;try{t=l(e)instanceof ArrayBuffer}catch{t=!1}return t},n.wbg.__wbindgen_object_clone_ref=function(e){const t=l(e);return u(t)},n.wbg.__wbindgen_error_new=function(e,t){const r=new Error(X(e,t));return u(r)},n.wbg.__wbindgen_debug_string=function(e,t){const r=G(l(t)),s=E(r,o.__wbindgen_malloc,o.__wbindgen_realloc),i=d;k()[e/4+1]=i,k()[e/4+0]=s},n.wbg.__wbindgen_throw=function(e,t){throw new Error(X(e,t))},n.wbg.__wbg_new_56693dbed0c32988=function(){return u(new Map)},n.wbg.__wbg_set_bedc3d02d0f05eb0=function(e,t,r){const s=l(e).set(l(t),l(r));return u(s)},n.wbg.__wbindgen_is_string=function(e){return typeof l(e)=="string"},n.wbg.__wbg_getwithrefkey_4a92a5eca60879b9=function(e,t){const r=l(e)[l(t)];return u(r)},n.wbg.__wbindgen_is_undefined=function(e){return l(e)===void 0},n.wbg.__wbindgen_in=function(e,t){return l(e)in l(t)},n}function Fe(n,e){return o=n.exports,ue.__wbindgen_wasm_module=e,C=null,F=null,T=null,O=null,M=null,o}async function ue(n){if(o!==void 0)return o;typeof n>"u"&&(n=new URL(""+new URL("web3d_state_bg-6TKE2XT0.wasm",self.location.href).href,self.location.href));const e=Te();(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:t,module:r}=await Ne(await n,e);return Fe(t,r)}let a;ue().then(()=>{a=z.new();try{a.cache(new Uint8Array(1e8))}catch(n){console.error(n)}});class Oe{constructor(){L(this,"$threeviewRowsLocalCache",[])}async filterFullname(e,t=0,r=5){return a.filter_treeview_fullname(e,t,r)}async getBoundingBoxFromName(e,t){return this.getBoundingBoxFromNameSync(e,t)}getBoundingBoxFromNameSync(e,t){const r=a.get_ids_from_fullnames([e]),s=a.get_bounding_box_from_ids(r,t);return{X:s.x_max,Y:s.y_max,Z:s.z_max,x:s.x_min,y:s.y_min,z:s.z_min}}async selection_save_transformation(e,t,r,s,i,_,c,f,b,w,h,m,y,P,U,$){return a.selection_save_transformation(e,t,r,s,i,_,c,f,b,w,h,m,y,P,U,$)}async getBoundingBoxFromKeys(e){const t=a.get_bounding_box_from_ids(e,!0);return{X:t.x_max,Y:t.y_max,Z:t.z_max,x:t.x_min,y:t.y_min,z:t.z_min}}async get_fullnames_from_selection(e=!1){return a.get_fullnames_from_selection(e)}async getBoundingBoxFromKey(e){return this.getBoundingBoxFromKeys([e])}async add_model_groups(e,t){const r=e==null?void 0:e.filter(i=>i.$synced),s=new ve(Ae(t));if(r!=null&&r.length){const i=r.map(_=>_.name);for(let _=0;_<i.length;_++){const c=await s.getKey(Se(i[_]));a.add_model_group(c)}}}async undo_transform(){return a.undo_transform()}async get_bounding_box_from_selection(e=!1){const t=a.get_bounding_box_from_selection(e);return{X:t.x_max,Y:t.y_max,Z:t.z_max,x:t.x_min,y:t.y_min,z:t.z_min}}async get_all_ids_from_ids(e){return a.get_all_ids_from_ids([e])}selection_is_hidden(e){return a.selection_is_hidden(e)}selection_is_selected(e){return a.selection_is_selected(e)}selection_add(e,t){a.selection_add(new Uint32Array(e),t)}selection_remove(e){a.selection_remove(new Uint32Array(e))}all_sites_loaded(){a.all_sites_loaded()}selection_clear(e=!1){a==null||a.selection_clear(e)}selection_invert(){const e=a.selection_invert();return this.$threeviewRowsLocalCache=a.treeview_reset_rows(),e}selection_set_color(e){const t=a.selection_set_color(e);return this.$threeviewRowsLocalCache=a.treeview_reset_rows(),t}selection_allow_selection_of_hidden(e){a.selection_allow_selection_of_hidden(e)}selection_show_only_selected(e){return a.selection_show_only_selected(e)}unhide_all(){const e=a.unhide_all();return this.$threeviewRowsLocalCache=a.treeview_reset_rows(),e}selection_reset(e,t,r,s){const i=a.selection_reset(e,t,r,s);return this.$threeviewRowsLocalCache=a.treeview_reset_rows(),i}reset_culling_all_meshes(){return a.reset_culling_all_meshes()}get_bounding_boxes_from_selection(){return a.get_bounding_boxes_from_selection()}async set_occlusion_boxes(e){a.set_occlusion_boxes(new Float32Array(e))}async cull_items(e,t,r,s,i,_,c,f){let b=[0,0,0,0,0,0,0];return c&&(b=[1,c.min.x,c.min.y,c.min.z,c.max.x,c.max.y,c.max.z]),a.cull_items(new Float32Array(e.elements),new Float32Array(t.elements),r,s,new Float32Array([i.x,i.y,i.z]),new Uint32Array(_),new Float32Array(b),f)}selection_append(){const e=a.update_selection();return this.$threeviewRowsLocalCache=a.treeview_reset_rows(),e}meta_find_key_from_face_index(e,t){return a.meta_find_key_from_face_index(e,t)}async clear(){a.free(),a=z.new()}async meshes_set_mesh_as_loaded(e,t,r){a.meshes_set_mesh_as_loaded(e,t,r,null,null)}async length(){return this.$threeviewRowsLocalCache.length}async update_hidden_groups(){return a.update_hidden_groups()}async treeview_collapse(){a.treeview_collapse()}async treeview_reset_rows(){this.$threeviewRowsLocalCache=a.treeview_reset_rows()}async get_ids_from_fullnames(e){return a.get_ids_from_fullnames(e)}async get_fullname_from_keys(e,t=!1){return a.get_fullname_from_keys(e,t)}async treeview_get_local_cache(){return this.$threeviewRowsLocalCache}async getDataExt(e){if(e){const t=this.get_parents_from_id(e);let r="";return Array.isArray(t[0])&&(r=t[0][0]),{fullname:r,key:e,parents:t[0],parentKeys:t[1]}}else return{fullname:void 0,parents:void 0,parentKeys:void 0,key:e}}async treeview_toggle_id(e){a.treeview_toggle_id(e),await this.treeview_reset_rows()}async treeview_expand_from_id(e){e&&(a.treeview_expand_from_id(e),await this.treeview_reset_rows())}get_parents_from_id(e){return a.get_parents_from_id(e)}async filter_geometry(e,t){const r=e.length===0?null:structuredClone(e);return r&&r.forEach(i=>{i.length&&i.forEach(_=>{const c=_;c.filter_type=_.type,delete c.type,c.filter_action=_.filtertype,delete c.filtertype})}),a.filter_geometry(r,t),a.meshes_get_all()}}Z(Oe)})();
